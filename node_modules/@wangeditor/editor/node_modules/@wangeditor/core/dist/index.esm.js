import{Editor as e,Operation as t,Path as n,Node as r,Range as o,Element as i,Text as a,Transforms as s,Point as l,createEditor as u}from"slate";import c from"lodash.toarray";import f,{css as d,append as h,addClass as p,removeClass as g,hasClass as v,on as y,focus as m,attr as b,removeAttr as w,hide as x,show as S,offset as k,width as E,height as O,parent as C,parents as N,is as T,dataset as M,val as L,text as P,html as D,children as R,remove as j,find as A,each as F}from"dom7";import I from"lodash.foreach";import"nanoid";import _ from"lodash.throttle";import{init as B,classModule as $,propsModule as W,styleModule as V,datasetModule as z,eventListenersModule as U,jsx as H,h as K}from"snabbdom";import q from"lodash.camelcase";import{isKeyHotkey as G,isHotkey as J}from"is-hotkey";import Y from"lodash.debounce";import X from"lodash.clonedeep";import Q from"@uppy/core";import Z from"@uppy/xhr-upload";var ee="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function te(e){var t={exports:{}};return e(t,t.exports),t.exports}var ne,re,oe=function(e){return e&&e.Math==Math&&e},ie=oe("object"==typeof globalThis&&globalThis)||oe("object"==typeof window&&window)||oe("object"==typeof self&&self)||oe("object"==typeof ee&&ee)||function(){return this}()||Function("return this")(),ae=Object.defineProperty,se=function(e,t){try{ae(ie,e,{value:t,configurable:!0,writable:!0})}catch(n){ie[e]=t}return t},le=ie["__core-js_shared__"]||se("__core-js_shared__",{}),ue=te((function(e){(e.exports=function(e,t){return le[e]||(le[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),ce=Function.prototype,fe=ce.bind,de=ce.call,he=fe&&fe.bind(de),pe=fe?function(e){return e&&he(de,e)}:function(e){return e&&function(){return de.apply(e,arguments)}},ge=ie.TypeError,ve=function(e){if(null==e)throw ge("Can't call method on "+e);return e},ye=ie.Object,me=function(e){return ye(ve(e))},be=pe({}.hasOwnProperty),we=Object.hasOwn||function(e,t){return be(me(e),t)},xe=0,Se=Math.random(),ke=pe(1..toString),Ee=function(e){return"Symbol("+(void 0===e?"":e)+")_"+ke(++xe+Se,36)},Oe=function(e){return"function"==typeof e},Ce=function(e){return Oe(e)?e:void 0},Ne=function(e,t){return arguments.length<2?Ce(ie[e]):ie[e]&&ie[e][t]},Te=Ne("navigator","userAgent")||"",Me=ie.process,Le=ie.Deno,Pe=Me&&Me.versions||Le&&Le.version,De=Pe&&Pe.v8;De&&(re=(ne=De.split("."))[0]>0&&ne[0]<4?1:+(ne[0]+ne[1])),!re&&Te&&(!(ne=Te.match(/Edge\/(\d+)/))||ne[1]>=74)&&(ne=Te.match(/Chrome\/(\d+)/))&&(re=+ne[1]);var Re=re,je=function(e){try{return!!e()}catch(e){return!0}},Ae=!!Object.getOwnPropertySymbols&&!je((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Re&&Re<41})),Fe=Ae&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ie=ue("wks"),_e=ie.Symbol,Be=_e&&_e.for,$e=Fe?_e:_e&&_e.withoutSetter||Ee,We=function(e){if(!we(Ie,e)||!Ae&&"string"!=typeof Ie[e]){var t="Symbol."+e;Ae&&we(_e,e)?Ie[e]=_e[e]:Ie[e]=Fe&&Be?Be(t):$e(t)}return Ie[e]},Ve={};Ve[We("toStringTag")]="z";var ze="[object z]"===String(Ve),Ue=!je((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),He=function(e){return"object"==typeof e?null!==e:Oe(e)},Ke=ie.document,qe=He(Ke)&&He(Ke.createElement),Ge=function(e){return qe?Ke.createElement(e):{}},Je=!Ue&&!je((function(){return 7!=Object.defineProperty(Ge("div"),"a",{get:function(){return 7}}).a})),Ye=ie.String,Xe=ie.TypeError,Qe=function(e){if(He(e))return e;throw Xe(Ye(e)+" is not an object")},Ze=Function.prototype.call,et=Ze.bind?Ze.bind(Ze):function(){return Ze.apply(Ze,arguments)},tt=pe({}.isPrototypeOf),nt=ie.Object,rt=Fe?function(e){return"symbol"==typeof e}:function(e){var t=Ne("Symbol");return Oe(t)&&tt(t.prototype,nt(e))},ot=ie.String,it=function(e){try{return ot(e)}catch(e){return"Object"}},at=ie.TypeError,st=function(e){if(Oe(e))return e;throw at(it(e)+" is not a function")},lt=function(e,t){var n=e[t];return null==n?void 0:st(n)},ut=ie.TypeError,ct=ie.TypeError,ft=We("toPrimitive"),dt=function(e,t){if(!He(e)||rt(e))return e;var n,r=lt(e,ft);if(r){if(void 0===t&&(t="default"),n=et(r,e,t),!He(n)||rt(n))return n;throw ct("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&Oe(n=e.toString)&&!He(r=et(n,e)))return r;if(Oe(n=e.valueOf)&&!He(r=et(n,e)))return r;if("string"!==t&&Oe(n=e.toString)&&!He(r=et(n,e)))return r;throw ut("Can't convert object to primitive value")}(e,t)},ht=function(e){var t=dt(e,"string");return rt(t)?t:t+""},pt=ie.TypeError,gt=Object.defineProperty,vt={f:Ue?gt:function(e,t,n){if(Qe(e),t=ht(t),Qe(n),Je)try{return gt(e,t,n)}catch(e){}if("get"in n||"set"in n)throw pt("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},yt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},mt=Ue?function(e,t,n){return vt.f(e,t,yt(1,n))}:function(e,t,n){return e[t]=n,e},bt=pe(Function.toString);Oe(le.inspectSource)||(le.inspectSource=function(e){return bt(e)});var wt,xt,St,kt=le.inspectSource,Et=ie.WeakMap,Ot=Oe(Et)&&/native code/.test(kt(Et)),Ct=ue("keys"),Nt=function(e){return Ct[e]||(Ct[e]=Ee(e))},Tt={},Mt=ie.TypeError,Lt=ie.WeakMap;if(Ot||le.state){var Pt=le.state||(le.state=new Lt),Dt=pe(Pt.get),Rt=pe(Pt.has),jt=pe(Pt.set);wt=function(e,t){if(Rt(Pt,e))throw new Mt("Object already initialized");return t.facade=e,jt(Pt,e,t),t},xt=function(e){return Dt(Pt,e)||{}},St=function(e){return Rt(Pt,e)}}else{var At=Nt("state");Tt[At]=!0,wt=function(e,t){if(we(e,At))throw new Mt("Object already initialized");return t.facade=e,mt(e,At,t),t},xt=function(e){return we(e,At)?e[At]:{}},St=function(e){return we(e,At)}}var Ft={set:wt,get:xt,has:St,enforce:function(e){return St(e)?xt(e):wt(e,{})},getterFor:function(e){return function(t){var n;if(!He(t)||(n=xt(t)).type!==e)throw Mt("Incompatible receiver, "+e+" required");return n}}},It=Function.prototype,_t=Ue&&Object.getOwnPropertyDescriptor,Bt=we(It,"name"),$t={EXISTS:Bt,PROPER:Bt&&"something"===function(){}.name,CONFIGURABLE:Bt&&(!Ue||Ue&&_t(It,"name").configurable)},Wt=te((function(e){var t=$t.CONFIGURABLE,n=Ft.get,r=Ft.enforce,o=String(String).split("String");(e.exports=function(e,n,i,a){var s,l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet,f=a&&void 0!==a.name?a.name:n;Oe(i)&&("Symbol("===String(f).slice(0,7)&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!we(i,"name")||t&&i.name!==f)&&mt(i,"name",f),(s=r(i)).source||(s.source=o.join("string"==typeof f?f:""))),e!==ie?(l?!c&&e[n]&&(u=!0):delete e[n],u?e[n]=i:mt(e,n,i)):u?e[n]=i:se(n,i)})(Function.prototype,"toString",(function(){return Oe(this)&&n(this).source||kt(this)}))})),Vt=pe({}.toString),zt=pe("".slice),Ut=function(e){return zt(Vt(e),8,-1)},Ht=We("toStringTag"),Kt=ie.Object,qt="Arguments"==Ut(function(){return arguments}()),Gt=ze?Ut:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Kt(e),Ht))?n:qt?Ut(t):"Object"==(r=Ut(t))&&Oe(t.callee)?"Arguments":r},Jt=ze?{}.toString:function(){return"[object "+Gt(this)+"]"};ze||Wt(Object.prototype,"toString",Jt,{unsafe:!0});var Yt={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Xt=Ge("span").classList,Qt=Xt&&Xt.constructor&&Xt.constructor.prototype,Zt=Qt===Object.prototype?void 0:Qt,en=pe(pe.bind),tn=function(e,t){return st(e),void 0===t?e:en?en(e,t):function(){return e.apply(t,arguments)}},nn=ie.Object,rn=pe("".split),on=je((function(){return!nn("z").propertyIsEnumerable(0)}))?function(e){return"String"==Ut(e)?rn(e,""):nn(e)}:nn,an=Math.ceil,sn=Math.floor,ln=function(e){var t=+e;return t!=t||0===t?0:(t>0?sn:an)(t)},un=Math.min,cn=function(e){return e>0?un(ln(e),9007199254740991):0},fn=function(e){return cn(e.length)},dn=Array.isArray||function(e){return"Array"==Ut(e)},hn=function(){},pn=[],gn=Ne("Reflect","construct"),vn=/^\s*(?:class|function)\b/,yn=pe(vn.exec),mn=!vn.exec(hn),bn=function(e){if(!Oe(e))return!1;try{return gn(hn,pn,e),!0}catch(e){return!1}},wn=!gn||je((function(){var e;return bn(bn.call)||!bn(Object)||!bn((function(){e=!0}))||e}))?function(e){if(!Oe(e))return!1;switch(Gt(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return mn||!!yn(vn,kt(e))}:bn,xn=We("species"),Sn=ie.Array,kn=function(e,t){return new(function(e){var t;return dn(e)&&(t=e.constructor,(wn(t)&&(t===Sn||dn(t.prototype))||He(t)&&null===(t=t[xn]))&&(t=void 0)),void 0===t?Sn:t}(e))(0===t?0:t)},En=pe([].push),On=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,a=7==e,s=5==e||i;return function(l,u,c,f){for(var d,h,p=me(l),g=on(p),v=tn(u,c),y=fn(g),m=0,b=f||kn,w=t?b(l,y):n||a?b(l,0):void 0;y>m;m++)if((s||m in g)&&(h=v(d=g[m],m,p),e))if(t)w[m]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return m;case 2:En(w,d)}else switch(e){case 4:return!1;case 7:En(w,d)}return i?-1:r||o?o:w}},Cn={forEach:On(0),map:On(1),filter:On(2),some:On(3),every:On(4),find:On(5),findIndex:On(6),filterReject:On(7)},Nn=function(e,t){var n=[][e];return!!n&&je((function(){n.call(null,t||function(){throw 1},1)}))},Tn=Cn.forEach,Mn=Nn("forEach")?[].forEach:function(e){return Tn(this,e,arguments.length>1?arguments[1]:void 0)},Ln=function(e){if(e&&e.forEach!==Mn)try{mt(e,"forEach",Mn)}catch(t){e.forEach=Mn}};for(var Pn in Yt)Yt[Pn]&&Ln(ie[Pn]&&ie[Pn].prototype);Ln(Zt);var Dn={}.propertyIsEnumerable,Rn=Object.getOwnPropertyDescriptor,jn=Rn&&!Dn.call({1:2},1)?function(e){var t=Rn(this,e);return!!t&&t.enumerable}:Dn,An={f:jn},Fn=function(e){return on(ve(e))},In=Object.getOwnPropertyDescriptor,_n={f:Ue?In:function(e,t){if(e=Fn(e),t=ht(t),Je)try{return In(e,t)}catch(e){}if(we(e,t))return yt(!et(An.f,e,t),e[t])}},Bn=Math.max,$n=Math.min,Wn=function(e,t){var n=ln(e);return n<0?Bn(n+t,0):$n(n,t)},Vn=function(e){return function(t,n,r){var o,i=Fn(t),a=fn(i),s=Wn(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},zn={includes:Vn(!0),indexOf:Vn(!1)},Un=zn.indexOf,Hn=pe([].push),Kn=function(e,t){var n,r=Fn(e),o=0,i=[];for(n in r)!we(Tt,n)&&we(r,n)&&Hn(i,n);for(;t.length>o;)we(r,n=t[o++])&&(~Un(i,n)||Hn(i,n));return i},qn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Gn=qn.concat("length","prototype"),Jn={f:Object.getOwnPropertyNames||function(e){return Kn(e,Gn)}},Yn={f:Object.getOwnPropertySymbols},Xn=pe([].concat),Qn=Ne("Reflect","ownKeys")||function(e){var t=Jn.f(Qe(e)),n=Yn.f;return n?Xn(t,n(e)):t},Zn=function(e,t){for(var n=Qn(t),r=vt.f,o=_n.f,i=0;i<n.length;i++){var a=n[i];we(e,a)||r(e,a,o(t,a))}},er=/#|\.prototype\./,tr=function(e,t){var n=rr[nr(e)];return n==ir||n!=or&&(Oe(t)?je(t):!!t)},nr=tr.normalize=function(e){return String(e).replace(er,".").toLowerCase()},rr=tr.data={},or=tr.NATIVE="N",ir=tr.POLYFILL="P",ar=tr,sr=_n.f,lr=function(e,t){var n,r,o,i,a,s=e.target,l=e.global,u=e.stat;if(n=l?ie:u?ie[s]||se(s,{}):(ie[s]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=sr(n,r))&&a.value:n[r],!ar(l?r:s+(u?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;Zn(i,o)}(e.sham||o&&o.sham)&&mt(i,"sham",!0),Wt(n,r,i,e)}},ur=We("species"),cr=function(e){return Re>=51||!je((function(){var t=[];return(t.constructor={})[ur]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},fr=Cn.map,dr=cr("map");lr({target:"Array",proto:!0,forced:!dr},{map:function(e){return fr(this,e,arguments.length>1?arguments[1]:void 0)}});var hr=function(e,t,n){var r,o;Qe(e);try{if(!(r=lt(e,"return"))){if("throw"===t)throw n;return n}r=et(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return Qe(r),n},pr=function(e,t,n,r){try{return r?t(Qe(n)[0],n[1]):t(n)}catch(t){hr(e,"throw",t)}},gr={},vr=We("iterator"),yr=Array.prototype,mr=function(e){return void 0!==e&&(gr.Array===e||yr[vr]===e)},br=function(e,t,n){var r=ht(t);r in e?vt.f(e,r,yt(0,n)):e[r]=n},wr=We("iterator"),xr=function(e){if(null!=e)return lt(e,wr)||lt(e,"@@iterator")||gr[Gt(e)]},Sr=ie.TypeError,kr=function(e,t){var n=arguments.length<2?xr(e):t;if(st(n))return Qe(et(n,e));throw Sr(it(e)+" is not iterable")},Er=ie.Array,Or=We("iterator"),Cr=!1;try{var Nr=0,Tr={next:function(){return{done:!!Nr++}},return:function(){Cr=!0}};Tr[Or]=function(){return this},Array.from(Tr,(function(){throw 2}))}catch(e){}var Mr=function(e,t){if(!t&&!Cr)return!1;var n=!1;try{var r={};r[Or]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Lr=!Mr((function(e){Array.from(e)}));lr({target:"Array",stat:!0,forced:Lr},{from:function(e){var t=me(e),n=wn(this),r=arguments.length,o=r>1?arguments[1]:void 0,i=void 0!==o;i&&(o=tn(o,r>2?arguments[2]:void 0));var a,s,l,u,c,f,d=xr(t),h=0;if(!d||this==Er&&mr(d))for(a=fn(t),s=n?new this(a):Er(a);a>h;h++)f=i?o(t[h],h):t[h],br(s,h,f);else for(c=(u=kr(t,d)).next,s=n?new this:[];!(l=et(c,u)).done;h++)f=i?pr(u,o,[l.value,h],!0):l.value,br(s,h,f);return s.length=h,s}});var Pr,Dr=ie.String,Rr=function(e){if("Symbol"===Gt(e))throw TypeError("Cannot convert a Symbol value to a string");return Dr(e)},jr=pe("".charAt),Ar=pe("".charCodeAt),Fr=pe("".slice),Ir=function(e){return function(t,n){var r,o,i=Rr(ve(t)),a=ln(n),s=i.length;return a<0||a>=s?e?"":void 0:(r=Ar(i,a))<55296||r>56319||a+1===s||(o=Ar(i,a+1))<56320||o>57343?e?jr(i,a):r:e?Fr(i,a,a+2):o-56320+(r-55296<<10)+65536}},_r={codeAt:Ir(!1),charAt:Ir(!0)},Br=Object.keys||function(e){return Kn(e,qn)},$r=Ue?Object.defineProperties:function(e,t){Qe(e);for(var n,r=Fn(t),o=Br(t),i=o.length,a=0;i>a;)vt.f(e,n=o[a++],r[n]);return e},Wr=Ne("document","documentElement"),Vr=Nt("IE_PROTO"),zr=function(){},Ur=function(e){return"<script>"+e+"<\/script>"},Hr=function(e){e.write(Ur("")),e.close();var t=e.parentWindow.Object;return e=null,t},Kr=function(){try{Pr=new ActiveXObject("htmlfile")}catch(e){}var e,t;Kr="undefined"!=typeof document?document.domain&&Pr?Hr(Pr):((t=Ge("iframe")).style.display="none",Wr.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Ur("document.F=Object")),e.close(),e.F):Hr(Pr);for(var n=qn.length;n--;)delete Kr.prototype[qn[n]];return Kr()};Tt[Vr]=!0;var qr,Gr,Jr,Yr=Object.create||function(e,t){var n;return null!==e?(zr.prototype=Qe(e),n=new zr,zr.prototype=null,n[Vr]=e):n=Kr(),void 0===t?n:$r(n,t)},Xr=!je((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Qr=Nt("IE_PROTO"),Zr=ie.Object,eo=Zr.prototype,to=Xr?Zr.getPrototypeOf:function(e){var t=me(e);if(we(t,Qr))return t[Qr];var n=t.constructor;return Oe(n)&&t instanceof n?n.prototype:t instanceof Zr?eo:null},no=We("iterator"),ro=!1;[].keys&&("next"in(Jr=[].keys())?(Gr=to(to(Jr)))!==Object.prototype&&(qr=Gr):ro=!0);var oo=null==qr||je((function(){var e={};return qr[no].call(e)!==e}));oo&&(qr={}),Oe(qr[no])||Wt(qr,no,(function(){return this}));var io={IteratorPrototype:qr,BUGGY_SAFARI_ITERATORS:ro},ao=vt.f,so=We("toStringTag"),lo=function(e,t,n){e&&!we(e=n?e:e.prototype,so)&&ao(e,so,{configurable:!0,value:t})},uo=io.IteratorPrototype,co=function(){return this},fo=ie.String,ho=ie.TypeError,po=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=pe(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Qe(n),function(e){if("object"==typeof e||Oe(e))return e;throw ho("Can't set "+fo(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),go=$t.PROPER,vo=$t.CONFIGURABLE,yo=io.IteratorPrototype,mo=io.BUGGY_SAFARI_ITERATORS,bo=We("iterator"),wo=function(){return this},xo=function(e,t,n,r,o,i,a){!function(e,t,n,r){var o=t+" Iterator";e.prototype=Yr(uo,{next:yt(+!r,n)}),lo(e,o,!1),gr[o]=co}(n,t,r);var s,l,u,c=function(e){if(e===o&&g)return g;if(!mo&&e in h)return h[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},f=t+" Iterator",d=!1,h=e.prototype,p=h[bo]||h["@@iterator"]||o&&h[o],g=!mo&&p||c(o),v="Array"==t&&h.entries||p;if(v&&(s=to(v.call(new e)))!==Object.prototype&&s.next&&(to(s)!==yo&&(po?po(s,yo):Oe(s[bo])||Wt(s,bo,wo)),lo(s,f,!0)),go&&"values"==o&&p&&"values"!==p.name&&(vo?mt(h,"name","values"):(d=!0,g=function(){return et(p,this)})),o)if(l={values:c("values"),keys:i?g:c("keys"),entries:c("entries")},a)for(u in l)(mo||d||!(u in h))&&Wt(h,u,l[u]);else lr({target:t,proto:!0,forced:mo||d},l);return h[bo]!==g&&Wt(h,bo,g,{name:o}),gr[t]=g,l},So=_r.charAt,ko=Ft.set,Eo=Ft.getterFor("String Iterator");xo(String,"String",(function(e){ko(this,{type:"String Iterator",string:Rr(e),index:0})}),(function(){var e,t=Eo(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=So(n,r),t.index+=e.length,{value:e,done:!1})}));var Oo=je((function(){Br(1)}));
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function Co(e){return"[object Object]"===Object.prototype.toString.call(e)}lr({target:"Object",stat:!0,forced:Oo},{keys:function(e){return Br(me(e))}});var No={isHistory(e){return!1!==Co(n=e)&&(void 0===(r=n.constructor)||!1!==Co(o=r.prototype)&&!1!==o.hasOwnProperty("isPrototypeOf"))&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||t.isOperationList(e.redos[0]))&&(0===e.undos.length||t.isOperationList(e.undos[0]));var n,r,o}},To=new WeakMap,Mo=new WeakMap,Lo={isHistoryEditor:t=>No.isHistory(t.history)&&e.isEditor(t),isMerging:e=>Mo.get(e),isSaving:e=>To.get(e),redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var n=Lo.isMerging(e);Mo.set(e,!1),t(),Mo.set(e,n)},withoutSaving(e,t){var n=Lo.isSaving(e);To.set(e,!1),t(),To.set(e,n)}},Po=(e,t)=>"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!n.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!n.equals(e.path,t.path))),Do=(e,t)=>"set_selection"!==e.type||null!=e.properties&&null!=e.newProperties,Ro=(e,t)=>!(!t||"set_selection"!==e.type||"set_selection"!==t.type),jo=e=>"set_selection"!==e.type,Ao=function(){var e=Qe(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Fo=$t.PROPER,Io=RegExp.prototype,_o=Io.toString,Bo=pe(Ao),$o=je((function(){return"/a/b"!=_o.call({source:"a",flags:"b"})})),Wo=Fo&&"toString"!=_o.name;($o||Wo)&&Wt(RegExp.prototype,"toString",(function(){var e=Qe(this),t=Rr(e.source),n=e.flags;return"/"+t+"/"+Rr(void 0===n&&tt(Io,e)&&!("flags"in Io)?Bo(e):n)}),{unsafe:!0});var Vo=We("unscopables"),zo=Array.prototype;null==zo[Vo]&&vt.f(zo,Vo,{configurable:!0,value:Yr(null)});var Uo=function(e){zo[Vo][e]=!0},Ho=zn.includes;lr({target:"Array",proto:!0},{includes:function(e){return Ho(this,e,arguments.length>1?arguments[1]:void 0)}}),Uo("includes");var Ko=We("match"),qo=function(e){var t;return He(e)&&(void 0!==(t=e[Ko])?!!t:"RegExp"==Ut(e))},Go=ie.TypeError,Jo=function(e){if(qo(e))throw Go("The method doesn't accept regular expressions");return e},Yo=We("match"),Xo=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Yo]=!1,"/./"[e](t)}catch(e){}}return!1},Qo=pe("".indexOf);lr({target:"String",proto:!0,forced:!Xo("includes")},{includes:function(e){return!!~Qo(Rr(ve(this)),Rr(Jo(e)),arguments.length>1?arguments[1]:void 0)}});var Zo,ei=/"/g,ti=pe("".replace);lr({target:"String",proto:!0,forced:(Zo="anchor",je((function(){var e=""[Zo]('"');return e!==e.toLowerCase()||e.split('"').length>3})))},{anchor:function(e){return t="a",n="name",r=e,o=Rr(ve(this)),i="<"+t,""!==n&&(i+=" "+n+'="'+ti(Rr(r),ei,"&quot;")+'"'),i+">"+o+"</"+t+">";var t,n,r,o,i}});var ni,ri=_n.f,oi=pe("".endsWith),ii=pe("".slice),ai=Math.min,si=Xo("endsWith"),li=!(si||(ni=ri(String.prototype,"endsWith"),!ni||ni.writable));lr({target:"String",proto:!0,forced:!li&&!si},{endsWith:function(e){var t=Rr(ve(this));Jo(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,o=void 0===n?r:ai(cn(n),r),i=Rr(e);return oi?oi(t,i,o):ii(t,o-i.length,o)===i}});var ui=pe([].join),ci=on!=Object,fi=Nn("join",",");lr({target:"Array",proto:!0,forced:ci||!fi},{join:function(e){return ui(Fn(this),void 0===e?",":e)}});var di=ie.RegExp,hi=je((function(){var e=di("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),pi=hi||je((function(){return!di("a","y").sticky})),gi={BROKEN_CARET:hi||je((function(){var e=di("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:pi,UNSUPPORTED_Y:hi},vi=ie.RegExp,yi=je((function(){var e=vi(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),mi=ie.RegExp,bi=je((function(){var e=mi("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),wi=Ft.get,xi=ue("native-string-replace",String.prototype.replace),Si=RegExp.prototype.exec,ki=Si,Ei=pe("".charAt),Oi=pe("".indexOf),Ci=pe("".replace),Ni=pe("".slice),Ti=function(){var e=/a/,t=/b*/g;return et(Si,e,"a"),et(Si,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Mi=gi.BROKEN_CARET,Li=void 0!==/()??/.exec("")[1];(Ti||Li||Mi||yi||bi)&&(ki=function(e){var t,n,r,o,i,a,s,l=this,u=wi(l),c=Rr(e),f=u.raw;if(f)return f.lastIndex=l.lastIndex,t=et(ki,f,c),l.lastIndex=f.lastIndex,t;var d=u.groups,h=Mi&&l.sticky,p=et(Ao,l),g=l.source,v=0,y=c;if(h&&(p=Ci(p,"y",""),-1===Oi(p,"g")&&(p+="g"),y=Ni(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==Ei(c,l.lastIndex-1))&&(g="(?: "+g+")",y=" "+y,v++),n=new RegExp("^(?:"+g+")",p)),Li&&(n=new RegExp("^"+g+"$(?!\\s)",p)),Ti&&(r=l.lastIndex),o=et(Si,h?n:l,y),h?o?(o.input=Ni(o.input,v),o[0]=Ni(o[0],v),o.index=l.lastIndex,l.lastIndex+=o[0].length):l.lastIndex=0:Ti&&o&&(l.lastIndex=l.global?o.index+o[0].length:r),Li&&o&&o.length>1&&et(xi,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=a=Yr(null),i=0;i<d.length;i++)a[(s=d[i])[0]]=o[s[1]];return o});var Pi=ki;lr({target:"RegExp",proto:!0,forced:/./.exec!==Pi},{exec:Pi});var Di=Function.prototype,Ri=Di.apply,ji=Di.bind,Ai=Di.call,Fi="object"==typeof Reflect&&Reflect.apply||(ji?Ai.bind(Ri):function(){return Ai.apply(Ri,arguments)}),Ii=We("species"),_i=RegExp.prototype,Bi=function(e,t,n,r){var o=We(e),i=!je((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),a=i&&!je((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Ii]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t}));if(!i||!a||n){var s=pe(/./[o]),l=t(o,""[e],(function(e,t,n,r,o){var a=pe(e),l=t.exec;return l===Pi||l===_i.exec?i&&!o?{done:!0,value:s(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));Wt(String.prototype,e,l[0]),Wt(_i,o,l[1])}r&&mt(_i[o],"sham",!0)},$i=_r.charAt,Wi=function(e,t,n){return t+(n?$i(e,t).length:1)},Vi=Math.floor,zi=pe("".charAt),Ui=pe("".replace),Hi=pe("".slice),Ki=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,qi=/\$([$&'`]|\d{1,2})/g,Gi=function(e,t,n,r,o,i){var a=n+e.length,s=r.length,l=qi;return void 0!==o&&(o=me(o),l=Ki),Ui(i,l,(function(i,l){var u;switch(zi(l,0)){case"$":return"$";case"&":return e;case"`":return Hi(t,0,n);case"'":return Hi(t,a);case"<":u=o[Hi(l,1,-1)];break;default:var c=+l;if(0===c)return i;if(c>s){var f=Vi(c/10);return 0===f?i:f<=s?void 0===r[f-1]?zi(l,1):r[f-1]+zi(l,1):i}u=r[c-1]}return void 0===u?"":u}))},Ji=ie.TypeError,Yi=function(e,t){var n=e.exec;if(Oe(n)){var r=et(n,e,t);return null!==r&&Qe(r),r}if("RegExp"===Ut(e))return et(Pi,e,t);throw Ji("RegExp#exec called on incompatible receiver")},Xi=We("replace"),Qi=Math.max,Zi=Math.min,ea=pe([].concat),ta=pe([].push),na=pe("".indexOf),ra=pe("".slice),oa="$0"==="a".replace(/./,"$0"),ia=!!/./[Xi]&&""===/./[Xi]("a","$0");Bi("replace",(function(e,t,n){var r=ia?"$":"$0";return[function(e,n){var r=ve(this),o=null==e?void 0:lt(e,Xi);return o?et(o,e,r,n):et(t,Rr(r),e,n)},function(e,o){var i=Qe(this),a=Rr(e);if("string"==typeof o&&-1===na(o,r)&&-1===na(o,"$<")){var s=n(t,i,a,o);if(s.done)return s.value}var l=Oe(o);l||(o=Rr(o));var u=i.global;if(u){var c=i.unicode;i.lastIndex=0}for(var f=[];;){var d=Yi(i,a);if(null===d)break;if(ta(f,d),!u)break;""===Rr(d[0])&&(i.lastIndex=Wi(a,cn(i.lastIndex),c))}for(var h,p="",g=0,v=0;v<f.length;v++){for(var y=Rr((d=f[v])[0]),m=Qi(Zi(ln(d.index),a.length),0),b=[],w=1;w<d.length;w++)ta(b,void 0===(h=d[w])?h:String(h));var x=d.groups;if(l){var S=ea([y],b,m,a);void 0!==x&&ta(S,x);var k=Rr(Fi(o,void 0,S))}else k=Gi(y,a,m,b,x,o);m>=g&&(p+=ra(a,g,m)+k,g=m+y.length)}return p+ra(a,g)}]}),!!je((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!oa||ia);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var aa=function(e,t){return aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},aa(e,t)};function sa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}aa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var la=function(){return la=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},la.apply(this,arguments)};function ua(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ca(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function fa(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}var da=0,ha=function(){this.id=""+da++},pa=Ft.set,ga=Ft.getterFor("Array Iterator"),va=xo(Array,"Array",(function(e,t){pa(this,{type:"Array Iterator",target:Fn(e),index:0,kind:t})}),(function(){var e=ga(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");gr.Arguments=gr.Array,Uo("keys"),Uo("values"),Uo("entries");var ya=function(e,t,n){for(var r in t)Wt(e,r,t[r],n);return e},ma=ie.Array,ba=Math.max,wa=function(e,t,n){for(var r=fn(e),o=Wn(t,r),i=Wn(void 0===n?r:n,r),a=ma(ba(i-o,0)),s=0;o<i;o++,s++)br(a,s,e[o]);return a.length=s,a},xa=Jn.f,Sa="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ka={f:function(e){return Sa&&"Window"==Ut(e)?function(e){try{return xa(e)}catch(e){return wa(Sa)}}(e):xa(Fn(e))}},Ea=je((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),Oa=Object.isExtensible,Ca=je((function(){Oa(1)}))||Ea?function(e){return!!He(e)&&((!Ea||"ArrayBuffer"!=Ut(e))&&(!Oa||Oa(e)))}:Oa,Na=!je((function(){return Object.isExtensible(Object.preventExtensions({}))})),Ta=te((function(e){var t=vt.f,n=!1,r=Ee("meta"),o=0,i=function(e){t(e,r,{value:{objectID:"O"+o++,weakData:{}}})},a=e.exports={enable:function(){a.enable=function(){},n=!0;var e=Jn.f,t=pe([].splice),o={};o[r]=1,e(o).length&&(Jn.f=function(n){for(var o=e(n),i=0,a=o.length;i<a;i++)if(o[i]===r){t(o,i,1);break}return o},lr({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ka.f}))},fastKey:function(e,t){if(!He(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!we(e,r)){if(!Ca(e))return"F";if(!t)return"E";i(e)}return e[r].objectID},getWeakData:function(e,t){if(!we(e,r)){if(!Ca(e))return!0;if(!t)return!1;i(e)}return e[r].weakData},onFreeze:function(e){return Na&&n&&Ca(e)&&!we(e,r)&&i(e),e}};Tt[r]=!0})),Ma=ie.TypeError,La=function(e,t){this.stopped=e,this.result=t},Pa=La.prototype,Da=function(e,t,n){var r,o,i,a,s,l,u,c=n&&n.that,f=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),p=tn(t,c),g=function(e){return r&&hr(r,"normal",e),new La(!0,e)},v=function(e){return f?(Qe(e),h?p(e[0],e[1],g):p(e[0],e[1])):h?p(e,g):p(e)};if(d)r=e;else{if(!(o=xr(e)))throw Ma(it(e)+" is not iterable");if(mr(o)){for(i=0,a=fn(e);a>i;i++)if((s=v(e[i]))&&tt(Pa,s))return s;return new La(!1)}r=kr(e,o)}for(l=r.next;!(u=et(l,r)).done;){try{s=v(u.value)}catch(e){hr(r,"throw",e)}if("object"==typeof s&&s&&tt(Pa,s))return s}return new La(!1)},Ra=ie.TypeError,ja=function(e,t){if(tt(t,e))return e;throw Ra("Incorrect invocation")},Aa=function(e,t,n){var r,o;return po&&Oe(r=t.constructor)&&r!==n&&He(o=r.prototype)&&o!==n.prototype&&po(e,o),e},Fa=function(e,t,n){var r=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),i=r?"set":"add",a=ie[e],s=a&&a.prototype,l=a,u={},c=function(e){var t=pe(s[e]);Wt(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!He(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return o&&!He(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!He(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(ar(e,!Oe(a)||!(o||s.forEach&&!je((function(){(new a).entries().next()})))))l=n.getConstructor(t,e,r,i),Ta.enable();else if(ar(e,!0)){var f=new l,d=f[i](o?{}:-0,1)!=f,h=je((function(){f.has(1)})),p=Mr((function(e){new a(e)})),g=!o&&je((function(){for(var e=new a,t=5;t--;)e[i](t,t);return!e.has(-0)}));p||((l=t((function(e,t){ja(e,s);var n=Aa(new a,e,l);return null!=t&&Da(t,n[i],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=l),(h||g)&&(c("delete"),c("has"),r&&c("get")),(g||d)&&c(i),o&&s.clear&&delete s.clear}return u[e]=l,lr({global:!0,forced:l!=a},u),lo(l,e),o||n.setStrong(l,e,r),l},Ia=Ta.getWeakData,_a=Ft.set,Ba=Ft.getterFor,$a=Cn.find,Wa=Cn.findIndex,Va=pe([].splice),za=0,Ua=function(e){return e.frozen||(e.frozen=new Ha)},Ha=function(){this.entries=[]},Ka=function(e,t){return $a(e.entries,(function(e){return e[0]===t}))};Ha.prototype={get:function(e){var t=Ka(this,e);if(t)return t[1]},has:function(e){return!!Ka(this,e)},set:function(e,t){var n=Ka(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=Wa(this.entries,(function(t){return t[0]===e}));return~t&&Va(this.entries,t,1),!!~t}};var qa,Ga={getConstructor:function(e,t,n,r){var o=e((function(e,o){ja(e,i),_a(e,{type:t,id:za++,frozen:void 0}),null!=o&&Da(o,e[r],{that:e,AS_ENTRIES:n})})),i=o.prototype,a=Ba(t),s=function(e,t,n){var r=a(e),o=Ia(Qe(t),!0);return!0===o?Ua(r).set(t,n):o[r.id]=n,e};return ya(i,{delete:function(e){var t=a(this);if(!He(e))return!1;var n=Ia(e);return!0===n?Ua(t).delete(e):n&&we(n,t.id)&&delete n[t.id]},has:function(e){var t=a(this);if(!He(e))return!1;var n=Ia(e);return!0===n?Ua(t).has(e):n&&we(n,t.id)}}),ya(i,n?{get:function(e){var t=a(this);if(He(e)){var n=Ia(e);return!0===n?Ua(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),o}},Ja=Ft.enforce,Ya=!ie.ActiveXObject&&"ActiveXObject"in ie,Xa=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Qa=Fa("WeakMap",Xa,Ga);if(Ot&&Ya){qa=Ga.getConstructor(Xa,"WeakMap",!0),Ta.enable();var Za=Qa.prototype,es=pe(Za.delete),ts=pe(Za.has),ns=pe(Za.get),rs=pe(Za.set);ya(Za,{delete:function(e){if(He(e)&&!Ca(e)){var t=Ja(this);return t.frozen||(t.frozen=new qa),es(this,e)||t.frozen.delete(e)}return es(this,e)},has:function(e){if(He(e)&&!Ca(e)){var t=Ja(this);return t.frozen||(t.frozen=new qa),ts(this,e)||t.frozen.has(e)}return ts(this,e)},get:function(e){if(He(e)&&!Ca(e)){var t=Ja(this);return t.frozen||(t.frozen=new qa),ts(this,e)?ns(this,e):t.frozen.get(e)}return ns(this,e)},set:function(e,t){if(He(e)&&!Ca(e)){var n=Ja(this);n.frozen||(n.frozen=new qa),ts(this,e)?rs(this,e,t):n.frozen.set(e,t)}else rs(this,e,t);return this}})}var os=We("iterator"),is=We("toStringTag"),as=va.values,ss=function(e,t){if(e){if(e[os]!==as)try{mt(e,os,as)}catch(t){e[os]=as}if(e[is]||mt(e,is,t),Yt[t])for(var n in va)if(e[n]!==va[n])try{mt(e,n,va[n])}catch(t){e[n]=va[n]}}};for(var ls in Yt)ss(ie[ls]&&ie[ls].prototype,ls);ss(Zt,"DOMTokenList");var us=new WeakMap,cs=new WeakMap,fs=new WeakMap,ds=new WeakMap,hs=new WeakMap,ps=new WeakMap,gs=new WeakMap,vs=new WeakMap,ys=new WeakMap,ms=new WeakMap,bs=new WeakMap,ws=new WeakMap,xs=new WeakMap,Ss=new WeakMap,ks=new WeakMap,Es=new WeakMap,Os=new WeakMap,Cs=new WeakMap,Ns=new WeakMap,Ts=new WeakMap,Ms=new WeakMap,Ls=new WeakMap,Ps=new WeakMap,Ds=new WeakMap,Rs=new WeakMap,js=Cn.find,As=!0;"find"in[]&&Array(1).find((function(){As=!1})),lr({target:"Array",proto:!0,forced:As},{find:function(e){return js(this,e,arguments.length>1?arguments[1]:void 0)}}),Uo("find"),lr({global:!0},{globalThis:ie});const Fs=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"];d&&(f.fn.css=d),h&&(f.fn.append=h),p&&(f.fn.addClass=p),g&&(f.fn.removeClass=g),v&&(f.fn.hasClass=v),y&&(f.fn.on=y),m&&(f.fn.focus=m),b&&(f.fn.attr=b),w&&(f.fn.removeAttr=w),x&&(f.fn.hide=x),S&&(f.fn.show=S),k&&(f.fn.offset=k),E&&(f.fn.width=E),O&&(f.fn.height=O),C&&(f.fn.parent=C),N&&(f.fn.parents=N),T&&(f.fn.is=T),M&&(f.fn.dataset=M),L&&(f.fn.val=L),P&&(f.fn.text=P),D&&(f.fn.html=D),R&&(f.fn.children=R),j&&(f.fn.remove=j),A&&(f.fn.find=A),F&&(f.fn.each=F);var Is,_s=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||null},Bs=function(e){return $s(e)&&1===e.nodeType},$s=function(e){var t=_s(e);return!!t&&e instanceof t.Node},Ws=function(e){var t=e&&e.anchorNode&&_s(e.anchorNode);return!!t&&e instanceof t.Selection},Vs=function(e){return $s(e)&&3===e.nodeType},zs=function(e){var t,n,r;return null!==(t=window.document.getElementById(e))&&void 0!==t?t:(null===(r=null===(n=window.document.activeElement)||void 0===n?void 0:n.shadowRoot)||void 0===r?void 0:r.getElementById(e))||null},Us=function(e,t,n){for(var r,o=e.childNodes,i=o[t],a=t,s=!1,l=!1;($s(r=i)&&8===r.nodeType||Bs(i)&&0===i.childNodes.length||Bs(i)&&"false"===i.getAttribute("contenteditable"))&&(!s||!l);)a>=o.length?(s=!0,a=t-1,n="backward"):a<0?(l=!0,a=t+1,n="forward"):(i=o[a],t=a,a+="forward"===n?1:-1);return[i,t]},Hs=function(e,t,n){return ca(Us(e,t,n),1)[0]},Ks=function e(t){var n,r,o="";if(Vs(t)&&t.nodeValue)return t.nodeValue;if(Bs(t)){try{for(var i=ua(Array.from(t.childNodes)),a=i.next();!a.done;a=i.next()){o+=e(a.value)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}var s=getComputedStyle(t).getPropertyValue("display");"block"!==s&&"list"!==s&&"table-row"!==s&&"BR"!==t.tagName||(o+="\n")}return o};function qs(e,t){if(!(e instanceof HTMLElement&&"true"===e.dataset.slateVoid))for(var n=e.childNodes,r=n.length;r--;){var o=n[r],i=o.nodeType;3==i?t(o,e):1!=i&&9!=i&&11!=i||qs(o,t)}}function Gs(e){if(0===e.length)return"";var t=e[0];return t.nodeType!==Is.ELEMENT_NODE?"":t.tagName.toLowerCase()}!function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(Is||(Is={})),void 0!==globalThis.navigator&&void 0!==globalThis.window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&globalThis.window.MSStream;var Js="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),Ys="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);"undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent);var Xs="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Qs="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Zs="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),el="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent);"undefined"!=typeof navigator&&/.*QQBrowser/.test(navigator.userAgent);var tl=!Zs&&!Qs&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,nl={getWindow:function(e){var t=Ms.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},findKey:function(e,t){var n=Ts.get(t);return n||(n=new ha,Ts.set(t,n)),n},setNewKey:function(e){var t=new ha;Ts.set(e,t)},findPath:function(t,n){for(var r=[],o=n;;){var i=ks.get(o);if(null==i){if(e.isEditor(o))return r;break}var a=Ss.get(o);if(null==a)break;r.unshift(a),o=i}throw new Error("Unable to find the path for Slate node: "+JSON.stringify(n))},findDocumentOrShadowRoot:function(e){if(e.isDestroyed)return window.document;var t=nl.toDOMNode(e,e),n=t.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&null!=n.getSelection?n:t.ownerDocument},getParentNode:function(e,t){return ks.get(t)||null},getParentsNodes:function(e,t){for(var n=[],r=t;r!==e&&null!=r;){var o=nl.getParentNode(e,r);if(null==o)break;n.push(o),r=o}return n},getTopNode:function(e,t){var n=[nl.findPath(e,t)[0]];return r.get(e,n)},toDOMNode:function(t,n){var r;if(e.isEditor(n))r=Es.get(t);else{var o=nl.findKey(t,n);r=Cs.get(o)}if(!r)throw new Error("Cannot resolve a DOM node from Slate node: "+JSON.stringify(n));return r},hasDOMNode:function(e,t,n){void 0===n&&(n={});var r,o=n.editable,i=void 0!==o&&o,a=nl.toDOMNode(e,e);try{r=Bs(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&(r.closest("[data-slate-editor]")===a&&(!i||r.isContentEditable||!!r.getAttribute("data-slate-zero-width")))},toDOMRange:function(e,t){var n=t.anchor,r=t.focus,i=o.isBackward(t),a=nl.toDOMPoint(e,n),s=o.isCollapsed(t)?a:nl.toDOMPoint(e,r),l=nl.getWindow(e).document.createRange(),u=ca(i?s:a,2),c=u[0],f=u[1],d=ca(i?a:s,2),h=d[0],p=d[1],g=!!(Bs(c)?c:c.parentElement).getAttribute("data-slate-zero-width"),v=!!(Bs(h)?h:h.parentElement).getAttribute("data-slate-zero-width");return l.setStart(c,g?1:f),l.setEnd(h,v?1:p),l},toDOMPoint:function(t,n){var r,o,i,a=ca(e.node(t,n.path),1)[0],s=nl.toDOMNode(t,a);e.void(t,{at:n})&&(n={path:n.path,offset:0});var l=Array.from(s.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),u=0;try{for(var c=ua(l),f=c.next();!f.done;f=c.next()){var d=f.value,h=d.childNodes[0];if(null!=h&&null!=h.textContent){var p=h.textContent.length,g=d.getAttribute("data-slate-length"),v=u+(null==g?p:parseInt(g,10));if(n.offset<=v){i=[h,Math.min(p,Math.max(0,n.offset-u))];break}u=v}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: "+JSON.stringify(n));return i},toSlateNode:function(e,t){var n=Bs(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?Os.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: "+n);return r},findEventRange:function(t,n){"nativeEvent"in n&&(n=n.nativeEvent);var r=n.clientX,o=n.clientY,i=n.target;if(null==r||null==o)throw new Error("Cannot resolve a Slate range from a DOM event: "+n);var a,s=nl.toSlateNode(t,n.target),l=nl.findPath(t,s);if(e.isVoid(t,s)){var u=i.getBoundingClientRect(),c=t.isInline(s)?r-u.left<u.left+u.width-r:o-u.top<u.top+u.height-o,f=e.point(t,l,{edge:c?"start":"end"}),d=c?e.before(t,f):e.after(t,f);if(d)return e.range(t,d)}var h=this.getWindow(t).document;if(h.caretRangeFromPoint)a=h.caretRangeFromPoint(r,o);else{var p=h.caretPositionFromPoint(r,o);p&&((a=h.createRange()).setStart(p.offsetNode,p.offset),a.setEnd(p.offsetNode,p.offset))}if(!a)throw new Error("Cannot resolve a Slate range from a DOM event: "+n);return nl.toSlateRange(t,a,{exactMatch:!1,suppressThrow:!1})},toSlateRange:function(t,n,r){var i,a,s,l,u,c=r.exactMatch,f=r.suppressThrow;if((Ws(n)?n.anchorNode:n.startContainer)&&(Ws(n)?(i=n.anchorNode,a=n.anchorOffset,s=n.focusNode,l=n.focusOffset,u=el&&window.document.activeElement&&window.document.activeElement.shadowRoot?n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset:n.isCollapsed):(i=n.startContainer,a=n.startOffset,s=n.endContainer,l=n.endOffset,u=n.collapsed)),null==i||null==s||null==a||null==l)throw new Error("Cannot resolve a Slate range from DOM range: "+n);var d=nl.toSlatePoint(t,[i,a],{exactMatch:c,suppressThrow:f});if(!d)return null;var h=u?d:nl.toSlatePoint(t,[s,l],{exactMatch:c,suppressThrow:f});if(!h)return null;var p={anchor:d,focus:h};return o.isExpanded(p)&&o.isForward(p)&&Bs(s)&&e.void(t,{at:p.focus,mode:"highest"})&&(p=e.unhangRange(t,p,{voids:!0})),p},toSlatePoint:function(e,t,n){var r,o=n.exactMatch,i=n.suppressThrow,a=ca(o?t:function(e){var t,n=ca(e,2),r=n[0],o=n[1];if(Bs(r)&&r.childNodes.length){var i=o===r.childNodes.length,a=i?o-1:o;for(r=(t=ca(Us(r,a,i?"backward":"forward"),2))[0],i=(a=t[1])<o;Bs(r)&&r.childNodes.length;){var s=i?r.childNodes.length-1:0;r=Hs(r,s,i?"backward":"forward")}o=i&&null!=r.textContent?r.textContent.length:0}return[r,o]}(t),2),s=a[0],l=a[1],u=s.parentNode,f=null,d=0;if(u){var h=u.closest('[data-slate-void="true"]'),p=u.closest("[data-slate-leaf]"),g=null;if(p){f=p.closest('[data-slate-node="text"]');var v=nl.getWindow(e).document.createRange();v.setStart(f,0),v.setEnd(s,l);var y=v.cloneContents();fa(fa([],ca(c(y.querySelectorAll("[data-slate-zero-width]")))),ca(c(y.querySelectorAll("[contenteditable=false]")))).forEach((function(e){e.parentNode.removeChild(e)})),d=y.textContent.length,g=f}else h&&((p=h.querySelector("[data-slate-leaf]"))?(f=p.closest('[data-slate-node="text"]'),d=(g=p).textContent.length,g.querySelectorAll("[data-slate-zero-width]").forEach((function(e){d-=e.textContent.length}))):d=1);g&&d===g.textContent.length&&(u.hasAttribute("data-slate-zero-width")||Ys&&(null===(r=g.textContent)||void 0===r?void 0:r.endsWith("\n")))&&d--}if(!f){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: "+t)}var m=nl.toSlateNode(e,f);return{path:nl.findPath(e,m),offset:d}},hasRange:function(t,n){var r=n.anchor,o=n.focus;return e.hasPath(t,r.path)&&e.hasPath(t,o.path)},getNodeType:function(e){return i.isElement(e)?e.type:""},checkNodeType:function(e,t){return this.getNodeType(e)===t},getNodesStr:function(e){return e.map((function(e){return r.string(e)})).join("")},getSelectedElems:function(t){var n,r,o=[],a=e.nodes(t,{universal:!0});try{for(var s=ua(a),l=s.next();!l.done;l=s.next()){var u=ca(l.value,1)[0];i.isElement(u)&&o.push(u)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},getSelectedNodeByType:function(t,n){var r=this,o=ca(e.nodes(t,{match:function(e){return r.checkNodeType(e,n)},universal:!0}),1),i=o[0];return null==i?null:i[0]},getSelectedTextNode:function(t){var n=ca(e.nodes(t,{match:function(e){return a.isText(e)},universal:!0}),1),r=n[0];return null==r?null:r[0]},isNodeSelected:function(t,n){var r=ca(e.nodes(t,{match:function(e){return e===n},universal:!0}),1),o=r[0];return null!=o&&ca(o,1)[0]===n},isSelectionAtLineEnd:function(t,n){var r=t.selection;return!!r&&(e.isEnd(t,r.anchor,n)||e.isEnd(t,r.focus,n))},getTextarea:function(e){var t=us.get(e);if(null==t)throw new Error("Cannot find textarea instance by editor");return t},getToolbar:function(e){return ds.get(e)||null},getHoverbar:function(e){return ps.get(e)||null},normalizeContent:function(e){e.children.forEach((function(t,n){e.normalizeNode([t,[n]])}))},getLeftLengthOfMaxLength:function(e){var t=e.getConfig(),n=t.maxLength,r=t.onMaxLength;if("number"!=typeof n||n<=0)return 1/0;var o=n-e.getText().replace(/\r|\n|(\r\n)/g,"").length;return o<=0&&r&&r(e),o},cleanExposedTexNodeInSelectionBlock:function(t){var n,r,o,a,s=nl.getTextarea(t).$textArea,l=null==s?void 0:s[0].childNodes;if(l)try{for(var u=ua(Array.from(l)),c=u.next();!c.done;c=u.next()){var d=c.value;if(3!==d.nodeType)break;d.remove()}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}var h=e.nodes(t,{match:function(e){return!(!i.isElement(e)||t.isInline(e))},universal:!0});try{for(var p=ua(h),g=p.next();!g.done;g=p.next()){var v=g.value;if(null!=v){var y=v[0];qs(nl.toDOMNode(t,y),(function(e,t){var n=f(t);n.attr("data-slate-string")||n.attr("data-slate-zero-width")||t.removeChild(e)}))}}}catch(e){o={error:e}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}},rl=1,ol={};var il={};function al(e,t){var n=e.key,r=e.factory,o=e.config,i=la(la({},o),t||{});if(null!=il[n])throw new Error("Duplicated key '"+n+"' in menu items");il[n]=r,function(e,t){null!=t&&(ol[e]=t)}(n,i)}var sl=We("species"),ll=function(e){var t=Ne(e),n=vt.f;Ue&&t&&!t[sl]&&n(t,sl,{configurable:!0,get:function(){return this}})},ul=vt.f,cl=Ta.fastKey,fl=Ft.set,dl=Ft.getterFor,hl={getConstructor:function(e,t,n,r){var o=e((function(e,o){ja(e,i),fl(e,{type:t,index:Yr(null),first:void 0,last:void 0,size:0}),Ue||(e.size=0),null!=o&&Da(o,e[r],{that:e,AS_ENTRIES:n})})),i=o.prototype,a=dl(t),s=function(e,t,n){var r,o,i=a(e),s=l(e,t);return s?s.value=n:(i.last=s={index:o=cl(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=s),r&&(r.next=s),Ue?i.size++:e.size++,"F"!==o&&(i.index[o]=s)),e},l=function(e,t){var n,r=a(e),o=cl(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return ya(i,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Ue?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=l(t,e);if(r){var o=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=o),o&&(o.previous=i),n.first==r&&(n.first=o),n.last==r&&(n.last=i),Ue?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=tn(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!l(this,e)}}),ya(i,n?{get:function(e){var t=l(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Ue&&ul(i,"size",{get:function(){return a(this).size}}),o},setStrong:function(e,t,n){var r=t+" Iterator",o=dl(t),i=dl(r);xo(e,t,(function(e,t){fl(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),ll(t)}};Fa("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),hl);var pl=Cn.filter,gl=cr("filter");lr({target:"Array",proto:!0,forced:!gl},{filter:function(e){return pl(this,e,arguments.length>1?arguments[1]:void 0)}});var vl="\t\n\v\f\r                　\u2028\u2029\ufeff",yl=pe("".replace),ml="["+vl+"]",bl=RegExp("^"+ml+ml+"*"),wl=RegExp(ml+ml+"*$"),xl=function(e){return function(t){var n=Rr(ve(t));return 1&e&&(n=yl(n,bl,"")),2&e&&(n=yl(n,wl,"")),n}},Sl={start:xl(1),end:xl(2),trim:xl(3)},kl=$t.PROPER,El=Sl.trim;lr({target:"String",proto:!0,forced:function(e){return je((function(){return!!vl[e]()||"​᠎"!=="​᠎"[e]()||kl&&vl[e].name!==e}))}("trim")},{trim:function(){return El(this)}});var Ol=ie.TypeError,Cl=We("species"),Nl=function(e,t){var n,r=Qe(e).constructor;return void 0===r||null==(n=Qe(r)[Cl])?t:function(e){if(wn(e))return e;throw Ol(it(e)+" is not a constructor")}(n)},Tl=gi.UNSUPPORTED_Y,Ml=Math.min,Ll=[].push,Pl=pe(/./.exec),Dl=pe(Ll),Rl=pe("".slice);Bi("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=Rr(ve(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!qo(e))return et(t,r,e,o);for(var i,a,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,f=new RegExp(e.source,u+"g");(i=et(Pi,f,r))&&!((a=f.lastIndex)>c&&(Dl(l,Rl(r,c,i.index)),i.length>1&&i.index<r.length&&Fi(Ll,l,wa(i,1)),s=i[0].length,c=a,l.length>=o));)f.lastIndex===i.index&&f.lastIndex++;return c===r.length?!s&&Pl(f,"")||Dl(l,""):Dl(l,Rl(r,c)),l.length>o?wa(l,0,o):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:et(t,this,e,n)}:t,[function(t,n){var o=ve(this),i=null==t?void 0:lt(t,e);return i?et(i,t,o,n):et(r,Rr(o),t,n)},function(e,o){var i=Qe(this),a=Rr(e),s=n(r,i,a,o,r!==t);if(s.done)return s.value;var l=Nl(i,RegExp),u=i.unicode,c=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Tl?"g":"y"),f=new l(Tl?"^(?:"+i.source+")":i,c),d=void 0===o?4294967295:o>>>0;if(0===d)return[];if(0===a.length)return null===Yi(f,a)?[a]:[];for(var h=0,p=0,g=[];p<a.length;){f.lastIndex=Tl?0:p;var v,y=Yi(f,Tl?Rl(a,p):a);if(null===y||(v=Ml(cn(f.lastIndex+(Tl?p:0)),a.length))===h)p=Wi(a,p,u);else{if(Dl(g,Rl(a,h,p)),g.length===d)return g;for(var m=1;m<=y.length-1;m++)if(Dl(g,y[m]),g.length===d)return g;p=h=v}}return Dl(g,Rl(a,h)),g}]}),!!je((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Tl);var jl=[];function Al(e){jl.push(e)}var Fl={};function Il(e){var t=e.type,n=e.elemToHtml;Fl[t||""]=n}function _l(e,t,n){var r=n.isInline(e)?"span":"div";return"<"+r+">"+t+"</"+r+">"}function Bl(t,n){var r=t.type,o=void 0===r?"":r,i=t.children,a=void 0===i?[]:i,s=e.isVoid(n,t),l="";s||(l=a.map((function(e){return cc(e,n)})).join(""));var u=function(e){return Fl[e]||_l}(o),c=u(t,l,n);return s||jl.forEach((function(e){return c=e(t,c)})),c}var $l,Wl,Vl,zl,Ul=ie.Promise,Hl=pe([].slice),Kl=/(?:ipad|iphone|ipod).*applewebkit/i.test(Te),ql="process"==Ut(ie.process),Gl=ie.setImmediate,Jl=ie.clearImmediate,Yl=ie.process,Xl=ie.Dispatch,Ql=ie.Function,Zl=ie.MessageChannel,eu=ie.String,tu=0,nu={};try{$l=ie.location}catch(e){}var ru=function(e){if(we(nu,e)){var t=nu[e];delete nu[e],t()}},ou=function(e){return function(){ru(e)}},iu=function(e){ru(e.data)},au=function(e){ie.postMessage(eu(e),$l.protocol+"//"+$l.host)};Gl&&Jl||(Gl=function(e){var t=Hl(arguments,1);return nu[++tu]=function(){Fi(Oe(e)?e:Ql(e),void 0,t)},Wl(tu),tu},Jl=function(e){delete nu[e]},ql?Wl=function(e){Yl.nextTick(ou(e))}:Xl&&Xl.now?Wl=function(e){Xl.now(ou(e))}:Zl&&!Kl?(zl=(Vl=new Zl).port2,Vl.port1.onmessage=iu,Wl=tn(zl.postMessage,zl)):ie.addEventListener&&Oe(ie.postMessage)&&!ie.importScripts&&$l&&"file:"!==$l.protocol&&!je(au)?(Wl=au,ie.addEventListener("message",iu,!1)):Wl="onreadystatechange"in Ge("script")?function(e){Wr.appendChild(Ge("script")).onreadystatechange=function(){Wr.removeChild(this),ru(e)}}:function(e){setTimeout(ou(e),0)});var su,lu,uu,cu,fu,du,hu,pu,gu={set:Gl,clear:Jl},vu=/ipad|iphone|ipod/i.test(Te)&&void 0!==ie.Pebble,yu=/web0s(?!.*chrome)/i.test(Te),mu=_n.f,bu=gu.set,wu=ie.MutationObserver||ie.WebKitMutationObserver,xu=ie.document,Su=ie.process,ku=ie.Promise,Eu=mu(ie,"queueMicrotask"),Ou=Eu&&Eu.value;Ou||(su=function(){var e,t;for(ql&&(e=Su.domain)&&e.exit();lu;){t=lu.fn,lu=lu.next;try{t()}catch(e){throw lu?cu():uu=void 0,e}}uu=void 0,e&&e.enter()},Kl||ql||yu||!wu||!xu?!vu&&ku&&ku.resolve?((hu=ku.resolve(void 0)).constructor=ku,pu=tn(hu.then,hu),cu=function(){pu(su)}):ql?cu=function(){Su.nextTick(su)}:(bu=tn(bu,ie),cu=function(){bu(su)}):(fu=!0,du=xu.createTextNode(""),new wu(su).observe(du,{characterData:!0}),cu=function(){du.data=fu=!fu}));var Cu,Nu,Tu,Mu,Lu=Ou||function(e){var t={fn:e,next:void 0};uu&&(uu.next=t),lu||(lu=t,cu()),uu=t},Pu=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=st(t),this.reject=st(n)},Du={f:function(e){return new Pu(e)}},Ru=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},ju="object"==typeof window,Au=gu.set,Fu=We("species"),Iu="Promise",_u=Ft.getterFor(Iu),Bu=Ft.set,$u=Ft.getterFor(Iu),Wu=Ul&&Ul.prototype,Vu=Ul,zu=Wu,Uu=ie.TypeError,Hu=ie.document,Ku=ie.process,qu=Du.f,Gu=qu,Ju=!!(Hu&&Hu.createEvent&&ie.dispatchEvent),Yu=Oe(ie.PromiseRejectionEvent),Xu=!1,Qu=ar(Iu,(function(){var e=kt(Vu),t=e!==String(Vu);if(!t&&66===Re)return!0;if(Re>=51&&/native code/.test(e))return!1;var n=new Vu((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Fu]=r,!(Xu=n.then((function(){}))instanceof r)||!t&&ju&&!Yu})),Zu=Qu||!Mr((function(e){Vu.all(e).catch((function(){}))})),ec=function(e){var t;return!(!He(e)||!Oe(t=e.then))&&t},tc=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;Lu((function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var a,s,l,u=n[i++],c=o?u.ok:u.fail,f=u.resolve,d=u.reject,h=u.domain;try{c?(o||(2===e.rejection&&ic(e),e.rejection=1),!0===c?a=r:(h&&h.enter(),a=c(r),h&&(h.exit(),l=!0)),a===u.promise?d(Uu("Promise-chain cycle")):(s=ec(a))?et(s,a,f,d):f(a)):d(r)}catch(e){h&&!l&&h.exit(),d(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&rc(e)}))}},nc=function(e,t,n){var r,o;Ju?((r=Hu.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),ie.dispatchEvent(r)):r={promise:t,reason:n},!Yu&&(o=ie["on"+e])?o(r):"unhandledrejection"===e&&function(e,t){var n=ie.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},rc=function(e){et(Au,ie,(function(){var t,n=e.facade,r=e.value;if(oc(e)&&(t=Ru((function(){ql?Ku.emit("unhandledRejection",r,n):nc("unhandledrejection",n,r)})),e.rejection=ql||oc(e)?2:1,t.error))throw t.value}))},oc=function(e){return 1!==e.rejection&&!e.parent},ic=function(e){et(Au,ie,(function(){var t=e.facade;ql?Ku.emit("rejectionHandled",t):nc("rejectionhandled",t,e.value)}))},ac=function(e,t,n){return function(r){e(t,r,n)}},sc=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,tc(e,!0))},lc=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Uu("Promise can't be resolved itself");var r=ec(t);r?Lu((function(){var n={done:!1};try{et(r,t,ac(lc,n,e),ac(sc,n,e))}catch(t){sc(n,t,e)}})):(e.value=t,e.state=1,tc(e,!1))}catch(t){sc({done:!1},t,e)}}};if(Qu&&(zu=(Vu=function(e){ja(this,zu),st(e),et(Cu,this);var t=_u(this);try{e(ac(lc,t),ac(sc,t))}catch(e){sc(t,e)}}).prototype,(Cu=function(e){Bu(this,{type:Iu,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=ya(zu,{then:function(e,t){var n=$u(this),r=n.reactions,o=qu(Nl(this,Vu));return o.ok=!Oe(e)||e,o.fail=Oe(t)&&t,o.domain=ql?Ku.domain:void 0,n.parent=!0,r[r.length]=o,0!=n.state&&tc(n,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),Nu=function(){var e=new Cu,t=_u(e);this.promise=e,this.resolve=ac(lc,t),this.reject=ac(sc,t)},Du.f=qu=function(e){return e===Vu||e===Tu?new Nu(e):Gu(e)},Oe(Ul)&&Wu!==Object.prototype)){Mu=Wu.then,Xu||(Wt(Wu,"then",(function(e,t){var n=this;return new Vu((function(e,t){et(Mu,n,e,t)})).then(e,t)}),{unsafe:!0}),Wt(Wu,"catch",zu.catch,{unsafe:!0}));try{delete Wu.constructor}catch(e){}po&&po(Wu,zu)}function uc(e){Promise.resolve().then(e)}function cc(e,t){return i.isElement(e)?Bl(e,t):function(e,t){var n=e.text;if(null==n)throw new Error("Current node is not slate Text "+JSON.stringify(e));var r=n;r=function(e){return e.replace(/ /g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/®/g,"&reg;").replace(/©/g,"&copy;").replace(/™/g,"&trade;")}(r);var o=nl.getParentsNodes(t,e).some((function(e){return"pre"===nl.getNodeType(e)}));if(o||(r=r.replace(/\r\n|\r|\n/g,"<br>")),o&&(r=r.replace(/&nbsp;/g," ")),""===r){var i=nl.getParentNode(null,e);if(!i||0!==i.children.length)return r;r="<br>"}return jl.forEach((function(t){return r=t(e,r)})),r}(e,t)}function fc(e){return"w-e-element-"+e}lr({global:!0,wrap:!0,forced:Qu},{Promise:Vu}),lo(Vu,Iu,!1),ll(Iu),Tu=Ne(Iu),lr({target:Iu,stat:!0,forced:Qu},{reject:function(e){var t=qu(this);return et(t.reject,void 0,e),t.promise}}),lr({target:Iu,stat:!0,forced:Qu},{resolve:function(e){return function(e,t){if(Qe(e),He(t)&&t.constructor===e)return t;var n=Du.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),lr({target:Iu,stat:!0,forced:Zu},{all:function(e){var t=this,n=qu(t),r=n.resolve,o=n.reject,i=Ru((function(){var n=st(t.resolve),i=[],a=0,s=1;Da(e,(function(e){var l=a++,u=!1;s++,et(n,t,e).then((function(e){u||(u=!0,i[l]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=qu(t),r=n.reject,o=Ru((function(){var o=st(t.resolve);Da(e,(function(e){et(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var dc=function(e,t){var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},hc=function(e,t,n){var r=nl.toDOMRange(e,t).getBoundingClientRect(),o=nl.toDOMRange(e,n).getBoundingClientRect();return dc(r,o)&&dc(o,r)},pc=["span","b","strong","i","em","s","strike","u","font","sub","sup"],gc=[];function vc(e){gc.push(e)}var yc=[];function mc(e){yc.push(e)}var bc={};function wc(e){var t=e.selector,n=e.parseElemHtml;bc[t]=n}var xc=vt.f,Sc=Jn.f,kc=Ft.enforce,Ec=We("match"),Oc=ie.RegExp,Cc=Oc.prototype,Nc=ie.SyntaxError,Tc=pe(Ao),Mc=pe(Cc.exec),Lc=pe("".charAt),Pc=pe("".replace),Dc=pe("".indexOf),Rc=pe("".slice),jc=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Ac=/a/g,Fc=/a/g,Ic=new Oc(Ac)!==Ac,_c=gi.MISSED_STICKY,Bc=gi.UNSUPPORTED_Y,$c=Ue&&(!Ic||_c||yi||bi||je((function(){return Fc[Ec]=!1,Oc(Ac)!=Ac||Oc(Fc)==Fc||"/a/i"!=Oc(Ac,"i")})));if(ar("RegExp",$c)){for(var Wc=function(e,t){var n,r,o,i,a,s,l=tt(Cc,this),u=qo(e),c=void 0===t,f=[],d=e;if(!l&&u&&c&&e.constructor===Wc)return e;if((u||tt(Cc,e))&&(e=e.source,c&&(t="flags"in d?d.flags:Tc(d))),e=void 0===e?"":Rr(e),t=void 0===t?"":Rr(t),d=e,yi&&"dotAll"in Ac&&(r=!!t&&Dc(t,"s")>-1)&&(t=Pc(t,/s/g,"")),n=t,_c&&"sticky"in Ac&&(o=!!t&&Dc(t,"y")>-1)&&Bc&&(t=Pc(t,/y/g,"")),bi&&(i=function(e){for(var t,n=e.length,r=0,o="",i=[],a={},s=!1,l=!1,u=0,c="";r<=n;r++){if("\\"===(t=Lc(e,r)))t+=Lc(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:Mc(jc,Rc(e,r+1))&&(r+=2,l=!0),o+=t,u++;continue;case">"===t&&l:if(""===c||we(a,c))throw new Nc("Invalid capture group name");a[c]=!0,i[i.length]=[c,u],l=!1,c="";continue}l?c+=t:o+=t}return[o,i]}(e),e=i[0],f=i[1]),a=Aa(Oc(e,t),l?this:Cc,Wc),(r||o||f.length)&&(s=kc(a),r&&(s.dotAll=!0,s.raw=Wc(function(e){for(var t,n=e.length,r=0,o="",i=!1;r<=n;r++)"\\"!==(t=Lc(e,r))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),o+=t):o+="[\\s\\S]":o+=t+Lc(e,++r);return o}(e),n)),o&&(s.sticky=!0),f.length&&(s.groups=f)),e!==d)try{mt(a,"source",""===d?"(?:)":d)}catch(e){}return a},Vc=function(e){e in Wc||xc(Wc,e,{configurable:!0,get:function(){return Oc[e]},set:function(t){Oc[e]=t}})},zc=Sc(Oc),Uc=0;zc.length>Uc;)Vc(zc[Uc++]);Cc.constructor=Wc,Wc.prototype=Cc,Wt(ie,"RegExp",Wc)}ll("RegExp");var Hc=new RegExp(String.fromCharCode(160),"g");function Kc(e){return e.replace(Hc," ")}function qc(e,t){var n=e.length;if(n){var r=e[n-1];if(a.isText(r)){var o=Object.keys(r);if(1===o.length&&"text"===o[0])return r.text=r.text+t,!0}}return!1}function Gc(e,t,n){return{type:"paragraph",children:[{text:f(e).text().replace(/\s+/gm," ")}]}}function Jc(t,n){var r=function(e,t){var n=[];if(null!=e.attr("data-w-e-is-void"))return n;var r=e[0].childNodes;return 1===r.length&&"BR"===r[0].nodeName?(n.push({text:""}),n):(r.forEach((function(e){if(e.nodeType!==Is.ELEMENT_NODE)if(e.nodeType!==Is.TEXT_NODE);else{var r=e.textContent||"";if(""===r.trim()&&r.indexOf("\n")>=0)return;r&&(r=Kc(r),qc(n,r)||n.push({text:r}))}else{if("BR"===e.nodeName)return void(qc(n,"\n")||n.push({text:"\n"}));var o=f(e);n.push(Xc(o,t))}})),n)}(t,n),o=function(e){for(var t in bc)if(e[0].matches(t))return bc[t];return Gc}(t),i=o(t[0],r,n);return e.isVoid(n,i)||(0===r.length&&(i.children=[{text:t.text().replace(/\s+/gm," ")}]),yc.forEach((function(e){i=e(t[0],i)}))),i}function Yc(e,t){0===e.parents("pre").length&&(e[0].innerHTML=e[0].innerHTML.replace(/\s+/gm," ").replace(/<br>/g,"\n"));var n=e[0].textContent||"";n=function(e){return e.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&reg;/g,"®").replace(/&copy;/g,"©").replace(/&trade;/g,"™")}(n);var r={text:n=Kc(n)};return yc.forEach((function(t){r=t(e[0],r)})),r}function Xc(e,t){gc.forEach((function(t){var n=t.selector,r=t.preParseHtml;e[0].matches(n)&&(e=f(r(e[0])))}));var n=Gs(e);return"span"===n?e.attr("data-w-e-type")?Jc(e,t):Yc(e):"code"===n?"pre"===Gs(e.parent())?Jc(e,t):Yc(e):pc.includes(n)?Yc(e):Jc(e,t)}var Qc=new Set(["doctype","!doctype","meta","script","style","link","frame","iframe","title","svg"]),Zc=function(t){var l=t,u=l.onChange;l.insertText;var c=l.apply,d=l.deleteBackward;return l.apply=function(t){var r,o,i,a,s,u,f,d,h=[];if(!l.getConfig().readOnly){switch(t.type){case"insert_text":case"remove_text":case"set_node":try{for(var p=ua(e.levels(l,{at:t.path})),g=p.next();!g.done;g=p.next()){var v=ca(g.value,2),y=v[0],m=v[1],b=nl.findKey(l,y);h.push([m,b])}}catch(e){r={error:e}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":try{for(var w=ua(e.levels(l,{at:n.parent(t.path)})),x=w.next();!x.done;x=w.next()){var S=ca(x.value,2);y=S[0],m=S[1],b=nl.findKey(l,y);h.push([m,b])}}catch(e){i={error:e}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}break;case"move_node":try{for(var k=ua(e.levels(l,{at:n.common(n.parent(t.path),n.parent(t.newPath))})),E=k.next();!E.done;E=k.next()){var O=ca(E.value,2);y=O[0],m=O[1],b=nl.findKey(l,y);h.push([m,b])}}catch(e){s={error:e}}finally{try{E&&!E.done&&(u=k.return)&&u.call(k)}finally{if(s)throw s.error}}}c(t);try{for(var C=ua(h),N=C.next();!N.done;N=C.next()){var T=ca(N.value,2);m=T[0],b=T[1],y=ca(e.node(l,m),1)[0];Ts.set(y,b)}}catch(e){f={error:e}}finally{try{N&&!N.done&&(d=C.return)&&d.call(C)}finally{if(f)throw f.error}}}},l.deleteBackward=function(n){if("line"!==n)return d(n);if(t.selection&&o.isCollapsed(t.selection)){var r=e.above(t,{match:function(n){return e.isBlock(t,n)},at:t.selection});if(r){var i=ca(r,2)[1],a=e.range(t,i,t.selection.anchor),u=function(t,n){var r=e.range(t,o.end(n)),i=Array.from(e.positions(t,{at:n})),a=0,s=i.length,l=Math.floor(s/2);if(hc(t,e.range(t,i[a]),r))return e.range(t,i[a],r);if(i.length<2)return e.range(t,i[i.length-1],r);for(;l!==i.length&&l!==a;)hc(t,e.range(t,i[l]),r)?s=l:a=l,l=Math.floor((a+s)/2);return e.range(t,i[s],r)}(l,a);o.isCollapsed(u)||s.delete(t,{at:u})}}},l.onChange=function(){var e=l.selection;null!=e&&Ps.set(l,e),l.emit("change"),u()},l.handleTab=function(){l.insertText("    ")},l.getHtml=function(){var e=l.children;return(void 0===e?[]:e).map((function(e){return cc(e,l)})).join("")},l.getText=function(){var e=l.children;return(void 0===e?[]:e).map((function(e){return r.string(e)})).join("\n")},l.getSelectionText=function(){var n=l.selection;return null==n?"":e.string(t,n)},l.getElemsByType=function(t,n){var r,o;void 0===n&&(n=!1);var a=[],s=e.nodes(l,{at:[],universal:!0});try{for(var u=ua(s),c=u.next();!c.done;c=u.next()){var f=ca(c.value,1)[0];if(i.isElement(f))if(n?f.type.indexOf(t)>=0:f.type===t){var d=fc(nl.findKey(l,f).id);a.push(la(la({},f),{id:d}))}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return a},l.getElemsByTypePrefix=function(e){return l.getElemsByType(e,!0)},l.isEmpty=function(){var e=l.children,t=void 0===e?[]:e;if(t.length>1)return!1;var n=t[0];if(null==n)return!0;if(i.isElement(n)&&"paragraph"===n.type){var r=n.children,o=void 0===r?[]:r;if(o.length>1)return!1;var s=o[0];if(null==s)return!0;if(a.isText(s)&&""===s.text)return!0}return!1},l.clear=function(){s.removeNodes(l,{at:{anchor:e.start(l,[]),focus:e.end(l,[])},mode:"highest"}),0===l.children.length&&s.insertNodes(l,[{type:"paragraph",children:[{text:""}]}])},l.getParentNode=function(e){return nl.getParentNode(l,e)},l.dangerouslyInsertHtml=function(e){if(void 0===e&&(e=""),e){var t=f(e);if(0!==(t=t.filter((function(e){if(e.nodeType!==Is.ELEMENT_NODE)return!1;var t=Gs(f(e));return!Qc.has(t)}))).length){var n=f('<div hidden="true"></div>');n.append(t),f("body").append(n);var r=[];t.forEach((function(e){var t=!1;if(pc.includes(e.tagName.toLowerCase()))t=!0;else for(var n in bc)if(e.matches(n)){t=!0;break}if(t){var o=f(e);r.push(Xc(o,l))}else{var i=Ks(e).trim();if(i)i.split(/\r\n|\r|\n/).forEach((function(e,t){e.trim()&&r.push({type:"paragraph",children:[{text:e}]})}))}})),r.length&&l.insertFragment(r),n.remove()}}},l},ef=function(e){return null!=e},tf={object:!0,function:!0,undefined:!0},nf=function(e){if(!function(e){return!!ef(e)&&hasOwnProperty.call(tf,typeof e)}(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}},rf=/^\s*class[\s{/}]/,of=Function.prototype.toString,af=function(e){return!!function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!nf(e)}(e)&&!rf.test(of.call(e))},sf=function(e){return null!=e},lf=Object.keys,uf=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}()?Object.keys:function(e){return lf(sf(e)?Object(e):e)},cf=function(e){if(!sf(e))throw new TypeError("Cannot use null or undefined");return e},ff=Math.max,df=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}()?Object.assign:function(e,t){var n,r,o,i=ff(arguments.length,2);for(e=Object(cf(e)),o=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},r=1;r<i;++r)uf(t=arguments[r]).forEach(o);if(void 0!==n)throw n;return e},hf=Array.prototype.forEach,pf=Object.create,gf=function(e,t){var n;for(n in e)t[n]=e[n]},vf=function(e){var t=pf(null);return hf.call(arguments,(function(e){sf(e)&&gf(Object(e),t)})),t},yf="razdwatrzy",mf=String.prototype.indexOf,bf="function"==typeof yf.contains&&!0===yf.contains("dwa")&&!1===yf.contains("foo")?String.prototype.contains:function(e){return mf.call(this,e,arguments[1])>-1},wf=te((function(e){var t=e.exports=function(e,t){var n,r,o,i,a;return arguments.length<2||"string"!=typeof e?(i=t,t=e,e=null):i=arguments[2],ef(e)?(n=bf.call(e,"c"),r=bf.call(e,"e"),o=bf.call(e,"w")):(n=o=!0,r=!1),a={value:t,configurable:n,enumerable:r,writable:o},i?df(vf(i),a):a};t.gs=function(e,t,n){var r,o,i,a;return"string"!=typeof e?(i=n,n=t,t=e,e=null):i=arguments[3],ef(t)?af(t)?ef(n)?af(n)||(i=n,n=void 0):n=void 0:(i=t,t=n=void 0):t=void 0,ef(e)?(r=bf.call(e,"c"),o=bf.call(e,"e")):(r=!0,o=!1),a={get:t,set:n,configurable:r,enumerable:o},i?df(vf(i),a):a}})),xf=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},Sf=te((function(e,t){var n,r,o,i,a,s,l,u=Function.prototype.apply,c=Function.prototype.call,f=Object.create,d=Object.defineProperty,h=Object.defineProperties,p=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};n=function(e,t){var n;return xf(t),p.call(this,"__ee__")?n=this.__ee__:(n=g.value=f(null),d(this,"__ee__",g),g.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},r=function(e,t){var r,i;return xf(t),i=this,n.call(this,e,r=function(){o.call(i,e,r),u.call(t,this,arguments)}),r.__eeOnceListener__=t,this},o=function(e,t){var n,r,o,i;if(xf(t),!p.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(r=n[e]))for(i=0;o=r[i];++i)o!==t&&o.__eeOnceListener__!==t||(2===r.length?n[e]=r[i?0:1]:r.splice(i,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},i=function(e){var t,n,r,o,i;if(p.call(this,"__ee__")&&(o=this.__ee__[e]))if("object"==typeof o){for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];for(o=o.slice(),t=0;r=o[t];++t)u.call(r,this,i)}else switch(arguments.length){case 1:c.call(o,this);break;case 2:c.call(o,this,arguments[1]);break;case 3:c.call(o,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];u.call(o,this,i)}},a={on:n,once:r,off:o,emit:i},s={on:wf(n),once:wf(r),off:wf(o),emit:wf(i)},l=h({},s),e.exports=t=function(e){return null==e?f(l):h(Object(e),s)},t.methods=a}));function kf(e){var t=Ds.get(e);return null==t&&(t=Sf(),Ds.set(e,t)),t}var Ef=new WeakMap;function Of(e,t){var n=Ef.get(e);null==n&&(n=new Set,Ef.set(e,n)),n.add(t)}function Cf(e){return Ef.get(e)||new Set}function Nf(e){Ef.set(e,new Set)}function Tf(e){var t=nl.getTextarea(e).$textAreaContainer,n=t.width(),r=t.height(),o=t.offset();return{top:o.top,left:o.left,width:n,height:r}}function Mf(e){var t={top:"0",left:"0"},n=e.selection;if(null==n)return t;var r=Tf(e);if(null==r)return t;var o=r.top,i=r.left,a=r.width,s=r.height,l=nl.toDOMRange(e,n).getClientRects()[0];if(null==l)return t;l.width;var u=l.height,c={},f=l.top-o,d=l.left-i;if(d>a/2){var h=a-d;c.right=h+5+"px"}else c.left=d+5+"px";if(f>s/2){var p=s-f;c.bottom=p+5+"px"}else{var g=f+u;g<0&&(g=0),c.top=g+5+"px"}return c}function Lf(e,t,n){void 0===n&&(n="modal");var r={top:"0",left:"0"};if(null==e.selection)return r;var o=i.isElement(t)&&e.isVoid(t),a=Ns.get(t);if(null==a)return r;var s=a.getBoundingClientRect(),l=s.top,u=s.left,c=s.height,f=s.width;if(o){var d=function(e){var t=[];t.push(e);for(var n=0;t.length>0;){var r=t.pop();if(null==r)break;if(++n>1e4)break;var o=r.nodeName;if(1===r.nodeType){var i=o.toLowerCase();if(Fs.includes(i)||"iframe"===i||"video"===i)return r;var a=r.children||[],s=a.length;if(s)for(var l=s-1;l>=0;l--)t.push(a[l])}}return null}(a);if(null!=d){var h=d.getBoundingClientRect();l=h.top,c=h.height}}var p=Tf(e);if(null==p)return r;var g=p.top,v=p.left,y=p.width,m=p.height,b={},w=l-g,x=u-v;if("bar"===n)return b.left=x+"px",w>40?b.bottom=m-w+5+"px":b.top=w+c+5+"px",b;if("modal"===n){var S;if(o?x>(y-f)/2?b.right=y-x+5+"px":b.left=x+f+5+"px":b.left=x+"px",o)(S=w)<0&&(S=0),b.top=S+"px";else if(w>(m-c)/2)b.bottom=m-w+5+"px";else(S=w+c)<0&&(S=0),b.top=S+5+"px";return b}throw new Error("type '"+n+"' is invalid")}function Pf(e,t){uc((function(){var n=Tf(e);if(null!=n){var r,o=n.top,i=n.left,a=n.width,s=n.height,l=t.offset(),u=l.top,c=l.left,f=t.width(),d=t.height(),h=u-o,p=c-i,g=t.attr("style");if(g.indexOf("top")>=0)if((r=h+d-s)>0){var v=t.css("top"),y=parseInt(v.toString())-r;y<0&&(y=0),t.css("top",y+"px")}if(g.indexOf("bottom")>=0&&u<0){var m=t.css("bottom"),b=parseInt(m.toString())-Math.abs(u);t.css("bottom",b+"px")}if(g.indexOf("left")>=0)if((r=p+f-a)>0){var w=t.css("left"),x=parseInt(w.toString())-r;x<0&&(x=0),t.css("left",x+"px")}if(g.indexOf("right")>=0&&c<0){var S=t.css("right"),k=parseInt(S.toString())-Math.abs(c);t.css("right",k+"px")}}}))}var Df=cr("slice"),Rf=We("species"),jf=ie.Array,Af=Math.max;lr({target:"Array",proto:!0,forced:!Df},{slice:function(e,t){var n,r,o,i=Fn(this),a=fn(i),s=Wn(e,a),l=Wn(void 0===t?a:t,a);if(dn(i)&&(n=i.constructor,(wn(n)&&(n===jf||dn(n.prototype))||He(n)&&null===(n=n[Rf]))&&(n=void 0),n===jf||void 0===n))return Hl(i,s,l);for(r=new(void 0===n?jf:n)(Af(l-s,0)),o=0;s<l;s++,o++)s in i&&br(r,o,i[s]);return r.length=o,r}});var Ff=_n.f,If=pe("".startsWith),_f=pe("".slice),Bf=Math.min,$f=Xo("startsWith"),Wf=!$f&&!!function(){var e=Ff(String.prototype,"startsWith");return e&&!e.writable}();lr({target:"String",proto:!0,forced:!Wf&&!$f},{startsWith:function(e){var t=Rr(ve(this));Jo(e);var n=cn(Bf(arguments.length>1?arguments[1]:void 0,t.length)),r=Rr(e);return If?If(t,r,n):_f(t,n,n+r.length)===r}});var Vf=Object.assign,zf=Object.defineProperty,Uf=pe([].concat),Hf=!Vf||je((function(){if(Ue&&1!==Vf({b:1},Vf(zf({},"a",{enumerable:!0,get:function(){zf(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=Vf({},e)[n]||Br(Vf({},t)).join("")!=r}))?function(e,t){for(var n=me(e),r=arguments.length,o=1,i=Yn.f,a=An.f;r>o;)for(var s,l=on(arguments[o++]),u=i?Uf(Br(l),i(l)):Br(l),c=u.length,f=0;c>f;)s=u[f++],Ue&&!et(a,l,s)||(n[s]=l[s]);return n}:Vf;lr({target:"Object",stat:!0,forced:Object.assign!==Hf},{assign:Hf});var Kf=["props","attrs","style","dataset","on","hook"];function qf(e){var t=e.data,n=void 0===t?{}:t,r=e.children,o=void 0===r?[]:r;Object.keys(n).forEach((function(t){var r,o,i=n[t];if("key"!==t){if(!Kf.includes(t)){if(t.startsWith("data-")){var a=t.slice(5);return a=q(a),function(e,t){null==e.data&&(e.data={});var n=e.data;null==n.dataset&&(n.dataset={});Object.assign(n.dataset,t)}(e,((r={})[a]=i,r)),void delete n[t]}!function(e,t){null==e.data&&(e.data={});var n=e.data;null==n.props&&(n.props={});Object.assign(n.props,t)}(e,(o={},o[t]=i,o)),delete n[t]}}else e.key=i})),o.length>0&&o.forEach((function(e){"string"!=typeof e&&qf(e)}))}var Gf=[];function Jf(e){Gf.push(e)}var Yf={};function Xf(e){var t=e.type,n=e.renderElem;Yf[t||""]=n}function Qf(e,t,n){var r=n.isInline(e)?"span":"div";return H(r,null,t)}function Zf(t,n){var o,i=nl.findKey(n,t),a=n.isInline(t),s=e.isVoid(n,t),l=fc(i.id),u={id:l,key:i.id,"data-slate-node":"element","data-slate-inline":a},c=t.type,f=t.children,d=void 0===f?[]:f,h=function(e){return Yf[e]||Qf}(c);o=s?null:d.map((function(e,r){return rd(e,r,t,n)}));var p=h(t,o,n);if(s){u["data-slate-void"]=!0;var g=a?"span":"div",v=ca(r.texts(t),1),y=ca(v[0],1)[0],m=rd(y,0,t,n),b=H(g,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},m);p=H(g,{style:{position:"relative"}},p,b),Ss.set(y,0),ks.set(y,t)}return null==p.data&&(p.data={}),Object.assign(p.data,u),s||a||(p=function(e,t){var n=t;return Gf.forEach((function(r){n=r(e,t)})),n}(t,p)),uc((function(){var e=zs(l);null!=e&&(Cs.set(i,e),Ns.set(t,e),Os.set(e,t))})),p}function ed(e,t){return void 0===t&&(t=!1),H("span",{"data-slate-string":!0},t?e+"\n":e)}function td(e,t){return void 0===e&&(e=0),void 0===t&&(t=!1),H("span",{"data-slate-zero-width":t?"n":"z","data-slate-length":e},"\ufeff",t?H("br",null):null)}function nd(t,o,i){if(null==t.text)throw new Error("Current node is not slate Text "+JSON.stringify(t));var s=nl.findKey(i,t),l=i.getConfig().decorate;if(null==l)throw new Error("Can not get config.decorate");var u=nl.findPath(i,t),c=l([t,u]),f=a.decorations(t,c),d=f.map((function(a,s){var l=function(t,o,i,a,s){void 0===o&&(o=!1);var l=t.text,u=nl.findPath(s,i),c=n.parent(u);if(e.isEditor(a))throw new Error("Text node "+JSON.stringify(i)+" parent is Editor");return s.isVoid(a)?td(r.string(a).length):""!==l||a.children[a.children.length-1]!==i||s.isInline(a)||""!==e.string(s,c)?""===l?td():o&&"\n"===l.slice(-1)?ed(l,!0):ed(l):td(0,!0)}(a,s===f.length-1,t,o,i);return l=function(e,t){var n=t;return Gf.forEach((function(t){n=t(e,n)})),n}(a,l),H("span",{"data-slate-leaf":!0},l)})),h=function(e){return"w-e-text-"+e}(s.id),p=H("span",{"data-slate-node":"text",id:h,key:s.id},d);return uc((function(){var e=zs(h);null!=e&&(Cs.set(s,e),Ns.set(t,e),Os.set(e,t))})),p}function rd(e,t,n,r){return Ss.set(e,t),ks.set(e,n),i.isElement(e)?Zf(e,r):nd(e,n,r)}function od(e,t){var n,r=e.$scroll,o=function(e){return"w-e-textarea-"+e}(e.id),i=t.getConfig(),a=i.readOnly,s=i.autoFocus,l=function(e,t){return void 0===t&&(t=!1),K("div#"+e,{props:{contentEditable:!t}})}(o,a),u=t.children||[];l.children=u.map((function(e,n){var r=rd(e,n,t,t);return qf(r),r}));var c=bs.get(e);if(null==c&&(c=!0),c){var d=function(e,t){return f('<div\n        id="'+e+'"\n        data-slate-editor\n        data-slate-node="value"\n        suppressContentEditableWarning\n        role="textarea"\n        spellCheck="true"\n        autoCorrect="true"\n        autoCapitalize="true"\n    ></div>')}(o);r.append(d),e.$textArea=d,n=d[0],(p=B([$,W,V,z,U]))(n,l),bs.set(e,!1),ws.set(e,p)}else{var h=xs.get(e),p=ws.get(e);if(null==h||null==p)return;n=h.elm,p(h,l)}if(null!=n||null!=(n=zs(o))){if((c?s:t.isFocused())&&n.focus({preventScroll:!0}),c){var g=_s(n);g&&Ms.set(t,g)}Es.set(t,n),Ns.set(t,n),Os.set(n,t),xs.set(e,l)}}function id(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function ad(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function sd(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return ad(n.overflowY,t)||ad(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function ld(e,t,n,r,o,i,a,s){return i<e&&a>t||i>e&&a<t?0:i<=e&&s<=n||a>=t&&s>=n?i-e-r:a>t&&s<n||i<e&&s>n?a-t+o:0}function ud(e,t){var n=window,r=t.scrollMode,o=t.block,i=t.inline,a=t.boundary,s=t.skipOverflowHiddenElements,l="function"==typeof a?a:function(e){return e!==a};if(!id(e))throw new TypeError("Invalid target");for(var u=document.scrollingElement||document.documentElement,c=[],f=e;id(f)&&l(f);){if((f=f.parentElement)===u){c.push(f);break}null!=f&&f===document.body&&sd(f)&&!sd(document.documentElement)||null!=f&&sd(f,s)&&c.push(f)}for(var d=n.visualViewport?n.visualViewport.width:innerWidth,h=n.visualViewport?n.visualViewport.height:innerHeight,p=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,v=e.getBoundingClientRect(),y=v.height,m=v.width,b=v.top,w=v.right,x=v.bottom,S=v.left,k="start"===o||"nearest"===o?b:"end"===o?x:b+y/2,E="center"===i?S+m/2:"end"===i?w:S,O=[],C=0;C<c.length;C++){var N=c[C],T=N.getBoundingClientRect(),M=T.height,L=T.width,P=T.top,D=T.right,R=T.bottom,j=T.left;if("if-needed"===r&&b>=0&&S>=0&&x<=h&&w<=d&&b>=P&&x<=R&&S>=j&&w<=D)return O;var A=getComputedStyle(N),F=parseInt(A.borderLeftWidth,10),I=parseInt(A.borderTopWidth,10),_=parseInt(A.borderRightWidth,10),B=parseInt(A.borderBottomWidth,10),$=0,W=0,V="offsetWidth"in N?N.offsetWidth-N.clientWidth-F-_:0,z="offsetHeight"in N?N.offsetHeight-N.clientHeight-I-B:0;if(u===N)$="start"===o?k:"end"===o?k-h:"nearest"===o?ld(g,g+h,h,I,B,g+k,g+k+y,y):k-h/2,W="start"===i?E:"center"===i?E-d/2:"end"===i?E-d:ld(p,p+d,d,F,_,p+E,p+E+m,m),$=Math.max(0,$+g),W=Math.max(0,W+p);else{$="start"===o?k-P-I:"end"===o?k-R+B+z:"nearest"===o?ld(P,R,M,I,B+z,k,k+y,y):k-(P+M/2)+z/2,W="start"===i?E-j-F:"center"===i?E-(j+L/2)+V/2:"end"===i?E-D+_+V:ld(j,D,L,F,_+V,E,E+m,m);var U=N.scrollLeft,H=N.scrollTop;k+=H-($=Math.max(0,Math.min(H+$,N.scrollHeight-M+z))),E+=U-(W=Math.max(0,Math.min(U+W,N.scrollWidth-L+V)))}O.push({el:N,top:$,left:W})}return O}function cd(e){return e===Object(e)&&0!==Object.keys(e).length}function fd(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(cd(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:ud(e,t));if(!n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:cd(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,o=e.top,i=e.left;r.scroll&&n?r.scroll({top:o,left:i,behavior:t}):(r.scrollTop=o,r.scrollLeft=i)}))}(ud(e,r),r.behavior)}}function dd(e,t){return $s(t)&&nl.hasDOMNode(e,t,{editable:!0})}function hd(t,n){if(t.getConfig().readOnly)return!1;var r=pd(t,n)&&nl.toSlateNode(t,n);return e.isVoid(t,r)}function pd(e,t){return $s(t)&&nl.hasDOMNode(e,t)}var gd=new WeakMap,vd=new WeakMap;var yd={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",tab:"tab",selectAll:"mod+a"},md={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},bd={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},wd=function(e){var t=yd[e],n=md[e],r=bd[e],o=t&&G(t),i=n&&G(n),a=r&&G(r);return function(e){return!(!o||!o(e))||(!!(Js&&i&&i(e))||!(Js||!a||!a(e)))}},xd={isBold:wd("bold"),isCompose:wd("compose"),isMoveBackward:wd("moveBackward"),isMoveForward:wd("moveForward"),isDeleteBackward:wd("deleteBackward"),isDeleteForward:wd("deleteForward"),isDeleteLineBackward:wd("deleteLineBackward"),isDeleteLineForward:wd("deleteLineForward"),isDeleteWordBackward:wd("deleteWordBackward"),isDeleteWordForward:wd("deleteWordForward"),isExtendBackward:wd("extendBackward"),isExtendForward:wd("extendForward"),isExtendLineBackward:wd("extendLineBackward"),isExtendLineForward:wd("extendLineForward"),isItalic:wd("italic"),isMoveLineBackward:wd("moveLineBackward"),isMoveLineForward:wd("moveLineForward"),isMoveWordBackward:wd("moveWordBackward"),isMoveWordForward:wd("moveWordForward"),isRedo:wd("redo"),isSplitBlock:wd("splitBlock"),isTransposeCharacter:wd("transposeCharacter"),isUndo:wd("undo"),isTab:wd("tab"),isSelectAll:wd("selectAll")};function Sd(e){e.preventDefault()}var kd={beforeinput:function(t,n,r){var i=t,a=r.getConfig().readOnly;if(tl&&!a&&dd(r,i.target)){var l=r.selection,u=i.inputType,c=i.dataTransfer||i.data||void 0;if("insertCompositionText"!==u&&"deleteCompositionText"!==u){if(i.preventDefault(),!u.startsWith("delete")||u.startsWith("deleteBy")){var f=ca(i.getTargetRanges(),1)[0];if(f){var d=nl.toSlateRange(r,f,{exactMatch:!1,suppressThrow:!1});l&&o.equals(l,d)||s.select(r,d)}}if(l&&o.isExpanded(l)&&u.startsWith("delete")){var h=u.endsWith("Backward")?"backward":"forward";e.deleteFragment(r,{direction:h})}else switch(u){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":e.deleteFragment(r);break;case"deleteContent":case"deleteContentForward":e.deleteForward(r);break;case"deleteContentBackward":e.deleteBackward(r);break;case"deleteEntireSoftLine":e.deleteBackward(r,{unit:"line"}),e.deleteForward(r,{unit:"line"});break;case"deleteHardLineBackward":e.deleteBackward(r,{unit:"block"});break;case"deleteSoftLineBackward":e.deleteBackward(r,{unit:"line"});break;case"deleteHardLineForward":e.deleteForward(r,{unit:"block"});break;case"deleteSoftLineForward":e.deleteForward(r,{unit:"line"});break;case"deleteWordBackward":e.deleteBackward(r,{unit:"word"});break;case"deleteWordForward":e.deleteForward(r,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":e.insertBreak(r);break;case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if("insertFromPaste"===u&&!Rs.get(r))break;c instanceof DataTransfer?r.insertData(c):"string"==typeof c&&e.insertText(r,c)}}}},blur:function(e,t,n){var r=e,o=t.isUpdatingSelection,a=t.latestElement;if(!n.getConfig().readOnly&&!o&&dd(n,r.target)){var s=nl.findDocumentOrShadowRoot(n);if(a!==s.activeElement){var l=r.relatedTarget;if(!(l===nl.toDOMNode(n,n)||Bs(l)&&l.hasAttribute("data-slate-spacer"))){if(null!=l&&$s(l)&&nl.hasDOMNode(n,l)){var u=nl.toSlateNode(n,l);if(i.isElement(u)&&!n.isVoid(u))return}if(Xs){var c=s.getSelection();null==c||c.removeAllRanges()}Ls.delete(n)}}}},focus:function(e,t,n){var r=nl.toDOMNode(n,n),o=nl.findDocumentOrShadowRoot(n);t.latestElement=o.activeElement,Ys&&e.target!==r?r.focus():Ls.set(n,!0)},click:function(t,o,i){if(!i.getConfig().readOnly&&pd(i,t.target)&&$s(t.target)){var a=nl.toSlateNode(i,t.target),l=nl.findPath(i,a);if(e.hasPath(i,l))if(r.get(i,l)===a){var u=e.start(i,l),c=e.end(i,l),f=e.void(i,{at:u}),d=e.void(i,{at:c});if(f&&d&&n.equals(f[1],d[1])){var h=e.range(i,u);s.select(i,h)}}}},compositionstart:function(t,n,r){if(dd(r,t.target)){var i=r.selection;if(i&&o.isExpanded(i)&&e.deleteFragment(r),i&&o.isCollapsed(i)){var a=nl.toDOMRange(r,i).startContainer,s=a.textContent||"";gd.set(r,s),vd.set(r,a)}n.isComposing=!0,function(e,t){var n;t.getConfig().placeholder&&t.isEmpty()&&e.showPlaceholder&&(null===(n=e.$placeholder)||void 0===n||n.hide(),e.showPlaceholder=!1)}(n,r)}},compositionend:function(t,n,r){var a=t;if(dd(r,a.target)){n.isComposing=!1;var s=r.selection;if(null!=s){(el||Ys)&&nl.cleanExposedTexNodeInSelectionBlock(r);for(var l=o.isBackward(s)?s.focus:s.anchor,u=ca(e.node(r,[l.path[0]]),1)[0],c=0;c<l.path.length;c++){var f=ca(e.node(r,l.path.slice(0,c+1)),1)[0];if(i.isElement(f)&&((Xs||Ys)&&"link"===f.type||"code"===f.type)){nl.setNewKey(u);break}}var d=a.data;if(d){if(r.getConfig().maxLength){var h=nl.getLeftLengthOfMaxLength(r);if(h<d.length)nl.toDOMRange(r,s).startContainer.textContent=gd.get(r)||"",h>0&&e.insertText(r,d.slice(0,h)),n.changeViewState();else e.insertText(r,d)}else e.insertText(r,d);Xs||setTimeout((function(){var e=r.selection;if(null!=e){var t=vd.get(r);if(null!=t)nl.toDOMRange(r,e).startContainer!==t&&(t.textContent=gd.get(r)||"")}}))}}}},compositionupdate:function(e,t,n){dd(n,e.target)&&(t.isComposing=!0)},keydown:function(t,n,a){var l=t,u=a.selection;if(!a.getConfig().readOnly&&!n.isComposing&&dd(a,l.target)){if(function(e,t){var n=ds.get(e),r=n&&n.getMenus(),o=ps.get(e),i=o&&o.getMenus(),a=la(la({},r),i);for(var s in a){var l=a[s],u=l.hotkey;if(u&&J(u,t)&&!l.isDisabled(e)){var c=l.getValue(e);l.exec(e,c)}}}(a,l),xd.isTab(l))return Sd(l),void a.handleTab();if(xd.isRedo(l))return Sd(l),void("function"==typeof a.redo&&a.redo());if(xd.isUndo(l))return Sd(l),void("function"==typeof a.undo&&a.undo());if(xd.isMoveLineBackward(l))return Sd(l),void s.move(a,{unit:"line",reverse:!0});if(xd.isMoveLineForward(l))return Sd(l),void s.move(a,{unit:"line"});if(xd.isExtendLineBackward(l))return Sd(l),void s.move(a,{unit:"line",edge:"focus",reverse:!0});if(xd.isExtendLineForward(l))return Sd(l),void s.move(a,{unit:"line",edge:"focus"});if(xd.isMoveBackward(l))return Sd(l),void(u&&o.isCollapsed(u)?s.move(a,{reverse:!0}):s.collapse(a,{edge:"start"}));if(xd.isMoveForward(l))return Sd(l),void(u&&o.isCollapsed(u)?s.move(a):s.collapse(a,{edge:"end"}));if(xd.isMoveWordBackward(l))return Sd(l),u&&o.isExpanded(u)&&s.collapse(a,{edge:"focus"}),void s.move(a,{unit:"word",reverse:!0});if(xd.isMoveWordForward(l))return Sd(l),u&&o.isExpanded(u)&&s.collapse(a,{edge:"focus"}),void s.move(a,{unit:"word"});if(xd.isSelectAll(l))return Sd(l),void a.selectAll();if(tl){if((el||Xs)&&u&&(xd.isDeleteBackward(l)||xd.isDeleteForward(l))&&o.isCollapsed(u)){var c=r.parent(a,u.anchor.path);if(i.isElement(c)&&e.isVoid(a,c)&&e.isInline(a,c))return l.preventDefault(),void s.delete(a,{unit:"block"})}}else{if(xd.isBold(l)||xd.isItalic(l)||xd.isTransposeCharacter(l))return void Sd(l);if(xd.isSplitBlock(l))return Sd(l),void e.insertBreak(a);if(xd.isDeleteBackward(l))return Sd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"backward"}):e.deleteBackward(a));if(xd.isDeleteForward(l))return Sd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"forward"}):e.deleteForward(a));if(xd.isDeleteLineBackward(l))return Sd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"backward"}):e.deleteBackward(a,{unit:"line"}));if(xd.isDeleteLineForward(l))return Sd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"forward"}):e.deleteForward(a,{unit:"line"}));if(xd.isDeleteWordBackward(l))return Sd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"backward"}):e.deleteBackward(a,{unit:"word"}));if(xd.isDeleteWordForward(l))return Sd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"forward"}):e.deleteForward(a,{unit:"word"}))}}},keypress:function(t,n,r){if(!tl&&!r.getConfig().readOnly&&dd(r,t.target)){t.preventDefault();var o=t.key;e.insertText(r,o)}},copy:function(e,t,n){var r=e;if(dd(n,r.target)){r.preventDefault();var o=r.clipboardData;null!=o&&n.setFragmentData(o)}},cut:function(t,n,i){var a=t,l=i.selection;if(!i.getConfig().readOnly&&dd(i,a.target)){a.preventDefault();var u=a.clipboardData;if(null!=u&&(i.setFragmentData(u),l))if(o.isExpanded(l))e.deleteFragment(i);else{var c=r.parent(i,l.anchor.path);e.isVoid(i,c)&&s.delete(i)}}},paste:function(e,t,n){Rs.set(n,!0);var r=e;if(!n.getConfig().readOnly&&dd(n,r.target)){var o=n.getConfig().customPaste;if(o)if(!1===o(n,r))return void Rs.set(n,!1);if(!tl||function(e){return e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length}(r)){r.preventDefault();var i=r.clipboardData;null!=i&&n.insertData(i)}}},dragover:function(t,n,r){if(pd(r,t.target)){var o=nl.toSlateNode(r,t.target);e.isVoid(r,o)&&t.preventDefault()}},dragstart:function(t,n,r){var o=t;if(pd(r,o.target)&&!r.getConfig().readOnly){var i=nl.toSlateNode(r,o.target),a=nl.findPath(r,i);if(e.isVoid(r,i)||e.void(r,{at:a,voids:!0})){var l=e.range(r,a);s.select(r,l)}var u=o.dataTransfer;null!=u&&(n.isDraggingInternally=!0,r.setFragmentData(u))}},dragend:function(e,t,n){var r=e;n.getConfig().readOnly||t.isDraggingInternally&&pd(n,r.target)&&(t.isDraggingInternally=!1)},drop:function(e,t,n){var r=e,o=r.dataTransfer;if(!n.getConfig().readOnly&&pd(n,r.target)&&null!=o&&!(tl&&Xs&&o.files.length>0)){r.preventDefault();var i=n.selection,a=nl.findEventRange(n,r);s.select(n,a),t.isDraggingInternally&&(i&&s.delete(n,{at:i}),t.isDraggingInternally=!1),n.insertData(o),n.isFocused()||n.focus()}}},Ed=1,Od=function(){function e(e){var t=this;this.id=Ed++,this.$textArea=null,this.$progressBar=f('<div class="w-e-progress-bar"></div>'),this.$maxLengthInfo=f('<div class="w-e-max-length-info"></div>'),this.isComposing=!1,this.isUpdatingSelection=!1,this.isDraggingInternally=!1,this.latestElement=null,this.showPlaceholder=!1,this.$placeholder=null,this.latestEditorSelection=null,this.onDOMSelectionChange=_((function(){var e=t.editorInstance;!function(e,t){var n=e.isComposing,r=e.isUpdatingSelection,o=e.isDraggingInternally;if(!(t.getConfig().readOnly||n||r||o)){var i=nl.findDocumentOrShadowRoot(t),a=i.activeElement,l=nl.toDOMNode(t,t),u=i.getSelection();if(a===l?(e.latestElement=a,Ls.set(t,!0)):Ls.delete(t),!u)return s.deselect(t);var c=u.anchorNode,f=u.focusNode,d=dd(t,c)||hd(t,c),h=dd(t,f)||hd(t,f);if(d&&h){var p=nl.toSlateRange(t,u,{exactMatch:!1,suppressThrow:!1});s.select(t,p)}else s.deselect(t)}}(t,e)}),100);var n=f(e);if(0===n.length)throw new Error("Cannot find textarea DOM by selector '"+e+"'");this.$box=n;var r=f('<div class="w-e-text-container"></div>');r.append(this.$progressBar),r.append(this.$maxLengthInfo),n.append(r);var o=f('<div class="w-e-scroll"></div>');r.append(o),this.$scroll=o,this.$textAreaContainer=r,uc((function(){var e=t.editorInstance,n=nl.getWindow(e);n.document.addEventListener("selectionchange",t.onDOMSelectionChange),e.on("destroyed",(function(){n.document.removeEventListener("selectionchange",t.onDOMSelectionChange)})),r.on("mousedown",(function(){return e.hidePanelOrModal()})),e.on("change",t.changeViewState.bind(t));var o=e.getConfig().onChange;o&&e.on("change",(function(){return o(e)})),t.onFocusAndOnBlur(),e.on("change",t.changeMaxLengthInfo.bind(t)),t.bindEvent()}))}return Object.defineProperty(e.prototype,"editorInstance",{get:function(){var e=cs.get(this);if(null==e)throw new Error("Can not get editor instance");return e},enumerable:!1,configurable:!0}),e.prototype.bindEvent=function(){var e=this,t=this.$textArea,n=this.$scroll,r=this.editorInstance;null!=t&&(I(kd,(function(n,o){t.on(o,(function(t){n(t,e,r)}))})),r.getConfig().scroll&&(n.css("overflow-y","auto"),n.on("scroll",_((function(){r.emit("scroll")}),100))))},e.prototype.onFocusAndOnBlur=function(){var e=this,t=this.editorInstance,n=t.getConfig(),r=n.onBlur,o=n.onFocus;this.latestEditorSelection=t.selection,t.on("change",(function(){null==e.latestEditorSelection&&null!=t.selection?o&&o(t):null!=e.latestEditorSelection&&null==t.selection&&r&&r(t),e.latestEditorSelection=t.selection}))},e.prototype.changeMaxLengthInfo=function(){var e=this.editorInstance,t=e.getConfig().maxLength;if(t){var n=t-nl.getLeftLengthOfMaxLength(e);this.$maxLengthInfo[0].innerHTML=n+"/"+t}},e.prototype.changeProgress=function(e){var t=this.$progressBar;t.css("width",e+"%"),e>=100&&setTimeout((function(){t.hide(),t.css("width","0"),t.show()}),1e3)},e.prototype.changeViewState=function(){var e=this,t=this.editorInstance;od(this,t),function(e,t){var n,r=t.getConfig().placeholder;if(r){var o=t.isEmpty();if(o&&!e.showPlaceholder){if(null==e.$placeholder){var i=f('<div class="w-e-text-placeholder">'+r+"</div>");e.$textAreaContainer.append(i),e.$placeholder=i}return e.$placeholder.show(),void(e.showPlaceholder=!0)}!o&&e.showPlaceholder&&(null===(n=e.$placeholder)||void 0===n||n.hide(),e.showPlaceholder=!1)}}(this,t),uc((function(){!function(e,t){var n=t.selection,r=nl.findDocumentOrShadowRoot(t).getSelection();if(r&&!e.isComposing&&t.isFocused()){var i="None"!==r.type;if(n||i){var a=Es.get(t),s=!1;if(a.contains(r.anchorNode)&&a.contains(r.focusNode)&&(s=!0),i&&s&&n){var l=nl.toSlateRange(t,r,{exactMatch:!0,suppressThrow:!0});if(l&&o.equals(l,n)){var u=!0;if(o.isCollapsed(n)){var c=r.anchorNode,f=r.anchorOffset;if(c===a){var d=a.childNodes,h=void 0;(h=d[f])&&h.matches("table")&&(u=!1),(h=d[f-1])&&h.matches("table")&&(u=!1)}}if(u)return}}if(!n||nl.hasRange(t,n)){e.isUpdatingSelection=!0;var p=n&&nl.toDOMRange(t,n);if(p){o.isBackward(n)?r.setBaseAndExtent(p.endContainer,p.endOffset,p.startContainer,p.startOffset):r.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset);var g=p.startContainer.parentElement;g.closest("[data-slate-spacer]")||(g.getBoundingClientRect=p.getBoundingClientRect.bind(p),fd(g,{scrollMode:"if-needed",boundary:a.parentElement,block:"end",behavior:"smooth"}),delete g.getBoundingClientRect)}else r.removeAllRanges();setTimeout((function(){p&&Ys&&a.focus(),e.isUpdatingSelection=!1}))}else t.selection=nl.toSlateRange(t,r,{exactMatch:!1,suppressThrow:!1})}}}(e,t)}))},e.prototype.destroy=function(){this.$textAreaContainer.remove()},e}();Bi("match",(function(e,t,n){return[function(t){var n=ve(this),r=null==t?void 0:lt(t,e);return r?et(r,t,n):new RegExp(t)[e](Rr(n))},function(e){var r=Qe(this),o=Rr(e),i=n(t,r,o);if(i.done)return i.value;if(!r.global)return Yi(r,o);var a=r.unicode;r.lastIndex=0;for(var s,l=[],u=0;null!==(s=Yi(r,o));){var c=Rr(s[0]);l[u]=c,""===c&&(r.lastIndex=Wi(o,cn(r.lastIndex),a)),u++}return 0===u?null:l}]}));function Cd(e){e.removeAttr("width"),e.removeAttr("height"),e.removeAttr("fill"),e.removeAttr("class"),e.removeAttr("t"),e.removeAttr("p-id");var t=e.children();t.length&&Cd(t)}function Nd(){return f('<svg viewBox="0 0 1024 1024"><path d="M498.7 655.8l-197.6-268c-8.1-10.9-0.3-26.4 13.3-26.4h395.2c13.6 0 21.4 15.4 13.3 26.4l-197.6 268c-6.6 9-20 9-26.6 0z"></path></svg>')}function Td(){return f('<div class="w-e-bar-divider"></div>')}function Md(e,t,n,r,o){if(void 0===o&&(o=!1),t){if(r){var i=Js?"cmd":"ctrl";r=r.replace("mod",i)}if(o)r&&(e.attr("data-tooltip",r),e.addClass("w-e-menu-tooltip-v5"),e.addClass("tooltip-right"));else{var a=r?n+"\n"+r:n;e.attr("data-tooltip",a),e.addClass("w-e-menu-tooltip-v5")}}}var Ld=function(){function e(e,t){var n=this;void 0===t&&(t=!1),this.$elem=f('<div class="w-e-bar-item"></div>'),this.$button=f('<button type="button"></button>'),this.disabled=!1,this.menu=e;var r=e.tag,o=e.width;if("button"!==r)throw new Error("Invalid tag '"+r+"', expected 'button'");var i=e.title,a=e.hotkey,s=void 0===a?"":a,l=e.iconSvg,u=void 0===l?"":l,c=this.$button;if(u){var d=f(u);Cd(d),c.append(d)}else c.text(i);Md(c,u,i,s,t),t&&u&&c.append(f('<span class="title">'+i+"</span>")),o&&c.css("width",o+"px"),this.$elem.append(c),uc((function(){return n.init()}))}return e.prototype.init=function(){var e=this;this.setActive(),this.setDisabled(),this.$button.on("mousedown",(function(t){t.preventDefault(),Ud(e).hidePanelOrModal(),e.disabled||(e.exec(),e.onButtonClick())}))},e.prototype.exec=function(){var e=Ud(this),t=this.menu,n=t.getValue(e);t.exec(e,n)},e.prototype.setActive=function(){var e=Ud(this),t=this.$button,n="active";this.menu.isActive(e)?t.addClass(n):t.removeClass(n)},e.prototype.setDisabled=function(){var e=Ud(this),t=this.$button,n=this.menu.isDisabled(e);(null==e.selection||e.isDisabled())&&(n=!0),this.menu.awaysEnable&&(n=!1);var r="disabled";n?t.addClass(r):t.removeClass(r),this.disabled=n},e.prototype.changeMenuState=function(){this.setActive(),this.setDisabled()},e}(),Pd=function(e){function t(t,n){return void 0===n&&(n=!1),e.call(this,t,n)||this}return sa(t,e),t.prototype.onButtonClick=function(){},t}(Ld),Dd=function(){function e(e){this.isShow=!1,this.showTime=0,this.record(e)}return e.prototype.record=function(e){var t=vs.get(e);null==t&&(t=new Set,vs.set(e,t)),t.add(this),ys.set(this,e)},e.prototype.renderContent=function(e){var t=this.$elem;t.html(""),t.append(e);var n=this.genSelfElem();n&&t.append(n)},e.prototype.appendTo=function(e){var t=this.$elem;e.append(t)},e.prototype.show=function(){if(!this.isShow){this.showTime=Date.now(),this.$elem.show(),this.isShow=!0;var e=ys.get(this);e&&e.emit("modalOrPanelShow",this)}},e.prototype.hide=function(){if(this.isShow&&!(Date.now()-this.showTime<200)){this.$elem.hide(),this.isShow=!1;var e=ys.get(this);e&&e.emit("modalOrPanelHide")}},e}(),Rd=function(e){function t(t){var n=e.call(this,t)||this;return n.type="dropPanel",n.$elem=f('<div class="w-e-drop-panel"></div>'),n}return sa(t,e),t.prototype.genSelfElem=function(){return null},t}(Dd),jd=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this,t,n)||this;if(r.dropPanel=null,r.menu=t,t.showDropPanel){var o=Nd();r.$button.append(o)}return r}return sa(t,e),t.prototype.onButtonClick=function(){this.menu.showDropPanel&&this.handleDropPanel()},t.prototype.handleDropPanel=function(){var e=this.menu;if(null!=e.getPanelContentElem){var t=Ud(this);if(null==this.dropPanel){var n=new Rd(t),r=e.getPanelContentElem(t);n.renderContent(r),n.appendTo(this.$elem),n.show(),this.dropPanel=n}else{var o=this.dropPanel;if(o.isShow)o.hide();else{r=e.getPanelContentElem(t);o.renderContent(r),o.show()}}var i=this.dropPanel;if(i.isShow){var a=this.$elem,s=a.offset().left,l=a.parents(".w-e-bar");s-l.offset().left>=l.width()/2?i.$elem.css({left:"none",right:"0"}):i.$elem.css({left:"0",right:"none"})}}},t}(Ld),Ad=function(e){function t(t,n){void 0===n&&(n=0);var r=e.call(this,t)||this;r.type="modal",r.$elem=f('<div class="w-e-modal"></div>'),r.width=0,n&&(r.width=n);var o=r.$elem;return o.on("mousedown",(function(e){return e.stopPropagation()})),o.on("keyup",(function(e){"Escape"===e.code&&(r.hide(),t.restoreSelection())})),r}return sa(t,e),t.prototype.genSelfElem=function(){var e=this,t=f('<span class="btn-close"><svg viewBox="0 0 1024 1024"><path d="M1024 896.1024l-128 128L512 640 128 1024 0 896 384 512 0 128 128 0 512 384 896.1024 0l128 128L640 512z"></path></svg></span>');return t.on("click",(function(){return e.hide()})),t},t.prototype.setStyle=function(e){var t=this.width,n=this.$elem;n.attr("style",""),t&&n.css("width",t+"px"),n.css(e)},t}(Dd);function Fd(e,t,n){var r=f('<label class="babel-container"></label>');r.append("<span>"+e+"</span>");var o=f('<input type="text" id="'+t+'" placeholder="'+(n||"")+'">');return r.append(o),[r[0],o[0]]}function Id(e,t,n){var r=f('<label class="babel-container"></label>');r.append("<span>"+e+"</span>");var o=f('<textarea type="text" id="'+t+'" placeholder="'+(n||"")+'"></textarea>');return r.append(o),[r[0],o[0]]}function _d(e,t){var n=f('<div class="button-container"></div>'),r=f('<button type="button" id="'+e+'">'+t+"</button>");return n.append(r),[n[0],r[0]]}var Bd=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this,t,n)||this;return r.$body=f("body"),r.modal=null,r.menu=t,r}return sa(t,e),t.prototype.onButtonClick=function(){this.menu.showModal&&this.handleModal()},t.prototype.getPosition=function(){var e=Ud(this),t=this.menu.getModalPositionNode(e);return i.isElement(t)?Lf(e,t,"modal"):Mf(e)},t.prototype.handleModal=function(){var e=Ud(this),t=this.menu;if(null==this.modal){var n=new Ad(e,t.modalWidth);this.renderAndShowModal(n,!0),this.modal=n}else{(n=this.modal).isShow?n.hide():this.renderAndShowModal(n,!1)}},t.prototype.renderAndShowModal=function(e,t){void 0===t&&(t=!1);var n=Ud(this),r=this.menu;if(null!=r.getModalContentElem){var o=nl.getTextarea(n),i=nl.getToolbar(n),a=((null==i?void 0:i.getConfig())||{}).modalAppendToBody,s=r.getModalContentElem(n);if(e.renderContent(s),a)e.setStyle({left:"0",right:"0"});else{var l=this.getPosition();e.setStyle(l)}t&&(a?e.appendTo(this.$body):e.appendTo(o.$textAreaContainer)),e.show(),a||Pf(n,e.$elem),setTimeout((function(){n.blur()}))}},t}(Ld);var $d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.type="selectList",r.$elem=f('<div class="w-e-select-list"></div>'),n&&r.$elem.css("width",n+"px"),r.$elem.on("mousedown",(function(e){e.stopPropagation()})),r}return sa(t,e),t.prototype.renderList=function(e){var t=this.$elem;t.html("");var n=f("<ul></ul>");e.forEach((function(e){var t=e.value,r=e.text,o=e.selected,i=e.styleForRenderMenuList,a=f('<li data-value="'+t+'"></li>');if(i&&a.css(i),o){var s=f('<svg viewBox="0 0 1446 1024"><path d="M574.116299 786.736392 1238.811249 48.517862C1272.390222 11.224635 1329.414799 7.827718 1366.75664 41.450462 1403.840015 74.840484 1406.731043 132.084741 1373.10189 169.433699L655.118888 966.834607C653.072421 969.716875 650.835807 972.514337 648.407938 975.210759 615.017957 1012.29409 558.292155 1015.652019 521.195664 982.250188L72.778218 578.493306C35.910826 545.297758 32.859041 488.584019 66.481825 451.242134 99.871807 414.158803 156.597563 410.800834 193.694055 444.202665L574.116299 786.736392Z"></path></svg>');a.append(s),a.addClass("selected")}a.append(f('<span data-value="'+t+'">'+r+"</span>")),a.attr("title",r),n.append(a)})),t.append(n)},t.prototype.genSelfElem=function(){return null},t}(Dd);var Wd=function(){function e(e,t){var n=this;void 0===t&&(t=!1),this.$elem=f('<div class="w-e-bar-item"></div>'),this.$button=f('<button type="button" class="select-button"></button>'),this.disabled=!1,this.selectList=null;var r=e.tag,o=e.title,i=e.width,a=e.iconSvg,s=void 0===a?"":a,l=e.hotkey,u=void 0===l?"":l;if("select"!==r)throw new Error("Invalid tag '"+r+"', expected 'select'");var c=this.$button;i&&c.css("width",i+"px"),Md(c,s,o,u,t),this.$elem.append(c),this.menu=e,uc((function(){return n.init()}))}return e.prototype.init=function(){var e=this;this.setSelectedValue(),this.$button.on("mousedown",(function(t){t.preventDefault(),Ud(e).hidePanelOrModal(),e.trigger()}))},e.prototype.trigger=function(){var e=this,t=Ud(this);if(!t.isDisabled()&&!this.disabled){var n=this.menu;if(null==this.selectList){this.selectList=new $d(t,n.selectPanelWidth);var r=this.selectList,o=n.getOptions(t);r.renderList(o),r.appendTo(this.$elem),r.show(),r.$elem.on("mousedown","li",(function(t){var n=t.target;if(null!=n){t.preventDefault();var r=f(n).attr("data-value");e.onChange(r)}}))}else{if((r=this.selectList).isShow)r.hide();else{o=n.getOptions(t);r.renderList(o),r.show()}}}},e.prototype.onChange=function(e){var t=Ud(this),n=this.menu;n.exec&&n.exec(t,e)},e.prototype.setSelectedValue=function(){var e=Ud(this),t=this.menu,n=t.getValue(e),r=function(e,t){for(var n=e.length,r="",o=0;o<n;o++){var i=e[o];if(i.value===t){r=i.text;break}}return r}(t.getOptions(e),n.toString()),o=this.$button,i=Nd();o.html(""),o.text(r),o.append(i)},e.prototype.setDisabled=function(){var e=Ud(this),t=this.menu.isDisabled(e),n=this.$button;(null==e.selection||e.isDisabled())&&(t=!0);var r="disabled";t?n.addClass(r):n.removeClass(r),this.disabled=t},e.prototype.changeMenuState=function(){this.setSelectedValue(),this.setDisabled()},e}(),Vd=function(){function e(e){this.$elem=f('<div class="w-e-bar-item w-e-bar-item-group"></div>'),this.$container=f('<div class="w-e-bar-item-menus-container"></div>'),this.$button=f('<button type="button"></button>');var t=e.iconSvg,n=e.title,r=this.$elem,o=this.$button;if(t){var i=f(t);Cd(i),o.append(i)}else o.text(n);var a=Nd();o.append(a),r.append(o);var s=this.$container;r.append(s);var l=this.createObserver();this.observe(l)}return e.prototype.appendBarItem=function(e){var t=e.$elem;this.$container.append(t)},e.prototype.observe=function(e){var t=this.$container;e.observe(t[0],{childList:!0,subtree:!0,attributes:!0})},e.prototype.createObserver=function(){var e=this,t=this.$container,n=this.$button,r=new MutationObserver((function(){var o=t.find("button"),i=o.length;if(0!==i){var a=0;o.each((function(e){f(e).hasClass("disabled")&&a++})),r.disconnect(),a===i?n.addClass("disabled"):n.removeClass("disabled"),e.observe(r)}}));return r},e}(),zd=new WeakMap;function Ud(e){var t=gs.get(e);if(null==t)throw new Error("Can not get editor instance");return t}function Hd(e,t){void 0===t&&(t=!1);var n=zd.get(e);if(n)return n;var r=e.tag;if("button"===r){var o=e.showDropPanel,i=e.showModal;n=o?new jd(e,t):i?new Bd(e,t):new Pd(e,t)}if("select"===r&&(n=new Wd(e,t)),null==n)throw new Error("Invalid tag in menu "+JSON.stringify(e));return zd.set(e,n),n}function Kd(e,t){var n=e.selection;return null!=n&&(!o.isCollapsed(n)&&(!nl.getSelectedElems(e).some((function(t){if(e.isVoid(t))return!0;var n=t.type;return!!["pre","code","table"].includes(n)||void 0}))&&!!a.isText(t)))}var qd=function(){function t(){var e=this;this.$elem=f('<div class="w-e-bar w-e-bar-hidden w-e-hover-bar"></div>'),this.menus={},this.hoverbarItems=[],this.prevSelectedNode=null,this.isShow=!1,this.changeHoverbarState=Y((function(){var t=e.isShow,n=e.getSelectedNodeAndMenuKeys()||{},r=n.node,o=void 0===r?null:r,a=n.menuKeys,s=void 0===a?[]:a;if((null!=o&&e.changeItemsState(),o&&i.isElement(o))&&(t&&e.isSamePath(o,e.prevSelectedNode)))return;e.hideAndClean(),null!=o&&(e.registerItems(s),e.setPosition(o),e.show()),e.prevSelectedNode=o}),200),uc((function(){var t=e.getEditorInstance(),n=e.$elem;n.on("mousedown",(function(e){return e.preventDefault()})),nl.getTextarea(t).$textAreaContainer.append(n),t.on("change",e.changeHoverbarState);var r=e.hideAndClean.bind(e);t.on("scroll",r),t.on("fullScreen",r),t.on("unFullScreen",r)}))}return t.prototype.getMenus=function(){return this.menus},t.prototype.hideAndClean=function(){var e=this.$elem;e.removeClass("w-e-bar-show").addClass("w-e-bar-hidden"),this.hoverbarItems=[],e.html(""),this.isShow=!1},t.prototype.show=function(){this.$elem.removeClass("w-e-bar-hidden").addClass("w-e-bar-show"),this.isShow=!0},t.prototype.changeItemsState=function(){var e=this;uc((function(){e.hoverbarItems.forEach((function(e){e.changeMenuState()}))}))},t.prototype.registerItems=function(e){var t=this,n=this.$elem;e.forEach((function(e){if("|"!==e)t.registerSingleItem(e);else{var r=Td();n.append(r)}}))},t.prototype.registerSingleItem=function(e){var t=this.getEditorInstance(),n=this.menus,r=n[e];if(null==r){var o=il[e];if(null==o)throw new Error("Not found menu item factory by key '"+e+"'");if("function"!=typeof o)throw new Error("Menu item factory (key='"+e+"') is not a function");r=o(),n[e]=r}var i=Hd(r);this.hoverbarItems.push(i),gs.set(i,t),this.$elem.append(i.$elem)},t.prototype.setPosition=function(e){var t=this.getEditorInstance(),n=this.$elem;if(n.attr("style",""),i.isElement(e)){var r=Lf(t,e,"bar");return n.css(r),void Pf(t,n)}if(a.isText(e)){r=Mf(t);return n.css(r),void Pf(t,n)}throw new Error("hoverbar.setPosition error, current selected node is not elem nor text")},t.prototype.getSelectedNodeAndMenuKeys=function(){var t=this.getEditorInstance();if(null==t.selection)return null;var n=this.getHoverbarKeysConf(),r=null,o=[],i=function(i){var a=n[i],s=a.match,l=a.menuKeys,u=void 0===l?[]:l,c=s||function(e,t){return nl.checkNodeType(t,i)},f=ca(e.nodes(t,{match:function(e){return c(t,e)},universal:!0}),1),d=f[0];if(null!=d)return r=d[0],o=u,"break"};for(var a in n){if("break"===i(a))break}return null==r||0===o.length?null:{node:r,menuKeys:o}},t.prototype.getEditorInstance=function(){var e=hs.get(this);if(null==e)throw new Error("Can not get editor instance");return e},t.prototype.getHoverbarKeysConf=function(){var e=this.getEditorInstance().getConfig().hoverbarKeys,t=void 0===e?{}:e,n=t.text;return n&&null==n.match&&(n.match=Kd),t},t.prototype.isSamePath=function(e,t){if(null==e||null==t)return!1;var r=nl.findPath(null,e),o=nl.findPath(null,t);return n.equals(r,o)},t.prototype.destroy=function(){this.$elem.remove(),this.menus={},this.hoverbarItems=[],this.prevSelectedNode=null},t}();function Gd(e,t,n){var r=f(n);return!!r.attr(t)||(r.attr(t,"true"),e.on("destroyed",(function(){r.removeAttr(t)})),!1)}function Jd(t,n,o,a){if(Ss.set(t,n),ks.set(t,o),i.isElement(t)){var s=t.children;if((void 0===s?[]:s).forEach((function(e,n){return Jd(e,n,t,a)})),e.isVoid(a,t)){var l=ca(r.texts(t),1),u=ca(l[0],1)[0];Ss.set(u,0),ks.set(u,t)}}}function Yd(n){var i=n.selector,a=void 0===i?"":i,c=n.config,d=void 0===c?{}:c,h=n.content,p=n.html,g=n.plugins,v=void 0===g?[]:g,y=(n=>{var r=n,{apply:o}=r;return r.history={undos:[],redos:[]},r.redo=()=>{var{history:t}=r,{redos:n}=t;if(n.length>0){var o=n[n.length-1];Lo.withoutSaving(r,(()=>{e.withoutNormalizing(r,(()=>{for(var e of o)r.apply(e)}))})),t.redos.pop(),t.undos.push(o)}},r.undo=()=>{var{history:n}=r,{undos:o}=n;if(o.length>0){var i=o[o.length-1];Lo.withoutSaving(r,(()=>{e.withoutNormalizing(r,(()=>{var e=i.map(t.inverse).reverse();for(var n of e)r.apply(n)}))})),n.redos.push(i),n.undos.pop()}},r.apply=e=>{var{operations:t,history:n}=r,{undos:i}=n,a=i[i.length-1],s=a&&a[a.length-1],l=Ro(e,s),u=Lo.isSaving(r),c=Lo.isMerging(r);if(null==u&&(u=Do(e)),u){if(null==c&&(c=null!=a&&(0!==t.length||Po(e,s)||l)),a&&c)l&&a.pop(),a.push(e);else{var f=[e];i.push(f)}for(;i.length>100;)i.shift();jo(e)&&(n.redos=[])}o(e)},r})(function(e){var t=e,n=t.insertText,o=t.insertNode,i=t.insertFragment;return t.insertText=function(e){if(t.getConfig().maxLength){var r=nl.getLeftLengthOfMaxLength(t);r<=0||(r<e.length?n(e.slice(0,r)):n(e))}else n(e)},t.insertNode=function(e){if(t.getConfig().maxLength){var n=nl.getLeftLengthOfMaxLength(t);n<=0||n<r.string(e).length||o(e)}else o(e)},t.insertFragment=function(e){t.getConfig().maxLength?e.forEach((function(e){t.insertNode(e)})):i(e)},t}(function(e){var t=e;return t.on=function(e,n){var r=kf(t);if(r.on(e,n),"destroyed"===e&&Of(t,n),"destroyed"!==e){var o=function(){return r.off(e,n)};r.on("destroyed",o),Of(t,o)}},t.once=function(e,n){kf(t).once(e,n)},t.off=function(e,n){kf(t).off(e,n)},t.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=kf(t);(o.emit.apply(o,fa([e],ca(n))),"destroyed"===e)&&(Cf(t).forEach((function(e){return o.off("destroyed",e)})),Nf(t))},t}(function(t){var n=t;return n.select=function(e){s.select(n,e)},n.deselect=function(){var e=n.selection,r=nl.findDocumentOrShadowRoot(n).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),e&&s.deselect(t)},n.move=function(e,n){void 0===n&&(n=!1),e&&(e<0||s.move(t,{distance:e,unit:"character",reverse:n}))},n.moveReverse=function(e){n.move(e,!0)},n.restoreSelection=function(){var e=Ps.get(n);null!=e&&(n.focus(),s.select(n,e))},n.getSelectionPosition=function(){return Mf(n)},n.getNodePosition=function(e){return Lf(n,e)},n.isSelectedAll=function(){var t=n.selection;if(null==t)return!1;var r=ca(o.edges(t),2),i=r[0],a=r[1],s=ca(e.edges(n,[]),2),u=s[0],c=s[1];return!(!l.equals(i,u)||!l.equals(a,c))},n.selectAll=function(){var t=e.start(n,[]),r=e.end(n,[]);s.select(n,{anchor:t,focus:r})},n}(Zc(function(e){var t=e;return t.getAllMenuKeys=function(){var e=[];for(var t in il)e.push(t);return e},t.getConfig=function(){var e=ms.get(t);if(null==e)throw new Error("Can not get editor config");return e},t.getMenuConfig=function(e){var n=t.getConfig().MENU_CONF;return(void 0===n?{}:n)[e]||{}},t.alert=function(e,n){void 0===n&&(n="info");var r=t.getConfig().customAlert;r&&r(e,n)},t}(function(t){var n=t;return n.id="wangEditor-"+rl++,n.isDestroyed=!1,n.isFullScreen=!1,n.focus=function(t){var r=nl.toDOMNode(n,n),o=nl.findDocumentOrShadowRoot(n);if(Ls.set(n,!0),t){var i=e.end(n,[]);s.select(n,i)}o.activeElement!==r&&r.focus({preventScroll:!0})},n.isFocused=function(){return!!Ls.get(n)},n.blur=function(){var e=nl.toDOMNode(n,n),t=nl.findDocumentOrShadowRoot(n);Ls.set(n,!1),t.activeElement===e&&(e.blur(),s.deselect(n))},n.updateView=function(){nl.getTextarea(n).changeViewState();var e=nl.getToolbar(n);e&&e.changeToolbarState();var t=nl.getHoverbar(n);t&&t.changeHoverbarState()},n.destroy=function(){var e=nl.getTextarea(n);e.destroy(),us.delete(n),cs.delete(e);var t=nl.getToolbar(n);t&&(t.destroy(),ds.delete(n),fs.delete(t));var r=nl.getHoverbar(n);r&&(r.destroy(),ps.delete(n),hs.delete(r)),n.isDestroyed=!0,n.emit("destroyed")},n.scrollToElem=function(e){if(!n.getConfig().scroll){var t="编辑器禁用了 scroll ，编辑器内容无法滚动，请自行实现该功能";return t+="\nYou has disabled editor scroll, please do this yourself",void console.warn(t)}var r=f("#"+e);if(0!==r.length){var o=r[0];if(!nl.hasDOMNode(n,o))return t="Element (found by id is '"+e+"') is not in editor DOM",t+="\n 通过 id '"+e+"' 找到的 element 不在 editor DOM 之内",void console.error(t,o);var i=nl.getTextarea(n),a=i.$textAreaContainer,s=i.$scroll,l=r.offset().top,u=a.offset().top;s[0].scrollBy({top:l-u,behavior:"smooth"})}},n.showProgressBar=function(e){e<1||nl.getTextarea(n).changeProgress(e)},n.hidePanelOrModal=function(){var e=vs.get(n);null!=e&&e.forEach((function(e){return e.hide()}))},n.enable=function(){n.getConfig().readOnly=!1,n.updateView()},n.disable=function(){n.getConfig().readOnly=!0,n.updateView()},n.isDisabled=function(){return n.getConfig().readOnly},n.toDOMNode=function(e){return nl.toDOMNode(n,e)},n.fullScreen=function(){if(!n.isFullScreen){var e=null,t=nl.getToolbar(n);t&&(e=t.$box);var r=nl.getTextarea(n).$box.parent();if(e&&e.parent()[0]!==r[0])throw new Error("Can not set full screen, cause toolbar DOM parent is not equal to textarea DOM parent\n不能设置全屏，因为 toolbar DOM 父节点和 textarea DOM 父节点不一致");r.addClass("w-e-full-screen-container");var o=r.css("z-index");r.attr("data-z-index",o.toString()),n.isFullScreen=!0,n.emit("fullScreen")}},n.unFullScreen=function(){if(n.isFullScreen){var e=nl.getTextarea(n).$box.parent();setTimeout((function(){e.removeClass("w-e-full-screen-container"),n.isFullScreen=!1,n.emit("unFullScreen")}),200)}},n.getEditableContainer=function(){return nl.getTextarea(n).$textAreaContainer[0]},n}(function(t){var n=t,r=n.insertText;return n.insertFragment,n.setFragmentData=function(t){var r=n.selection;if(r){var i=ca(o.edges(r),2),a=i[0],s=i[1],l=e.void(n,{at:a.path}),u=e.void(n,{at:s.path});if(!o.isCollapsed(r)||l){var c=nl.toDOMRange(n,r),f=c.cloneContents(),d=f.childNodes[0];if(f.childNodes.forEach((function(e){e.textContent&&""!==e.textContent.trim()&&(d=e)})),u){var h=ca(u,1)[0],p=c.cloneRange(),g=nl.toDOMNode(n,h);p.setEndAfter(g),f=p.cloneContents()}if(l&&(d=f.querySelector("[data-slate-spacer]")),Array.from(f.querySelectorAll("[data-slate-zero-width]")).forEach((function(e){var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),Vs(d)){var v=d.ownerDocument.createElement("span");v.style.whiteSpace="pre",v.appendChild(d),f.appendChild(v),d=v}var y=n.getFragment(),m=JSON.stringify(y),b=window.btoa(encodeURIComponent(m));d.setAttribute("data-slate-fragment",b),t.setData("application/x-slate-fragment",b);var w=f.ownerDocument.createElement("div");return w.appendChild(f),w.setAttribute("hidden","true"),f.ownerDocument.body.appendChild(w),t.setData("text/html",w.innerHTML),t.setData("text/plain",Ks(w)),f.ownerDocument.body.removeChild(w),t}}},n.insertData=function(e){var t,o,i=e.getData("application/x-slate-fragment");if(i){var a=decodeURIComponent(window.atob(i)),l=JSON.parse(a);n.insertFragment(l)}else{var u=e.getData("text/plain"),c=e.getData("text/html");if(c)n.dangerouslyInsertHtml(c);else if(u){var f=u.split(/\r\n|\r|\n/),d=!1;try{for(var h=ua(f),p=h.next();!p.done;p=h.next()){var g=p.value;d&&s.splitNodes(n,{always:!0}),r(g),d=!0}}catch(e){t={error:e}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(t)throw t.error}}}}},n}(u()))))))));if(a&&function(e,t){return Gd(e,"data-w-e-textarea",t)}(y,a))throw new Error("Repeated create editor by selector '"+a+"'");var m=function(e){void 0===e&&(e={});var t=X(ol),n={},r=e.MENU_CONF,o=void 0===r?{}:r;return I(t,(function(e,t){n[t]=la(la({},e),o[t]||{})})),delete e.MENU_CONF,la({scroll:!0,readOnly:!1,autoFocus:!0,decorate:function(){return[]},maxLength:0,MENU_CONF:n,hoverbarKeys:{},customAlert:function(e,t){window.alert(t+":\n"+e)}},e)}(d);ms.set(y,m);var b=m.hoverbarKeys,w=void 0===b?{}:b;if(v.forEach((function(e){y=e(y)})),p){var x=f("<div>"+p+"</div>");y.children=Array.from(x.children()).map((function(e){return Xc(f(e),y)}))}if(h&&h.length&&(y.children=h),0===y.children.length&&(y.children=[{type:"paragraph",children:[{text:""}]}]),nl.normalizeContent(y),a){var S=new Od(a);us.set(y,S),cs.set(S,y),S.changeViewState(),uc((function(){var e=S.$scroll;if(null!=e&&e.height()<300){"\nTextarea height < 300px . This may be cause modal and hoverbar position error",console.warn("编辑区域高度 < 300px 这可能会导致 modal hoverbar 定位异常\nTextarea height < 300px . This may be cause modal and hoverbar position error",e)}}));var k=void 0;Object.keys(w).length>0&&(k=new qd,hs.set(k,y),ps.set(y,k)),y.on("change",(function(){y.hidePanelOrModal()})),y.on("scroll",(function(){y.hidePanelOrModal()}))}else y.children.forEach((function(e,t){return Jd(e,t,y,y)}));var E=m.onCreated,O=m.onDestroyed;return E&&y.on("created",(function(){return E(y)})),O&&y.on("destroyed",(function(){return O(y)})),uc((function(){return y.emit("created")})),y}var Xd=cr("splice"),Qd=ie.TypeError,Zd=Math.max,eh=Math.min;lr({target:"Array",proto:!0,forced:!Xd},{splice:function(e,t){var n,r,o,i,a,s,l=me(this),u=fn(l),c=Wn(e,u),f=arguments.length;if(0===f?n=r=0:1===f?(n=0,r=u-c):(n=f-2,r=eh(Zd(ln(t),0),u-c)),u+n-r>9007199254740991)throw Qd("Maximum allowed length exceeded");for(o=kn(l,r),i=0;i<r;i++)(a=c+i)in l&&br(o,i,l[a]);if(o.length=r,n<r){for(i=c;i<u-r;i++)s=i+n,(a=i+r)in l?l[s]=l[a]:delete l[s];for(i=u;i>u-r+n;i--)delete l[i-1]}else if(n>r)for(i=u-r;i>c;i--)s=i+n-1,(a=i+r-1)in l?l[s]=l[a]:delete l[s];for(i=0;i<n;i++)l[i+c]=arguments[i+2];return l.length=u-r+n,o}});var th=function(){function e(e,t){var n=this;this.$toolbar=f('<div class="w-e-bar w-e-bar-show w-e-toolbar"></div>'),this.menus={},this.toolbarItems=[],this.config={},this.changeToolbarState=Y((function(){n.toolbarItems.forEach((function(e){e.changeMenuState()}))}),200),this.config=t;var r=f(e);if(0===r.length)throw new Error("Cannot find toolbar DOM by selector '"+e+"'");this.$box=r;var o=this.$toolbar;o.on("mousedown",(function(e){return e.preventDefault()})),r.append(o),uc((function(){n.registerItems(),n.changeToolbarState(),n.getEditorInstance().on("change",n.changeToolbarState)}))}return e.prototype.getMenus=function(){return this.menus},e.prototype.getConfig=function(){return this.config},e.prototype.registerItems=function(){var e=this,t="",n=this.$toolbar,r=this.config,o=r.toolbarKeys,i=void 0===o?[]:o,a=r.insertKeys,s=void 0===a?{index:0,keys:[]}:a,l=r.excludeKeys,u=void 0===l?[]:l,c=X(i);s.keys.length>0&&("string"==typeof s.keys&&(s.keys=[s.keys]),s.keys.forEach((function(e,t){c.splice(s.index+t,0,e)})));var f=c.filter((function(e){if("string"==typeof e){if(u.includes(e))return!1}else if(u.includes(e.key))return!1;return!0})),d=f.length;f.forEach((function(r,o){if("|"===r){if(0===o)return;if(o+1===d)return;if("|"===t)return;var i=Td();return n.append(i),void(t=r)}if("string"==typeof r)return e.registerSingleItem(r,e),void(t=r);e.registerGroup(r),t="group"}))},e.prototype.registerGroup=function(e){var t=this,n=this.$toolbar,r=function(e){return new Vd(e)}(e),o=e.menuKeys,i=void 0===o?[]:o,a=this.config.excludeKeys,s=void 0===a?[]:a;i.forEach((function(e){s.includes(e)||t.registerSingleItem(e,r)})),n.append(r.$elem)},e.prototype.registerSingleItem=function(e,t){var n=this.getEditorInstance(),r=t instanceof Vd,o=this.menus,i=o[e];if(null==i){var a=il[e];if(null==a)throw new Error("Not found menu item factory by key '"+e+"'");if("function"!=typeof a)throw new Error("Menu item factory (key='"+e+"') is not a function");i=a(),o[e]=i}else console.warn("Duplicated toolbar menu key '"+e+"'\n重复注册了菜单栏 menu '"+e+"'");var s=Hd(i,r);(this.toolbarItems.push(s),gs.set(s,n),r)?t.appendBarItem(s):t.$toolbar.append(s.$elem)},e.prototype.getEditorInstance=function(){var e=fs.get(this);if(null==e)throw new Error("Can not get editor instance");return e},e.prototype.destroy=function(){this.$toolbar.remove(),this.menus={},this.toolbarItems=[]},e}();function nh(e,t){if(null==e)throw new Error("Cannot create toolbar, because editor is null");var n=t.selector,r=t.config,o=void 0===r?{}:r;if(function(e,t){return Gd(e,"data-w-e-toolbar",t)}(e,n))throw new Error("Repeated create toolbar by selector '"+n+"'");var i=la({toolbarKeys:[],excludeKeys:[],insertKeys:{index:0,keys:[]},modalAppendToBody:!1},o||{}),a=new th(n,i);return fs.set(a,e),ds.set(e,a),a}var rh=$t.EXISTS,oh=vt.f,ih=Function.prototype,ah=pe(ih.toString),sh=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,lh=pe(sh.exec);function uh(e){var t=e.server,n=void 0===t?"":t,r=e.fieldName,o=void 0===r?"":r,i=e.maxFileSize,a=void 0===i?10485760:i,s=e.maxNumberOfFiles,l=void 0===s?100:s,u=e.meta,c=void 0===u?{}:u,f=e.metaWithUrl,d=void 0!==f&&f,h=e.headers,p=void 0===h?{}:h,g=e.withCredentials,v=void 0!==g&&g,y=e.timeout,m=void 0===y?1e4:y,b=e.onBeforeUpload,w=void 0===b?function(e){return e}:b,x=e.onSuccess,S=void 0===x?function(e,t){}:x,k=e.onError,E=void 0===k?function(e,t,n){console.error(e.name+" upload error",t,n)}:k,O=e.onProgress,C=void 0===O?function(e){}:O;if(!n)throw new Error("Cannot get upload server address\n没有配置上传地址");if(!o)throw new Error("Cannot get fieldName\n没有配置 fieldName");var N=n;d&&(N=function(e,t){var n=ca(e.split("#"),2),r=n[0],o=n[1],i=[];I(t,(function(e,t){i.push(t+"="+e)}));var a=i.join("&");return r=r.indexOf("?")>0?r+"&"+a:r+"?"+a,o?r+"#"+o:r}(N,c));var T=new Q({onBeforeUpload:w,restrictions:{maxFileSize:a,maxNumberOfFiles:l},meta:c}).use(Z,{endpoint:N,headers:p,formData:!0,fieldName:o,bundle:!0,withCredentials:v,timeout:m});return T.on("upload-success",(function(e,t){var n=t.body;S(e,void 0===n?{}:n),T.removeFile(e.id)})),T.on("progress",(function(e){e<1||C(e)})),T.on("error",(function(e){console.error("wangEditor file upload error",e.stack)})),T.on("upload-error",(function(e,t,n){E(e,t,n),T.removeFile(e.id)})),T.on("restriction-failed",(function(e,t){E(e,t),T.removeFile(e.id)})),T}function ch(e){return ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(e)}function fh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){fh(e,t,n[t])}))}return e}function hh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ph(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gh(e,t,n){return t&&ph(e.prototype,t),n&&ph(e,n),e}function vh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yh(e,t){if(t&&("object"===ch(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vh(e)}function mh(e){return mh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mh(e)}function bh(e,t){return bh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bh(e,t)}function wh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bh(e,t)}Ue&&!rh&&oh(ih,"name",{configurable:!0,get:function(){try{return lh(sh,ah(this))[1]}catch(e){return""}}});var xh={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Sh=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hh(this,e),this.init(t,n)}return gh(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||xh,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,dh({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),kh=function(){function e(){hh(this,e),this.observers={}}return gh(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var o=[].concat(this.observers[e]);o.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var i=[].concat(this.observers["*"]);i.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Eh(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Oh(e){return null==e?"":""+e}function Ch(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function Nh(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function o(){return!e||"string"==typeof e}for(var i="string"!=typeof t?[].concat(t):t.split(".");i.length>1;){if(o())return{};var a=r(i.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return o()?{}:{obj:e,k:r(i.shift())}}function Th(e,t,n){var r=Nh(e,t,Object);r.obj[r.k]=n}function Mh(e,t){var n=Nh(e,t),r=n.obj,o=n.k;if(r)return r[o]}function Lh(e,t,n){var r=Mh(e,n);return void 0!==r?r:Mh(t,n)}function Ph(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):Ph(e[r],t[r],n):e[r]=t[r]);return e}function Dh(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Rh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function jh(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return Rh[e]})):e}var Ah="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function Fh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),o=e,i=0;i<r.length;++i){if(!o)return;if("string"==typeof o[r[i]]&&i+1<r.length)return;if(void 0===o[r[i]]){for(var a=2,s=r.slice(i,i+a).join(n),l=o[s];void 0===l&&r.length>i+a;)a++,l=o[s=r.slice(i,i+a).join(n)];if(void 0===l)return;if("string"==typeof l)return l;if(s&&"string"==typeof l[s])return l[s];var u=r.slice(i+a).join(n);return u?Fh(l,u,n):void 0}o=o[r[i]]}return o}}var Ih=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return hh(this,t),n=yh(this,mh(t).call(this)),Ah&&kh.call(vh(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return wh(t,kh),gh(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,i=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,a=[e,t];n&&"string"!=typeof n&&(a=a.concat(n)),n&&"string"==typeof n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(a=e.split("."));var s=Mh(this.data,a);return s||!i||"string"!=typeof n?s:Fh(this.data&&this.data[e]&&this.data[e][t],n,o)}},{key:"addResource",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},i=this.options.keySeparator;void 0===i&&(i=".");var a=[e,t];n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),Th(this.data,a,r),o.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var o in n)"string"!=typeof n[o]&&"[object Array]"!==Object.prototype.toString.apply(n[o])||this.addResource(e,t,o,n[o],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var s=Mh(this.data,a)||{};r?Ph(s,n,o):s=dh({},s,n),Th(this.data,a,s),i.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?dh({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(),_h={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,o){var i=this;return e.forEach((function(e){i.processors[e]&&(t=i.processors[e].process(t,n,r,o))})),t}},Bh={},$h=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return hh(this,t),n=yh(this,mh(t).call(this)),Ah&&kh.call(vh(n)),Ch(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,vh(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=Sh.create("translator"),n}return wh(t,kh),gh(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,o=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var i=e.match(this.interpolator.nestingRegexp);if(i&&i.length>0)return{key:e,namespaces:o};var a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(o=a.shift()),e=a.join(r)}return"string"==typeof o&&(o=[o]),{key:e,namespaces:o}}},{key:"translate",value:function(e,n,r){var o=this;if("object"!==ch(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var i=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],n),s=a.key,l=a.namespaces,u=l[l.length-1],c=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(f){var d=n.nsSeparator||this.options.nsSeparator;return u+d+s}return s}var h=this.resolve(e,n),p=h&&h.res,g=h&&h.usedKey||s,v=h&&h.exactUsedKey||s,y=Object.prototype.toString.apply(p),m=["[object Number]","[object Function]","[object RegExp]"],b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,x="string"!=typeof p&&"boolean"!=typeof p&&"number"!=typeof p;if(w&&p&&x&&m.indexOf(y)<0&&("string"!=typeof b||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,p,dh({},n,{ns:l})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(i){var S="[object Array]"===y,k=S?[]:{},E=S?v:g;for(var O in p)if(Object.prototype.hasOwnProperty.call(p,O)){var C="".concat(E).concat(i).concat(O);k[O]=this.translate(C,dh({},n,{joinArrays:!1,ns:l})),k[O]===C&&(k[O]=p[O])}p=k}}else if(w&&"string"==typeof b&&"[object Array]"===y)(p=p.join(b))&&(p=this.extendTranslation(p,e,n,r));else{var N=!1,T=!1,M=void 0!==n.count&&"string"!=typeof n.count,L=t.hasDefaultValue(n),P=M?this.pluralResolver.getSuffix(c,n.count):"",D=n["defaultValue".concat(P)]||n.defaultValue;!this.isValidLookup(p)&&L&&(N=!0,p=D),this.isValidLookup(p)||(T=!0,p=s);var R=n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,j=R&&T?void 0:p,A=L&&D!==p&&this.options.updateMissing;if(T||N||A){if(this.logger.log(A?"updateKey":"missingKey",c,u,s,A?D:p),i){var F=this.resolve(s,dh({},n,{keySeparator:!1}));F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var I=[],_=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&_&&_[0])for(var B=0;B<_.length;B++)I.push(_[B]);else"all"===this.options.saveMissingTo?I=this.languageUtils.toResolveHierarchy(n.lng||this.language):I.push(n.lng||this.language);var $=function(e,t,r){o.options.missingKeyHandler?o.options.missingKeyHandler(e,u,t,A?r:j,A,n):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(e,u,t,A?r:j,A,n),o.emit("missingKey",e,u,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&M?I.forEach((function(e){o.pluralResolver.getSuffixes(e).forEach((function(t){$([e],s+t,n["defaultValue".concat(t)]||D)}))})):$(I,s,D))}p=this.extendTranslation(p,e,n,h,r),T&&p===s&&this.options.appendNamespaceToMissingKey&&(p="".concat(u,":").concat(s)),(T||N)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(p))}return p}},{key:"extendTranslation",value:function(e,t,n,r,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(dh({},n,{interpolation:dh({},this.options.interpolation,n.interpolation)}));var a,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var l=e.match(this.interpolator.nestingRegexp);a=l&&l.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=dh({},this.options.interpolation.defaultVariables,u)),e=this.interpolator.interpolate(e,u,n.lng||this.language,n),s){var c=e.match(this.interpolator.nestingRegexp);a<(c&&c.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o&&o[0]===r[0]&&!n.context?(i.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):i.translate.apply(i,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var f=n.postProcess||this.options.postProcess,d="string"==typeof f?[f]:f;return null!=e&&d&&d.length&&!1!==n.applyPostProcessor&&(e=_h.handle(d,e,t,this.options&&this.options.postProcessPassResolved?dh({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,o,i,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!a.isValidLookup(t)){var l=a.extractFromKey(e,s),u=l.key;n=u;var c=l.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var f=void 0!==s.count&&"string"!=typeof s.count,d=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,h=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);c.forEach((function(e){a.isValidLookup(t)||(i=e,!Bh["".concat(h[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(i)&&(Bh["".concat(h[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!a.isValidLookup(t)){o=n;var i,l,c=u,h=[c];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(h,u,n,e,s);else f&&(i=a.pluralResolver.getSuffix(n,s.count)),f&&d&&h.push(c+i),d&&h.push(c+="".concat(a.options.contextSeparator).concat(s.context)),f&&h.push(c+=i);for(;l=h.pop();)a.isValidLookup(t)||(r=l,t=a.getResource(n,e,l,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:o,usedNS:i}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}();function Wh(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Vh=function(){function e(t){hh(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Sh.create("languageUtils")}return gh(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Wh(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Wh(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=Wh(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),o=[],i=function(e){e&&(n.isSupportedCode(e)?o.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):"string"==typeof e&&i(this.formatLanguageCode(e)),r.forEach((function(e){o.indexOf(e)<0&&i(n.formatLanguageCode(e))})),o}}]),e}(),zh=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Uh={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function Hh(){var e={};return zh.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:Uh[t.fc]}}))})),e}var Kh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hh(this,e),this.languageUtils=t,this.options=n,this.logger=Sh.create("pluralResolver"),this.rules=Hh()}return gh(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var o=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),i=r.numbers[o];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var a=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),qh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hh(this,e),this.logger=Sh.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return gh(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:jh,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Dh(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Dh(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Dh(t.nestingPrefix):t.nestingPrefixEscaped||Dh("$t("),this.nestingSuffix=t.nestingSuffix?Dh(t.nestingSuffix):t.nestingSuffixEscaped||Dh(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var o,i,a,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var c=function(e){if(e.indexOf(s.formatSeparator)<0){var o=Lh(t,l,e);return s.alwaysFormat?s.format(o,void 0,n,dh({},r,t,{interpolationkey:e})):o}var i=e.split(s.formatSeparator),a=i.shift().trim(),u=i.join(s.formatSeparator).trim();return s.format(Lh(t,l,a),u,n,dh({},r,t,{interpolationkey:a}))};this.resetRegExp();var f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,h=[{regex:this.regexpUnescape,safeValue:function(e){return u(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?u(s.escape(e)):u(e)}}];return h.forEach((function(t){for(a=0;o=t.regex.exec(e);){if(void 0===(i=c(o[1].trim())))if("function"==typeof f){var n=f(e,o,r);i="string"==typeof n?n:""}else{if(d){i=o[0];continue}s.logger.warn("missed to pass in variable ".concat(o[1]," for interpolating ").concat(e)),i=""}else"string"==typeof i||s.useRawValueToEscape||(i=Oh(i));var l=t.safeValue(i);if(e=e.replace(o[0],l),d?(t.regex.lastIndex+=l.length,t.regex.lastIndex-=o[0].length):t.regex.lastIndex=0,++a>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=dh({},i);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);e=r[0],o=(o=this.interpolate(o,a)).replace(/'/g,'"');try{a=JSON.parse(o),t&&(a=dh({},t,a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(o)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=c.shift(),l=c,u=!0}if((r=t(s.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=Oh(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),u&&(r=l.reduce((function(e,t){return o.format(e,t,i.lng,dh({},i,{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var Gh=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return hh(this,t),o=yh(this,mh(t).call(this)),Ah&&kh.call(vh(o)),o.backend=e,o.store=n,o.services=r,o.languageUtils=r.languageUtils,o.options=i,o.logger=Sh.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(r,i.backend,i),o}return wh(t,kh),gh(t,[{key:"queueLoad",value:function(e,t,n,r){var o=this,i=[],a=[],s=[],l=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&o.store.hasResourceBundle(e,t)?o.state[s]=2:o.state[s]<0||(1===o.state[s]?a.indexOf(s)<0&&a.push(s):(o.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),i.indexOf(s)<0&&i.push(s),l.indexOf(t)<0&&l.push(t)))})),r||s.push(e)})),(i.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:i,pending:a,toLoadLanguages:s,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),o=r[0],i=r[1];t&&this.emit("failedLoading",o,i,t),n&&this.store.addResourceBundle(o,i,n),this.state[e]=t?-1:2;var a={};this.queue.forEach((function(n){!function(e,t,n,r){var o=Nh(e,t,Object),i=o.obj,a=o.k;i[a]=i[a]||[],r&&(i[a]=i[a].concat(n)),r||i[a].push(n)}(n.loaded,[o],i),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){a[e]||(a[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){a[e].indexOf(t)<0&&a[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,l){s&&l&&o<5?setTimeout((function(){r.read.call(r,e,t,n,o+1,2*i,a)}),i):a(s,l)})):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var i=this.queueLoad(e,t,r,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),o=r[0],i=r[1];this.read(o,i,"read",void 0,void 0,(function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(i," for language ").concat(o," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(i," for language ").concat(o),a),t.loaded(e,r,a)}))}},{key:"saveMissing",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,dh({},i,{isUpdate:o})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}();function Jh(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===ch(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===ch(e[2])||"object"===ch(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function Yh(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Xh(){}var Qh=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(hh(this,t),e=yh(this,mh(t).call(this)),Ah&&kh.call(vh(e)),e.options=Yh(n),e.services={},e.logger=Sh,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),yh(e,vh(e));setTimeout((function(){e.init(n,r)}),0)}return e}return wh(t,kh),gh(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=dh({},Jh(),this.options,Yh(t)),this.format=this.options.interpolation.format,n||(n=Xh),!this.options.isClone){this.modules.logger?Sh.init(r(this.modules.logger),this.options):Sh.init(null,this.options);var o=new Vh(this.options);this.store=new Ih(this.options.resources,this.options);var i=this.services;i.logger=Sh,i.resourceStore=this.store,i.languageUtils=o,i.pluralResolver=new Kh(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),i.interpolator=new qh(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new Gh(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new $h(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.length>0&&"dev"!==a[0]&&(this.options.lng=a[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var u=Eh(),c=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),u}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xh,r=n,o="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&"cimode"===o.toLowerCase())return r();var i=[],a=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){i.indexOf(e)<0&&i.push(e)}))};if(o)a(o);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return a(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return a(e)})),this.services.backendConnector.load(i,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=Eh();return e||(e=this.languages),t||(t=this.options.ns),n||(n=Xh),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&_h.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=Eh();this.emit("languageChanging",e);var o=function(o){e||o||!n.services.languageDetector||(o=[]);var i="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);i&&(n.language||(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i)),n.translator.language||n.translator.changeLanguage(i),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(i)),n.loadResources(i,(function(e){!function(e,o){o?(n.language=o,n.languages=n.services.languageUtils.toResolveHierarchy(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var r=this,o=function e(t,o){var i;if("object"!==ch(o)){for(var a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];i=r.options.overloadTranslationOptionHandler([t,o].concat(s))}else i=dh({},o);i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns;var u=r.options.keySeparator||".",c=n?"".concat(n).concat(u).concat(t):t;return r.t(c,i)};return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=n,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],o=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!a(r,e)||o&&!a(i,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=Eh();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Eh();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],o=e.filter((function(e){return r.indexOf(e)<0}));return o.length?(this.options.preload=r.concat(o),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xh,o=dh({},this.options,n,{isClone:!0}),i=new t(o),a=["store","services","language"];return a.forEach((function(t){i[t]=e[t]})),i.services=dh({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i.translator=new $h(i.services,i.options),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))})),i.init(o,r),i.translator.options=i.options,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),t}(),Zh=new Qh,ep="translation";function tp(e,t){Zh.addResourceBundle(e,ep,t,!0,!0)}function np(e){Zh.changeLanguage(e)}function rp(e){return Zh.getResourceBundle(e,ep)}Zh.init({lng:"zh-CN",resources:{}});var op=Zh.t.bind(Zh);export{nl as DomEditor,Fl as ELEM_TO_HTML_CONF,bc as PARSE_ELEM_HTML_CONF,yc as PARSE_STYLE_HTML_FN_LIST,gc as PRE_PARSE_HTML_CONF_LIST,Yf as RENDER_ELEM_CONF,Gf as RENDER_STYLE_HANDLER_LIST,jl as STYLE_TO_HTML_FN_LIST,pc as TEXT_TAGS,th as Toolbar,Yd as coreCreateEditor,nh as coreCreateToolbar,uh as createUploader,_d as genModalButtonElems,Fd as genModalInputElems,Id as genModalTextareaElems,tp as i18nAddResources,np as i18nChangeLanguage,rp as i18nGetResources,Il as registerElemToHtmlConf,al as registerMenu,wc as registerParseElemHtmlConf,mc as registerParseStyleHtmlHandler,vc as registerPreParseHtmlConf,Xf as registerRenderElemConf,Jf as registerStyleHandler,Al as registerStyleToHtmlHandler,op as t};
//# sourceMappingURL=index.esm.js.map
