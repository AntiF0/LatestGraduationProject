import{i18nAddResources as t,DomEditor as e,t as n}from"@wangeditor/core";import{Editor as r,Transforms as o,Element as i,Path as a,Node as l,Point as u,Range as c,Text as s}from"slate";import{jsx as f}from"snabbdom";import d,{append as p,on as h,focus as v,attr as g,val as y,html as b,dataset as m,addClass as x,removeClass as S,children as w,each as T,find as E}from"dom7";import"nanoid";import N from"lodash.isequal";t("en",{tableModule:{deleteCol:"Delete column",deleteRow:"Delete row",deleteTable:"Delete table",widthAuto:"Width auto",insertCol:"Insert column",insertRow:"Insert row",insertTable:"Insert table",header:"Header"}}),t("zh-CN",{tableModule:{deleteCol:"删除列",deleteRow:"删除行",deleteTable:"删除表格",widthAuto:"宽度自适应",insertCol:"插入列",insertRow:"插入行",insertTable:"插入表格",header:"表头"}});var M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function O(t){var e={exports:{}};return t(e,e.exports),e.exports}var V,H,z=function(t){return t&&t.Math==Math&&t},L=z("object"==typeof globalThis&&globalThis)||z("object"==typeof window&&window)||z("object"==typeof self&&self)||z("object"==typeof M&&M)||function(){return this}()||Function("return this")(),A=function(t){try{return!!t()}catch(t){return!0}},P=!A((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),j=Function.prototype.call,R=j.bind?j.bind(j):function(){return j.apply(j,arguments)},C={}.propertyIsEnumerable,I=Object.getOwnPropertyDescriptor,k=I&&!C.call({1:2},1)?function(t){var e=I(this,t);return!!e&&e.enumerable}:C,D={f:k},B=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},F=Function.prototype,$=F.bind,_=F.call,W=$&&$.bind(_),G=$?function(t){return t&&W(_,t)}:function(t){return t&&function(){return _.apply(t,arguments)}},q=G({}.toString),U=G("".slice),K=function(t){return U(q(t),8,-1)},Y=L.Object,X=G("".split),J=A((function(){return!Y("z").propertyIsEnumerable(0)}))?function(t){return"String"==K(t)?X(t,""):Y(t)}:Y,Q=L.TypeError,Z=function(t){if(null==t)throw Q("Can't call method on "+t);return t},tt=function(t){return J(Z(t))},et=function(t){return"function"==typeof t},nt=function(t){return"object"==typeof t?null!==t:et(t)},rt=function(t){return et(t)?t:void 0},ot=function(t,e){return arguments.length<2?rt(L[t]):L[t]&&L[t][e]},it=G({}.isPrototypeOf),at=ot("navigator","userAgent")||"",lt=L.process,ut=L.Deno,ct=lt&&lt.versions||ut&&ut.version,st=ct&&ct.v8;st&&(H=(V=st.split("."))[0]>0&&V[0]<4?1:+(V[0]+V[1])),!H&&at&&(!(V=at.match(/Edge\/(\d+)/))||V[1]>=74)&&(V=at.match(/Chrome\/(\d+)/))&&(H=+V[1]);var ft=H,dt=!!Object.getOwnPropertySymbols&&!A((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ft&&ft<41})),pt=dt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ht=L.Object,vt=pt?function(t){return"symbol"==typeof t}:function(t){var e=ot("Symbol");return et(e)&&it(e.prototype,ht(t))},gt=L.String,yt=function(t){try{return gt(t)}catch(t){return"Object"}},bt=L.TypeError,mt=function(t){if(et(t))return t;throw bt(yt(t)+" is not a function")},xt=function(t,e){var n=t[e];return null==n?void 0:mt(n)},St=L.TypeError,wt=Object.defineProperty,Tt=function(t,e){try{wt(L,t,{value:e,configurable:!0,writable:!0})}catch(n){L[t]=e}return e},Et=L["__core-js_shared__"]||Tt("__core-js_shared__",{}),Nt=O((function(t){(t.exports=function(t,e){return Et[t]||(Et[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),Mt=L.Object,Ot=function(t){return Mt(Z(t))},Vt=G({}.hasOwnProperty),Ht=Object.hasOwn||function(t,e){return Vt(Ot(t),e)},zt=0,Lt=Math.random(),At=G(1..toString),Pt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+At(++zt+Lt,36)},jt=Nt("wks"),Rt=L.Symbol,Ct=Rt&&Rt.for,It=pt?Rt:Rt&&Rt.withoutSetter||Pt,kt=function(t){if(!Ht(jt,t)||!dt&&"string"!=typeof jt[t]){var e="Symbol."+t;dt&&Ht(Rt,t)?jt[t]=Rt[t]:jt[t]=pt&&Ct?Ct(e):It(e)}return jt[t]},Dt=L.TypeError,Bt=kt("toPrimitive"),Ft=function(t,e){if(!nt(t)||vt(t))return t;var n,r=xt(t,Bt);if(r){if(void 0===e&&(e="default"),n=R(r,t,e),!nt(n)||vt(n))return n;throw Dt("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&et(n=t.toString)&&!nt(r=R(n,t)))return r;if(et(n=t.valueOf)&&!nt(r=R(n,t)))return r;if("string"!==e&&et(n=t.toString)&&!nt(r=R(n,t)))return r;throw St("Can't convert object to primitive value")}(t,e)},$t=function(t){var e=Ft(t,"string");return vt(e)?e:e+""},_t=L.document,Wt=nt(_t)&&nt(_t.createElement),Gt=function(t){return Wt?_t.createElement(t):{}},qt=!P&&!A((function(){return 7!=Object.defineProperty(Gt("div"),"a",{get:function(){return 7}}).a})),Ut=Object.getOwnPropertyDescriptor,Kt={f:P?Ut:function(t,e){if(t=tt(t),e=$t(e),qt)try{return Ut(t,e)}catch(t){}if(Ht(t,e))return B(!R(D.f,t,e),t[e])}},Yt=L.String,Xt=L.TypeError,Jt=function(t){if(nt(t))return t;throw Xt(Yt(t)+" is not an object")},Qt=L.TypeError,Zt=Object.defineProperty,te={f:P?Zt:function(t,e,n){if(Jt(t),e=$t(e),Jt(n),qt)try{return Zt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Qt("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},ee=P?function(t,e,n){return te.f(t,e,B(1,n))}:function(t,e,n){return t[e]=n,t},ne=G(Function.toString);et(Et.inspectSource)||(Et.inspectSource=function(t){return ne(t)});var re,oe,ie,ae=Et.inspectSource,le=L.WeakMap,ue=et(le)&&/native code/.test(ae(le)),ce=Nt("keys"),se=function(t){return ce[t]||(ce[t]=Pt(t))},fe={},de=L.TypeError,pe=L.WeakMap;if(ue||Et.state){var he=Et.state||(Et.state=new pe),ve=G(he.get),ge=G(he.has),ye=G(he.set);re=function(t,e){if(ge(he,t))throw new de("Object already initialized");return e.facade=t,ye(he,t,e),e},oe=function(t){return ve(he,t)||{}},ie=function(t){return ge(he,t)}}else{var be=se("state");fe[be]=!0,re=function(t,e){if(Ht(t,be))throw new de("Object already initialized");return e.facade=t,ee(t,be,e),e},oe=function(t){return Ht(t,be)?t[be]:{}},ie=function(t){return Ht(t,be)}}var me={set:re,get:oe,has:ie,enforce:function(t){return ie(t)?oe(t):re(t,{})},getterFor:function(t){return function(e){var n;if(!nt(e)||(n=oe(e)).type!==t)throw de("Incompatible receiver, "+t+" required");return n}}},xe=Function.prototype,Se=P&&Object.getOwnPropertyDescriptor,we=Ht(xe,"name"),Te={EXISTS:we,PROPER:we&&"something"===function(){}.name,CONFIGURABLE:we&&(!P||P&&Se(xe,"name").configurable)},Ee=O((function(t){var e=Te.CONFIGURABLE,n=me.get,r=me.enforce,o=String(String).split("String");(t.exports=function(t,n,i,a){var l,u=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,s=!!a&&!!a.noTargetGet,f=a&&void 0!==a.name?a.name:n;et(i)&&("Symbol("===String(f).slice(0,7)&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Ht(i,"name")||e&&i.name!==f)&&ee(i,"name",f),(l=r(i)).source||(l.source=o.join("string"==typeof f?f:""))),t!==L?(u?!s&&t[n]&&(c=!0):delete t[n],c?t[n]=i:ee(t,n,i)):c?t[n]=i:Tt(n,i)})(Function.prototype,"toString",(function(){return et(this)&&n(this).source||ae(this)}))})),Ne=Math.ceil,Me=Math.floor,Oe=function(t){var e=+t;return e!=e||0===e?0:(e>0?Me:Ne)(e)},Ve=Math.max,He=Math.min,ze=function(t,e){var n=Oe(t);return n<0?Ve(n+e,0):He(n,e)},Le=Math.min,Ae=function(t){return t>0?Le(Oe(t),9007199254740991):0},Pe=function(t){return Ae(t.length)},je=function(t){return function(e,n,r){var o,i=tt(e),a=Pe(i),l=ze(r,a);if(t&&n!=n){for(;a>l;)if((o=i[l++])!=o)return!0}else for(;a>l;l++)if((t||l in i)&&i[l]===n)return t||l||0;return!t&&-1}},Re={includes:je(!0),indexOf:je(!1)}.indexOf,Ce=G([].push),Ie=function(t,e){var n,r=tt(t),o=0,i=[];for(n in r)!Ht(fe,n)&&Ht(r,n)&&Ce(i,n);for(;e.length>o;)Ht(r,n=e[o++])&&(~Re(i,n)||Ce(i,n));return i},ke=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],De=ke.concat("length","prototype"),Be={f:Object.getOwnPropertyNames||function(t){return Ie(t,De)}},Fe={f:Object.getOwnPropertySymbols},$e=G([].concat),_e=ot("Reflect","ownKeys")||function(t){var e=Be.f(Jt(t)),n=Fe.f;return n?$e(e,n(t)):e},We=function(t,e){for(var n=_e(e),r=te.f,o=Kt.f,i=0;i<n.length;i++){var a=n[i];Ht(t,a)||r(t,a,o(e,a))}},Ge=/#|\.prototype\./,qe=function(t,e){var n=Ke[Ue(t)];return n==Xe||n!=Ye&&(et(e)?A(e):!!e)},Ue=qe.normalize=function(t){return String(t).replace(Ge,".").toLowerCase()},Ke=qe.data={},Ye=qe.NATIVE="N",Xe=qe.POLYFILL="P",Je=qe,Qe=Kt.f,Ze=function(t,e){var n,r,o,i,a,l=t.target,u=t.global,c=t.stat;if(n=u?L:c?L[l]||Tt(l,{}):(L[l]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=Qe(n,r))&&a.value:n[r],!Je(u?r:l+(c?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;We(i,o)}(t.sham||o&&o.sham)&&ee(i,"sham",!0),Ee(n,r,i,t)}},tn={};tn[kt("toStringTag")]="z";var en,nn="[object z]"===String(tn),rn=kt("toStringTag"),on=L.Object,an="Arguments"==K(function(){return arguments}()),ln=nn?K:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=on(t),rn))?n:an?K(e):"Object"==(r=K(e))&&et(e.callee)?"Arguments":r},un=L.String,cn=function(t){if("Symbol"===ln(t))throw TypeError("Cannot convert a Symbol value to a string");return un(t)},sn=/"/g,fn=G("".replace);Ze({target:"String",proto:!0,forced:(en="anchor",A((function(){var t=""[en]('"');return t!==t.toLowerCase()||t.split('"').length>3})))},{anchor:function(t){return e="a",n="name",r=t,o=cn(Z(this)),i="<"+e,""!==n&&(i+=" "+n+'="'+fn(cn(r),sn,"&quot;")+'"'),i+">"+o+"</"+e+">";var e,n,r,o,i}});var dn,pn=kt("match"),hn=function(t){var e;return nt(t)&&(void 0!==(e=t[pn])?!!e:"RegExp"==K(t))},vn=L.TypeError,gn=function(t){if(hn(t))throw vn("The method doesn't accept regular expressions");return t},yn=kt("match"),bn=Kt.f,mn=G("".startsWith),xn=G("".slice),Sn=Math.min,wn=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[yn]=!1,"/./"[t](e)}catch(t){}}return!1}("startsWith");Ze({target:"String",proto:!0,forced:!!(wn||(dn=bn(String.prototype,"startsWith"),!dn||dn.writable))&&!wn},{startsWith:function(t){var e=cn(Z(this));gn(t);var n=Ae(Sn(arguments.length>1?arguments[1]:void 0,e.length)),r=cn(t);return mn?mn(e,r,n):xn(e,n,n+r.length)===r}});var Tn,En=function(){var t=Jt(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Nn=L.RegExp,Mn=A((function(){var t=Nn("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),On=Mn||A((function(){return!Nn("a","y").sticky})),Vn={BROKEN_CARET:Mn||A((function(){var t=Nn("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:On,UNSUPPORTED_Y:Mn},Hn=Object.keys||function(t){return Ie(t,ke)},zn=P?Object.defineProperties:function(t,e){Jt(t);for(var n,r=tt(e),o=Hn(e),i=o.length,a=0;i>a;)te.f(t,n=o[a++],r[n]);return t},Ln=ot("document","documentElement"),An=se("IE_PROTO"),Pn=function(){},jn=function(t){return"<script>"+t+"<\/script>"},Rn=function(t){t.write(jn("")),t.close();var e=t.parentWindow.Object;return t=null,e},Cn=function(){try{Tn=new ActiveXObject("htmlfile")}catch(t){}var t,e;Cn="undefined"!=typeof document?document.domain&&Tn?Rn(Tn):((e=Gt("iframe")).style.display="none",Ln.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(jn("document.F=Object")),t.close(),t.F):Rn(Tn);for(var n=ke.length;n--;)delete Cn.prototype[ke[n]];return Cn()};fe[An]=!0;var In,kn,Dn=Object.create||function(t,e){var n;return null!==t?(Pn.prototype=Jt(t),n=new Pn,Pn.prototype=null,n[An]=t):n=Cn(),void 0===e?n:zn(n,e)},Bn=L.RegExp,Fn=A((function(){var t=Bn(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),$n=L.RegExp,_n=A((function(){var t=$n("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Wn=me.get,Gn=Nt("native-string-replace",String.prototype.replace),qn=RegExp.prototype.exec,Un=qn,Kn=G("".charAt),Yn=G("".indexOf),Xn=G("".replace),Jn=G("".slice),Qn=(kn=/b*/g,R(qn,In=/a/,"a"),R(qn,kn,"a"),0!==In.lastIndex||0!==kn.lastIndex),Zn=Vn.BROKEN_CARET,tr=void 0!==/()??/.exec("")[1];(Qn||tr||Zn||Fn||_n)&&(Un=function(t){var e,n,r,o,i,a,l,u=this,c=Wn(u),s=cn(t),f=c.raw;if(f)return f.lastIndex=u.lastIndex,e=R(Un,f,s),u.lastIndex=f.lastIndex,e;var d=c.groups,p=Zn&&u.sticky,h=R(En,u),v=u.source,g=0,y=s;if(p&&(h=Xn(h,"y",""),-1===Yn(h,"g")&&(h+="g"),y=Jn(s,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==Kn(s,u.lastIndex-1))&&(v="(?: "+v+")",y=" "+y,g++),n=new RegExp("^(?:"+v+")",h)),tr&&(n=new RegExp("^"+v+"$(?!\\s)",h)),Qn&&(r=u.lastIndex),o=R(qn,p?n:u,y),p?o?(o.input=Jn(o.input,g),o[0]=Jn(o[0],g),o.index=u.lastIndex,u.lastIndex+=o[0].length):u.lastIndex=0:Qn&&o&&(u.lastIndex=u.global?o.index+o[0].length:r),tr&&o&&o.length>1&&R(Gn,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=a=Dn(null),i=0;i<d.length;i++)a[(l=d[i])[0]]=o[l[1]];return o});var er=Un;Ze({target:"RegExp",proto:!0,forced:/./.exec!==er},{exec:er});var nr=Array.isArray||function(t){return"Array"==K(t)},rr=function(){},or=[],ir=ot("Reflect","construct"),ar=/^\s*(?:class|function)\b/,lr=G(ar.exec),ur=!ar.exec(rr),cr=function(t){if(!et(t))return!1;try{return ir(rr,or,t),!0}catch(t){return!1}},sr=!ir||A((function(){var t;return cr(cr.call)||!cr(Object)||!cr((function(){t=!0}))||t}))?function(t){if(!et(t))return!1;switch(ln(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return ur||!!lr(ar,ae(t))}:cr,fr=function(t,e,n){var r=$t(e);r in t?te.f(t,r,B(0,n)):t[r]=n},dr=kt("species"),pr=function(t){return ft>=51||!A((function(){var e=[];return(e.constructor={})[dr]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},hr=G([].slice),vr=pr("slice"),gr=kt("species"),yr=L.Array,br=Math.max;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function mr(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function xr(t){var n=t.selection;if(null==n)return!1;var o=mr(r.nodes(t,{match:function(t){return e.checkNodeType(t,"table-cell")}}),1)[0];if(o){var i=mr(o,2)[1],a=r.start(t,i);if(u.equals(n.anchor,a))return!0}return!1}Ze({target:"Array",proto:!0,forced:!vr},{slice:function(t,e){var n,r,o,i=tt(this),a=Pe(i),l=ze(t,a),u=ze(void 0===e?a:e,a);if(nr(i)&&(n=i.constructor,(sr(n)&&(n===yr||nr(n.prototype))||nt(n)&&null===(n=n[gr]))&&(n=void 0),n===yr||void 0===n))return hr(i,l,u);for(r=new(void 0===n?yr:n)(br(u-l,0)),o=0;l<u;l++,o++)l in i&&fr(r,o,i[l]);return r.length=o,r}});var Sr=function(t,e){var n=[][t];return!!n&&A((function(){n.call(null,e||function(){throw 1},1)}))},wr=G([].join),Tr=J!=Object,Er=Sr("join",",");Ze({target:"Array",proto:!0,forced:Tr||!Er},{join:function(t){return wr(tt(this),void 0===t?",":t)}});var Nr={type:"table",renderElem:function(t,n,o){var i=function(t,n){var o=t.selection;if(null==o)return!0;if(c.isCollapsed(o))return!0;var i=o.anchor,l=o.focus,s=e.findPath(t,n),f=r.start(t,s),d=r.end(t,s),p=u.compare(i,d)<=0&&u.compare(i,f)>=0,h=u.compare(l,d)<=0&&u.compare(l,f)>=0;return!!(p&&h&&a.equals(i.path.slice(0,3),l.path.slice(0,3)))}(o,t),l=t.fullWidth,s=[];return void 0!==l&&l&&s.push("full-width"),f("table",{className:s.join(" "),contentEditable:i},f("tbody",null,n))}},Mr={type:"table-row",renderElem:function(t,e,n){return f("tr",null,e)}},Or={type:"table-cell",renderElem:function(t,e,n){var r=t,o=r.colSpan,i=void 0===o?1:o,a=r.rowSpan,l=void 0===a?1:a,u=r.isHeader;return f(void 0!==u&&u?"th":"td",{colSpan:i,rowSpan:l},e)}};var Vr={type:"table",elemToHtml:function(t,e){var n=t.fullWidth,r="";return void 0!==n&&n&&(r+="width: 100%;"),'<table style="'+r+'"><tbody>'+e+"</tbody></table>"}},Hr={type:"table-row",elemToHtml:function(t,e){return"<tr>"+e+"</tr>"}},zr={type:"table-cell",elemToHtml:function(t,e){var n=t,r=n.colSpan,o=void 0===r?1:r,i=n.rowSpan,a=void 0===i?1:i,l=n.isHeader,u=void 0!==l&&l?"th":"td";return"<"+u+' colSpan="'+o+'" rowSpan="'+a+'">'+e+"</"+u+">"}},Lr=G(G.bind),Ar=kt("species"),Pr=L.Array,jr=function(t,e){return new(function(t){var e;return nr(t)&&(e=t.constructor,(sr(e)&&(e===Pr||nr(e.prototype))||nt(e)&&null===(e=e[Ar]))&&(e=void 0)),void 0===e?Pr:e}(t))(0===e?0:e)},Rr=G([].push),Cr=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,l=5==t||i;return function(u,c,s,f){for(var d,p,h=Ot(u),v=J(h),g=function(t,e){return mt(t),void 0===e?t:Lr?Lr(t,e):function(){return t.apply(e,arguments)}}(c,s),y=Pe(v),b=0,m=f||jr,x=e?m(u,y):n||a?m(u,0):void 0;y>b;b++)if((l||b in v)&&(p=g(d=v[b],b,h),t))if(e)x[b]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return b;case 2:Rr(x,d)}else switch(t){case 4:return!1;case 7:Rr(x,d)}return i?-1:r||o?o:x}},Ir={forEach:Cr(0),map:Cr(1),filter:Cr(2),some:Cr(3),every:Cr(4),find:Cr(5),findIndex:Cr(6),filterReject:Cr(7)},kr=kt("unscopables"),Dr=Array.prototype;null==Dr[kr]&&te.f(Dr,kr,{configurable:!0,value:Dn(null)});var Br,Fr=Ir.find,$r=!0;"find"in[]&&Array(1).find((function(){$r=!1})),Ze({target:"Array",proto:!0,forced:$r},{find:function(t){return Fr(this,t,arguments.length>1?arguments[1]:void 0)}}),Br="find",Dr[kr][Br]=!0;var _r=nn?{}.toString:function(){return"[object "+ln(this)+"]"};nn||Ee(Object.prototype,"toString",_r,{unsafe:!0});var Wr=Function.prototype,Gr=Wr.apply,qr=Wr.bind,Ur=Wr.call,Kr="object"==typeof Reflect&&Reflect.apply||(qr?Ur.bind(Gr):function(){return Ur.apply(Gr,arguments)}),Yr=kt("species"),Xr=RegExp.prototype,Jr=function(t,e,n,r){var o=kt(t),i=!A((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!A((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Yr]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!a||n){var l=G(/./[o]),u=e(o,""[t],(function(t,e,n,r,o){var a=G(t),u=e.exec;return u===er||u===Xr.exec?i&&!o?{done:!0,value:l(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));Ee(String.prototype,t,u[0]),Ee(Xr,o,u[1])}r&&ee(Xr[o],"sham",!0)},Qr=L.TypeError,Zr=kt("species"),to=function(t,e){var n,r=Jt(t).constructor;return void 0===r||null==(n=Jt(r)[Zr])?e:function(t){if(sr(t))return t;throw Qr(yt(t)+" is not a constructor")}(n)},eo=G("".charAt),no=G("".charCodeAt),ro=G("".slice),oo=function(t){return function(e,n){var r,o,i=cn(Z(e)),a=Oe(n),l=i.length;return a<0||a>=l?t?"":void 0:(r=no(i,a))<55296||r>56319||a+1===l||(o=no(i,a+1))<56320||o>57343?t?eo(i,a):r:t?ro(i,a,a+2):o-56320+(r-55296<<10)+65536}},io={codeAt:oo(!1),charAt:oo(!0)}.charAt,ao=function(t,e,n){return e+(n?io(t,e).length:1)},lo=L.Array,uo=Math.max,co=function(t,e,n){for(var r=Pe(t),o=ze(e,r),i=ze(void 0===n?r:n,r),a=lo(uo(i-o,0)),l=0;o<i;o++,l++)fr(a,l,t[o]);return a.length=l,a},so=L.TypeError,fo=function(t,e){var n=t.exec;if(et(n)){var r=R(n,t,e);return null!==r&&Jt(r),r}if("RegExp"===K(t))return R(er,t,e);throw so("RegExp#exec called on incompatible receiver")},po=Vn.UNSUPPORTED_Y,ho=Math.min,vo=[].push,go=G(/./.exec),yo=G(vo),bo=G("".slice);Jr("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=cn(Z(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!hn(t))return R(e,r,t,o);for(var i,a,l,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,f=new RegExp(t.source,c+"g");(i=R(er,f,r))&&!((a=f.lastIndex)>s&&(yo(u,bo(r,s,i.index)),i.length>1&&i.index<r.length&&Kr(vo,u,co(i,1)),l=i[0].length,s=a,u.length>=o));)f.lastIndex===i.index&&f.lastIndex++;return s===r.length?!l&&go(f,"")||yo(u,""):yo(u,bo(r,s)),u.length>o?co(u,0,o):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:R(e,this,t,n)}:e,[function(e,n){var o=Z(this),i=null==e?void 0:xt(e,t);return i?R(i,e,o,n):R(r,cn(o),e,n)},function(t,o){var i=Jt(this),a=cn(t),l=n(r,i,a,o,r!==e);if(l.done)return l.value;var u=to(i,RegExp),c=i.unicode,s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(po?"g":"y"),f=new u(po?"^(?:"+i.source+")":i,s),d=void 0===o?4294967295:o>>>0;if(0===d)return[];if(0===a.length)return null===fo(f,a)?[a]:[];for(var p=0,h=0,v=[];h<a.length;){f.lastIndex=po?0:h;var g,y=fo(f,po?bo(a,h):a);if(null===y||(g=ho(Ae(f.lastIndex+(po?h:0)),a.length))===p)h=ao(a,h,c);else{if(yo(v,bo(a,p,h)),v.length===d)return v;for(var b=1;b<=y.length-1;b++)if(yo(v,y[b]),v.length===d)return v;h=p=g}}return yo(v,bo(a,p)),v}]}),!!A((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),po);var mo="\t\n\v\f\r                　\u2028\u2029\ufeff",xo=G("".replace),So="["+mo+"]",wo=RegExp("^"+So+So+"*"),To=RegExp(So+So+"*$"),Eo=function(t){return function(e){var n=cn(Z(e));return 1&t&&(n=xo(n,wo,"")),2&t&&(n=xo(n,To,"")),n}},No={start:Eo(1),end:Eo(2),trim:Eo(3)},Mo=Te.PROPER,Oo=No.trim;function Vo(t){return t.length?t[0].tagName.toLowerCase():""}Ze({target:"String",proto:!0,forced:function(t){return A((function(){return!!mo[t]()||"​᠎"!=="​᠎"[t]()||Mo&&mo[t].name!==t}))}("trim")},{trim:function(){return Oo(this)}}),Ze({global:!0},{globalThis:L}),p&&(d.fn.append=p),h&&(d.fn.on=h),v&&(d.fn.focus=v),g&&(d.fn.attr=g),y&&(d.fn.val=y),b&&(d.fn.html=b),m&&(d.fn.dataset=m),x&&(d.fn.addClass=x),S&&(d.fn.removeClass=S),w&&(d.fn.children=w),T&&(d.fn.each=T),E&&(d.fn.find=E);var Ho={selector:"table",preParseHtml:function(t){var e=d(t);if("table"!==Vo(e))return t;var n=e.find("tbody");if(0===n.length)return t;var r=e.find("tr");return e.append(r),n.remove(),e[0]}},zo=Ir.filter;Ze({target:"Array",proto:!0,forced:!pr("filter")},{filter:function(t){return zo(this,t,arguments.length>1?arguments[1]:void 0)}});var Lo=Math.floor,Ao=G("".charAt),Po=G("".replace),jo=G("".slice),Ro=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Co=/\$([$&'`]|\d{1,2})/g,Io=function(t,e,n,r,o,i){var a=n+t.length,l=r.length,u=Co;return void 0!==o&&(o=Ot(o),u=Ro),Po(i,u,(function(i,u){var c;switch(Ao(u,0)){case"$":return"$";case"&":return t;case"`":return jo(e,0,n);case"'":return jo(e,a);case"<":c=o[jo(u,1,-1)];break;default:var s=+u;if(0===s)return i;if(s>l){var f=Lo(s/10);return 0===f?i:f<=l?void 0===r[f-1]?Ao(u,1):r[f-1]+Ao(u,1):i}c=r[s-1]}return void 0===c?"":c}))},ko=kt("replace"),Do=Math.max,Bo=Math.min,Fo=G([].concat),$o=G([].push),_o=G("".indexOf),Wo=G("".slice),Go="$0"==="a".replace(/./,"$0"),qo=!!/./[ko]&&""===/./[ko]("a","$0");Jr("replace",(function(t,e,n){var r=qo?"$":"$0";return[function(t,n){var r=Z(this),o=null==t?void 0:xt(t,ko);return o?R(o,t,r,n):R(e,cn(r),t,n)},function(t,o){var i=Jt(this),a=cn(t);if("string"==typeof o&&-1===_o(o,r)&&-1===_o(o,"$<")){var l=n(e,i,a,o);if(l.done)return l.value}var u=et(o);u||(o=cn(o));var c=i.global;if(c){var s=i.unicode;i.lastIndex=0}for(var f=[];;){var d=fo(i,a);if(null===d)break;if($o(f,d),!c)break;""===cn(d[0])&&(i.lastIndex=ao(a,Ae(i.lastIndex),s))}for(var p,h="",v=0,g=0;g<f.length;g++){for(var y=cn((d=f[g])[0]),b=Do(Bo(Oe(d.index),a.length),0),m=[],x=1;x<d.length;x++)$o(m,void 0===(p=d[x])?p:String(p));var S=d.groups;if(u){var w=Fo([y],m,b,a);void 0!==S&&$o(w,S);var T=cn(Kr(o,void 0,w))}else T=Io(y,a,b,m,S,o);b>=v&&(h+=Wo(a,v,b)+T,v=b+y.length)}return h+Wo(a,v)}]}),!!A((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Go||qo);var Uo={selector:"td,th",parseElemHtml:function(t,e,n){var r=d(t);0===(e=e.filter((function(t){return!!s.isText(t)||!!n.isInline(t)}))).length&&(e=[{text:r.text().replace(/\s+/gm," ")}]);var o=parseInt(r.attr("colSpan")||"1"),i=parseInt(r.attr("rowSpan")||"1");return{type:"table-cell",isHeader:"th"===Vo(r),colSpan:o,rowSpan:i,children:e}}};var Ko={selector:"tr",parseElemHtml:function(t,n,r){return{type:"table-row",children:n.filter((function(t){return"table-cell"===e.getNodeType(t)}))}}};var Yo={selector:"table",parseElemHtml:function(t,n,r){var o=d(t),i=!1;return i||(i="100%"===function(t,e){for(var n="",r=(t.attr("style")||"").split(";"),o=r.length,i=0;i<o;i++){var a=r[i];if(a){var l=a.split(":");l[0].trim()===e&&(n=l[1].trim())}}return n}(o,"width")),i||(i="100%"===o.attr("width")),{type:"table",fullWidth:i,children:n.filter((function(t){return"table-row"===e.getNodeType(t)}))}}},Xo=Te.PROPER,Jo=RegExp.prototype,Qo=Jo.toString,Zo=G(En),ti=A((function(){return"/a/b"!=Qo.call({source:"a",flags:"b"})})),ei=Xo&&"toString"!=Qo.name;(ti||ei)&&Ee(RegExp.prototype,"toString",(function(){var t=Jt(this),e=cn(t.source),n=t.flags;return"/"+e+"/"+cn(void 0===n&&it(Jo,t)&&!("flags"in Jo)?Zo(t):n)}),{unsafe:!0});var ni=function(){function t(){this.title=n("tableModule.insertTable"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M0 64v896h1024V64H0z m384 576v-192h256v192h-256z m256 64v192h-256v-192h256z m0-512v192h-256V192h256zM320 192v192H64V192h256z m-256 256h256v192H64v-192z m640 0h256v192h-256v-192z m0-64V192h256v192h-256zM64 704h256v192H64v-192z m640 192v-192h256v192h-256z"></path></svg>',this.tag="button",this.showDropPanel=!0,this.$content=null}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){},t.prototype.isDisabled=function(t){var n=t.selection;return null==n||(!c.isCollapsed(n)||!!e.getSelectedElems(t).some((function(n){var r=e.getNodeType(n);return"pre"===r||("table"===r||!!t.isVoid(n))})))},t.prototype.getPanelContentElem=function(t){var e=this;if(this.$content)return this.$content[0];for(var n=d('<div class="w-e-panel-content-table"></div>'),r=d("<span>0 &times; 0</span>"),o=d("<table></table>"),i=0;i<10;i++){for(var a=d("<tr></tr>"),l=0;l<10;l++){var u=d("<td></td>");u.attr("data-x",l.toString()),u.attr("data-y",i.toString()),a.append(u),u.on("mouseenter",(function(t){var e=t.target;if(null!=e){var n=d(e).dataset(),i=n.x,a=n.y;r[0].innerHTML=i+1+" &times; "+(a+1),o.children().each((function(t){d(t).children().each((function(t){var e=d(t),n=e.dataset(),r=n.x,o=n.y;r<=i&&o<=a?e.addClass("active"):e.removeClass("active")}))}))}})),u.on("mousedown",(function(n){n.preventDefault();var r=n.target;if(null!=r){var o=d(r).dataset(),i=o.x,a=o.y;e.insertTable(t,a+1,i+1)}}))}o.append(a)}return n.append(o),n.append(r),this.$content=n,n[0]},t.prototype.insertTable=function(t,n,r){var i=parseInt(n,10),a=parseInt(r,10);if(i&&a&&!(i<=0||a<=0)){var u=e.getSelectedNodeByType(t,"paragraph");u&&""===l.string(u)&&o.removeNodes(t,{mode:"highest"});var c=function(t,e){for(var n=[],r=0;r<t;r++){for(var o=[],i=0;i<e;i++){var a={type:"table-cell",children:[{text:""}]};0===r&&(a.isHeader=!0),o.push(a)}n.push({type:"table-row",children:o})}return{type:"table",children:n}}(i,a);o.insertNodes(t,c,{mode:"highest"})}},t}(),ri=function(){function t(){this.title=n("tableModule.deleteTable"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M826.8032 356.5312c-19.328 0-36.3776 15.6928-36.3776 35.0464v524.2624c0 19.328-16 34.56-35.328 34.56H264.9344c-19.328 0-35.5072-15.3088-35.5072-34.56V390.0416c0-19.328-14.1568-35.0464-33.5104-35.0464s-33.5104 15.6928-33.5104 35.0464V915.712c0 57.9328 44.6208 108.288 102.528 108.288H755.2c57.9328 0 108.0832-50.4576 108.0832-108.288V391.4752c-0.1024-19.2512-17.1264-34.944-36.48-34.944z" p-id="9577"></path><path d="M437.1712 775.7568V390.6048c0-19.328-14.1568-35.0464-33.5104-35.0464s-33.5104 15.616-33.5104 35.0464v385.152c0 19.328 14.1568 35.0464 33.5104 35.0464s33.5104-15.7184 33.5104-35.0464zM649.7024 775.7568V390.6048c0-19.328-17.0496-35.0464-36.3776-35.0464s-36.3776 15.616-36.3776 35.0464v385.152c0 19.328 17.0496 35.0464 36.3776 35.0464s36.3776-15.7184 36.3776-35.0464zM965.0432 217.0368h-174.6176V145.5104c0-57.9328-47.2064-101.76-104.6528-101.76h-350.976c-57.8304 0-105.3952 43.8528-105.3952 101.76v71.5264H54.784c-19.4304 0-35.0464 14.1568-35.0464 33.5104 0 19.328 15.616 33.5104 35.0464 33.5104h910.3616c19.328 0 35.0464-14.1568 35.0464-33.5104 0-19.3536-15.6928-33.5104-35.1488-33.5104z m-247.3728 0H297.3952V145.5104c0-19.328 18.2016-34.7648 37.4272-34.7648h350.976c19.1488 0 31.872 15.1296 31.872 34.7648v71.5264z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return null==t.selection||null==e.getSelectedNodeByType(t,"table")},t.prototype.exec=function(t,e){this.isDisabled(t)||o.removeNodes(t,{mode:"highest"})},t}(),oi=function(){function t(){this.title=n("tableModule.insertRow"),this.iconSvg='<svg viewBox="0 0 1048 1024"><path d="M707.7888 521.0112h-147.456v-147.456H488.2432v147.456h-147.456v68.8128h147.456v147.456h72.0896v-147.456h147.456zM0 917.504V0h1048.576v917.504H0zM327.68 65.536H65.536v196.608H327.68V65.536z m327.68 0H393.216v196.608h262.144V65.536z m327.68 0h-262.144v196.608h262.144V65.536z m0 258.8672H65.536v462.0288H983.04V324.4032z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){var n=t.selection;return null==n||(!c.isCollapsed(n)||null==e.getSelectedNodeByType(t,"table"))},t.prototype.exec=function(t,n){if(!this.isDisabled(t)){var i=mr(r.nodes(t,{match:function(t){return e.checkNodeType(t,"table-cell")},universal:!0}),1),l=mr(i[0],2),u=l[0],c=l[1],s=e.getParentNode(t,u),f=(null==s?void 0:s.children.length)||0;if(0!==f){for(var d={type:"table-row",children:[]},p=0;p<f;p++){d.children.push({type:"table-cell",children:[{text:""}]})}var h=a.parent(c),v=a.next(h);o.insertNodes(t,d,{at:v})}}},t}(),ii=function(){function t(){this.title=n("tableModule.deleteRow"),this.iconSvg='<svg viewBox="0 0 1048 1024"><path d="M907.6736 586.5472L747.1104 425.984l163.84-163.84-78.6432-78.6432-163.84 163.84L507.904 186.7776 429.2608 262.144l163.84 163.84-167.1168 167.1168 78.6432 78.6432 167.1168-167.1168 160.5632 160.5632 75.3664-78.6432zM0 917.504V0h1048.576v917.504H0z m983.04-327.68h-22.9376l-65.536-65.536H983.04V327.68h-91.7504l65.536-65.536h26.2144V65.536H65.536v196.608h317.8496l65.536 65.536H65.536v196.608h380.1088l-65.536 65.536H65.536v196.608H983.04v-196.608z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){var n=t.selection;return null==n||(!c.isCollapsed(n)||null==e.getSelectedNodeByType(t,"table-row"))},t.prototype.exec=function(t,n){if(!this.isDisabled(t)){var i=mr(r.nodes(t,{match:function(t){return e.checkNodeType(t,"table-row")},universal:!0}),1),a=mr(i[0],2),l=a[0],u=a[1],c=e.getParentNode(t,l);((null==c?void 0:c.children.length)||0)<=1?o.removeNodes(t,{mode:"highest"}):o.removeNodes(t,{at:u})}},t}(),ai={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},li=Gt("span").classList,ui=li&&li.constructor&&li.constructor.prototype,ci=ui===Object.prototype?void 0:ui,si=Ir.forEach,fi=Sr("forEach")?[].forEach:function(t){return si(this,t,arguments.length>1?arguments[1]:void 0)},di=function(t){if(t&&t.forEach!==fi)try{ee(t,"forEach",fi)}catch(e){t.forEach=fi}};for(var pi in ai)ai[pi]&&di(L[pi]&&L[pi].prototype);function hi(t){var e=t.children||[];return 0===e.length?[]:(e[0]||{}).children||[]}function vi(t){return hi(t).every((function(t){return!!t.isHeader}))}di(ci);var gi=function(){function t(){this.title=n("tableModule.insertCol"),this.iconSvg='<svg viewBox="0 0 1048 1024"><path d="M327.68 193.3312v186.7776H140.9024v91.7504H327.68v186.7776h88.4736V471.8592h190.0544V380.1088H416.1536V193.3312zM0 917.504V0h1048.576v917.504H0zM655.36 65.536H65.536v720.896H655.36V65.536z m327.68 0h-262.144v196.608h262.144V65.536z m0 262.144h-262.144v196.608h262.144V327.68z m0 262.144h-262.144v196.608h262.144v-196.608z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){var n=t.selection;return null==n||(!c.isCollapsed(n)||null==e.getSelectedNodeByType(t,"table"))},t.prototype.exec=function(t,n){if(!this.isDisabled(t)){var a=mr(r.nodes(t,{match:function(t){return e.checkNodeType(t,"table-cell")},universal:!0}),1),l=mr(a[0],2),u=l[0],c=l[1],s=e.getParentNode(t,u);if(null!=s){var f=e.getParentNode(t,s);if(null!=f)(f.children||[]).forEach((function(n,r){i.isElement(n)&&(n.children||[]).forEach((function(n){var i=e.findPath(t,n);if(i.length===c.length&&N(i.slice(-1),c.slice(-1))){var a={type:"table-cell",children:[{text:""}]};0===r&&vi(f)&&(a.isHeader=!0),o.insertNodes(t,a,{at:i})}}))}))}}},t}(),yi=function(){function t(){this.title=n("tableModule.deleteCol"),this.iconSvg='<svg viewBox="0 0 1048 1024"><path d="M327.68 510.976L393.216 445.44v-13.1072L327.68 366.7968V510.976z m327.68-78.4384l65.536-65.536V507.904L655.36 442.368v-9.8304z m393.216 484.9664V0H0v917.504h1048.576z m-65.536-131.072h-262.144v-52.4288l-13.1072 13.1072-52.4288-52.4288v91.7504H393.216v-91.7504l-52.4288 52.4288-13.1072-13.1072v52.4288H65.536V65.536H327.68v121.2416l36.0448-36.0448 29.4912 29.4912V62.2592h262.144V180.224l49.152-49.152 16.384 16.384V62.2592h262.144V786.432z m-294.912-108.1344l-160.5632-160.5632-167.1168 167.1168-78.6432-78.6432 167.1168-167.1168L288.3584 278.528l78.6432-78.6432 160.5632 160.5632 163.84-163.84 78.6432 78.6432-163.84 163.84 160.5632 160.5632-78.6432 78.6432z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){var n=t.selection;return null==n||(!c.isCollapsed(n)||null==e.getSelectedNodeByType(t,"table-cell"))},t.prototype.exec=function(t,n){if(!this.isDisabled(t)){var a=mr(r.nodes(t,{match:function(t){return e.checkNodeType(t,"table-cell")},universal:!0}),1),l=mr(a[0],2),u=l[0],c=l[1],s=e.getParentNode(t,u),f=(null==s?void 0:s.children.length)||0;if(!s||f<=1)o.removeNodes(t,{mode:"highest"});else{var d=e.getParentNode(t,s);if(null!=d)(d.children||[]).forEach((function(n){i.isElement(n)&&(n.children||[]).forEach((function(n){var r=e.findPath(t,n);r.length===c.length&&N(r.slice(-1),c.slice(-1))&&o.removeNodes(t,{at:r})}))}))}}},t}(),bi=function(){function t(){this.title=n("tableModule.header"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M704 128l-64 0L384 128 320 128 0 128l0 256 0 64 0 192 0 64 0 256 320 0 64 0 256 0 64 0 320 0 0-256 0-64L1024 448 1024 384 1024 128 704 128zM640 640 384 640 384 448l256 0L640 640zM64 448l256 0 0 192L64 640 64 448zM320 896 64 896l0-192 256 0L320 896zM640 896 384 896l0-192 256 0L640 896zM960 896l-256 0 0-192 256 0L960 896zM960 640l-256 0L704 448l256 0L960 640z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){var n=e.getSelectedNodeByType(t,"table");return null!=n&&vi(n)},t.prototype.isActive=function(t){return!!this.getValue(t)},t.prototype.isDisabled=function(t){var n=t.selection;return null==n||(!c.isCollapsed(n)||null==e.getSelectedNodeByType(t,"table"))},t.prototype.exec=function(t,n){if(!this.isDisabled(t)){var r=!n,i=e.getSelectedNodeByType(t,"table");if(null!=i)hi(i).forEach((function(n){return o.setNodes(t,{isHeader:r},{at:e.findPath(t,n)})}))}},t}(),mi=function(){function t(){this.title=n("tableModule.widthAuto"),this.iconSvg='<svg viewBox="0 0 1228 1024"><path d="M862.514337 563.200461H404.581995v121.753478a13.311987 13.311987 0 0 1-6.655993 11.468789 10.23999 10.23999 0 0 1-12.083188-1.433599l-204.799795-179.199821a13.721586 13.721586 0 0 1 0-20.479979l204.799795-179.302221a10.23999 10.23999 0 0 1 12.185588-1.535998 13.209587 13.209587 0 0 1 6.553593 11.673588v115.097485h457.932342V319.693504a11.571188 11.571188 0 0 1 18.841582-10.239989l204.799795 179.19982a13.721586 13.721586 0 0 1 0 20.47998l-204.799795 179.199821a10.23999 10.23999 0 0 1-12.185588 1.535998 13.311987 13.311987 0 0 1-6.655994-11.571188V563.200461zM136.499064 14.951409v993.893406a15.257585 15.257585 0 0 1-15.155185 15.052785H15.155185A15.155185 15.155185 0 0 1 0 1008.844815V14.951409a15.257585 15.257585 0 0 1 15.155185-15.052785h106.086294a15.155185 15.155185 0 0 1 15.257585 15.155185zM1228.798771 14.951409v993.893406a15.257585 15.257585 0 0 1-15.155185 15.052785h-106.188693a15.155185 15.155185 0 0 1-15.155185-15.052785V14.951409a15.257585 15.257585 0 0 1 15.155185-15.052785h106.086293A15.155185 15.155185 0 0 1 1228.798771 15.053809z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){var n=e.getSelectedNodeByType(t,"table");return null!=n&&!!n.fullWidth},t.prototype.isActive=function(t){return!!this.getValue(t)},t.prototype.isDisabled=function(t){var n=t.selection;return null==n||(!c.isCollapsed(n)||null==e.getSelectedNodeByType(t,"table"))},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){var n={fullWidth:!e||null};o.setNodes(t,n,{mode:"highest"})}},t}(),xi={renderElems:[Nr,Mr,Or],elemsToHtml:[Vr,Hr,zr],preParseHtml:[Ho],parseElemsHtml:[Uo,Ko,Yo],menus:[{key:"insertTable",factory:function(){return new ni}},{key:"deleteTable",factory:function(){return new ri}},{key:"insertTableRow",factory:function(){return new oi}},{key:"deleteTableRow",factory:function(){return new ii}},{key:"insertTableCol",factory:function(){return new gi}},{key:"deleteTableCol",factory:function(){return new yi}},{key:"tableHeader",factory:function(){return new bi}},{key:"tableFullWidth",factory:function(){return new mi}}],editorPlugin:function(t){var n=t.insertBreak,u=t.deleteBackward,c=t.deleteForward,s=t.normalizeNode,f=t.insertData,d=t.handleTab,p=t.selectAll,h=t;return h.insertBreak=function(){null==e.getSelectedNodeByType(h,"table")?n():h.insertText("\n")},h.deleteBackward=function(t){xr(h)||u(t)},h.handleTab=function(){var n;if(e.getSelectedNodeByType(h,"table")){var i=r.above(t);e.checkNodeType(i[0],"table-cell")&&o.select(t,i[1]);var a=r.next(t);if(a)a[0]&&a[0].text&&(a=null!==(n=r.above(t,{at:a[1]}))&&void 0!==n?n:a),o.select(t,a[1]);else{var l=h.children||[],u=l.length;if(e.checkNodeType(l[u-1],"table")){var c={type:"paragraph",children:[{text:""}]};o.insertNodes(h,c,{at:[u]}),h.handleTab()}}}else d()},h.deleteForward=function(t){xr(h)||c(t)},h.normalizeNode=function(t){var n=mr(t,2),r=n[0],a=n[1];if("table"!==e.getNodeType(r))return s([r,a]);r.children;var l=h.children||[],u=l.length,c=l[0]===r,f=l[u-1]===r;c&&!f&&o.insertNodes(h,{type:"paragraph",children:[{text:""}]},{at:a}),f&&!c&&o.insertNodes(h,{type:"paragraph",children:[{text:""}]},{at:[a[0]+1]}),c&&f&&(o.insertNodes(h,{type:"paragraph",children:[{text:""}]},{at:a}),o.insertNodes(h,{type:"paragraph",children:[{text:""}]},{at:[a[0]+2]}));var d=l[a[0]+1]||{};if(i.isElement(d)){var p=d.type,v=void 0===p?"":p;if("paragraph"!==v&&"blockquote"!==v&&!v.startsWith("header")){var g={type:"paragraph",children:[{text:""}]},y=[a[0]+1];o.insertNodes(h,g,{at:y})}}var b=l[a[0]-1]||{};if(i.isElement(b)&&("table"===e.getNodeType(b)||h.isVoid(b))){g={type:"paragraph",children:[{text:""}]};o.insertNodes(h,g,{at:a})}},h.insertData=function(t){if(null!=e.getSelectedNodeByType(h,"table")){var n=t.getData("text/plain");"\n"===n||/<img[^>]+>/.test(t.getData("text/html"))?f(t):r.insertText(h,n)}else f(t)},h.selectAll=function(){var t=h.selection;if(null!=t){var n=e.getSelectedNodeByType(h,"table-cell");if(null!=n){var o=t.anchor,i=t.focus;if(a.equals(o.path.slice(0,3),i.path.slice(0,3)))if(0!==l.string(n).length){var u=e.findPath(h,n),c={anchor:r.start(h,u),focus:r.end(h,u)};h.select(c)}else p();else p()}else p()}else p()},h}};export{xi as default};
//# sourceMappingURL=index.esm.js.map
